# Phase 0: 프로젝트 준비 및 분석 단계

> **목표**: 기존 코드베이스 분석과 기술 스택 호환성 검증을 통해 Main Version 개발의 기반을 마련합니다.

**예상 소요시간**: 2-3일  
**선행 조건**: 없음  
**다음 단계**: [Phase 1: 기반 환경 구축](./phase-1-foundation.md)

---

## 🔍 Step 0.1: 기존 코드베이스 심층 분석

### 📋 프롬프트

```markdown
# 기존 Light Version 코드베이스 분석

## 목표
현재 Mantine 기반 Light Version의 구조를 완전히 파악하여 Main Version 개발 시 호환성과 공통 모듈화 전략을 수립합니다.

## 분석 대상

### A. 프로젝트 구조 분석
1. **현재 디렉토리 구조 파악**
   - 컴포넌트 조직 방식 (pages, components, features 등)
   - 상태 관리 구조 (Zustand 스토어 위치 및 역할)
   - API 계층 구조 (TanStack Query 사용 패턴)
   - 스타일링 방식 (Mantine 커스터마이제이션)

2. **의존성 및 패키지 분석**
   - package.json 전체 분석
   - 사용 중인 라이브러리 버전 및 호환성
   - Dev dependencies vs Dependencies 분리 상태
   - 미사용 패키지 식별

### B. 컴포넌트 생태계 분석
1. **Mantine 컴포넌트 사용 현황**
   - 가장 많이 사용되는 Mantine 컴포넌트 목록
   - 커스터마이제이션된 Mantine 컴포넌트 파악
   - Radix UI로 대체 가능한 컴포넌트 식별
   - 복잡한 마이그레이션이 예상되는 컴포넌트

2. **게임 특화 컴포넌트 식별**
   - PlayerCard, GameBoard 등 도메인 컴포넌트
   - 실시간 업데이트가 필요한 컴포넌트
   - 애니메이션이 적용 가능한 컴포넌트
   - 재사용성이 높은 컴포넌트

### C. 비즈니스 로직 분석
1. **상태 관리 패턴**
   - Zustand 스토어별 역할과 책임
   - 서버 상태 vs 클라이언트 상태 분리 현황
   - 실시간 WebSocket 상태 관리 방식
   - 폼 상태 관리 패턴

2. **API 통합 패턴**
   - TanStack Query 사용 패턴 및 쿼리 키 체계
   - 에러 핸들링 전략
   - 캐시 전략 및 무효화 패턴
   - WebSocket 통합 방식

### D. 성능 및 최적화 현황
1. **번들 분석**
   - 현재 번들 사이즈 및 구성
   - Code splitting 적용 현황
   - Tree shaking 효과
   - 중복 의존성 문제

2. **렌더링 성능**
   - 리렌더링 패턴 및 최적화 현황
   - 메모이제이션 사용 패턴
   - 가상화 적용 여부
   - 이미지 및 에셋 최적화 상태

## 출력 요구사항
1. 상세한 코드베이스 분석 리포트
2. Mantine → Radix 마이그레이션 복잡도 평가
3. 공통화 가능한 모듈 목록
4. 호환성 유지 전략 제안
5. 성능 개선 기회 식별
```

### ✅ 완료 기준
- [ ] 프로젝트 구조 완전 파악
- [ ] 컴포넌트 사용 현황 정리
- [ ] 마이그레이션 복잡도 평가 완료
- [ ] 공통 모듈 후보 목록 작성

---

## 📦 Step 0.2: 기술 스택 호환성 검증

### 📋 프롬프트

```markdown
# Main Version 기술 스택 호환성 검증

## 목표
Radix UI + shadcn/ui + Framer Motion 조합이 기존 시스템과 완벽 호환되는지 검증하고, 잠재적 문제점을 사전에 식별합니다.

## 검증 항목

### A. 의존성 호환성 테스트
1. **패키지 충돌 검사**
   ```bash
   # 기존 의존성과 새 패키지 간 충돌 확인
   npm install --dry-run @radix-ui/react-slot @radix-ui/react-toast
   npm install --dry-run class-variance-authority clsx tailwind-merge
   npm install --dry-run framer-motion
   ```

2. **버전 호환성 매트릭스**
   - React 버전과 Radix UI 호환성
   - TypeScript 버전과 shadcn/ui 호환성
   - Vite 설정과 새 라이브러리 호환성
   - 기존 ESLint/Prettier 설정 호환성

### B. 빌드 시스템 검증
1. **Vite 설정 최적화**
   - Tailwind CSS 통합 설정
   - CSS-in-JS와 Tailwind 공존 설정
   - 폰트 및 아이콘 최적화
   - 개발 서버 성능 영향 측정

2. **번들 크기 영향도 분석**
   - 기존 Mantine 번들 vs 새 스택 번들 크기 비교
   - Tree shaking 효과 검증
   - 동적 import 최적화 가능성
   - 중복 제거 기회 식별

### C. 개발 경험 최적화
1. **TypeScript 설정**
   - shadcn/ui 컴포넌트 타입 정의 품질
   - Framer Motion 타입 안전성
   - 자동완성 및 IntelliSense 품질
   - 빌드 시간 영향도

2. **개발 도구 통합**
   - Storybook 호환성 (있다면)
   - 테스트 도구 호환성
   - 디버깅 도구 호환성
   - Hot reload 성능

### D. 실행 환경 테스트
1. **크로스 브라우저 호환성**
   - Safari, Chrome, Firefox, Edge 테스트
   - 모바일 브라우저 호환성
   - 구 버전 브라우저 지원 범위
   - Progressive Enhancement 적용 가능성

2. **성능 벤치마크**
   - 초기 로딩 속도 측정
   - 런타임 성능 비교
   - 메모리 사용량 측정
   - 애니메이션 성능 검증

## 출력 요구사항
1. 호환성 검증 리포트
2. 잠재적 문제점 및 해결책
3. 성능 벤치마크 결과
4. 권장 설정 및 최적화 방안
5. 마이그레이션 로드맵
```

### ✅ 완료 기준
- [ ] 의존성 충돌 없음 확인
- [ ] 성능 벤치마크 완료
- [ ] 호환성 문제 해결방안 수립
- [ ] 최적 설정 가이드 작성

---

## 🎯 Step 0.3: 프로젝트 구조 최적화 설계

### 📋 프롬프트

```markdown
# 최적화된 프로젝트 구조 설계

## 목표
Light Version 호환성을 유지하면서 Main Version 개발에 최적화된 프로젝트 구조를 설계합니다.

## 설계 원칙
1. **명확한 책임 분리**: Light/Main 버전 독립성
2. **최대 코드 재사용**: 공통 비즈니스 로직 공유
3. **확장 가능성**: 향후 기능 추가 고려
4. **개발자 경험**: 직관적인 구조

## 제안 구조
```
frontend/
├── public/
├── src/
│   ├── app/                     # 공통 앱 설정 (라우터, 프로바이더)
│   ├── versions/                # 버전별 구현
│   │   ├── light/               # 기존 Mantine 버전
│   │   │   ├── app/             # Light 버전 전용 설정
│   │   │   ├── components/      # Mantine 기반 컴포넌트
│   │   │   ├── pages/           # Light 전용 페이지
│   │   │   └── styles/          # Mantine 테마 설정
│   │   └── main/                # 새로운 Radix 버전
│   │       ├── app/             # Main 버전 전용 설정
│   │       ├── components/
│   │       │   ├── ui/          # shadcn/ui 기본 컴포넌트
│   │       │   ├── game/        # 게임 특화 컴포넌트
│   │       │   ├── motion/      # Framer Motion 래퍼
│   │       │   └── forms/       # React Hook Form 컴포넌트
│   │       ├── features/        # Feature-Sliced Design
│   │       │   ├── auth/
│   │       │   ├── game-room/
│   │       │   ├── game-play/
│   │       │   └── chat/
│   │       ├── lib/             # 유틸리티 및 설정
│   │       ├── hooks/           # Main 전용 커스텀 훅
│   │       └── styles/          # Tailwind 설정 및 테마
│   ├── shared/                  # 양 버전 공통 모듈
│   │   ├── api/                 # API 클라이언트
│   │   ├── stores/              # Zustand 스토어
│   │   ├── types/               # 공통 타입 정의
│   │   ├── utils/               # 순수 함수 유틸리티
│   │   ├── constants/           # 상수 정의
│   │   ├── hooks/               # 공통 커스텀 훅
│   │   └── websocket/           # WebSocket 관리
│   └── assets/                  # 정적 에셋
├── docs/                        # 개발 문서
└── config/                      # 설정 파일들
```

## 특별 고려사항

### A. 버전 전환 메커니즘
- URL 기반 버전 선택 (`/light`, `/main`)
- 사용자 설정 저장 (localStorage)
- 개발 모드에서 쉬운 전환

### B. 공통 모듈 추출 전략
- 비즈니스 로직 완전 분리
- UI 독립적 상태 관리
- 타입 정의 통합 관리

### C. 개발 워크플로우
- 버전별 독립 개발 가능
- 공통 모듈 변경 시 양 버전 동시 테스트
- 점진적 마이그레이션 지원

## 출력 요구사항
1. 완전한 프로젝트 구조 설계도
2. 파일별 역할 및 책임 정의
3. 버전 간 의존성 규칙
4. 개발 워크플로우 가이드
5. 마이그레이션 체크리스트
```

### ✅ 완료 기준
- [ ] 최적화된 프로젝트 구조 설계 완료
- [ ] 버전 간 의존성 규칙 정의
- [ ] 개발 워크플로우 가이드 작성
- [ ] 마이그레이션 체크리스트 완성

---

## 🎯 Phase 0 완료 체크리스트

### 필수 완료사항
- [ ] **기존 코드베이스 분석**: Light Version 구조 완전 파악
- [ ] **기술 스택 검증**: 새로운 스택 호환성 확인
- [ ] **프로젝트 구조 설계**: Main Version 최적 구조 설계
- [ ] **공통 모듈 식별**: 재사용 가능한 모듈 목록 작성
- [ ] **마이그레이션 전략**: 단계별 마이그레이션 계획 수립

### 산출물
1. **분석 리포트**: 기존 코드베이스 상세 분석 결과
2. **호환성 리포트**: 기술 스택 호환성 검증 결과  
3. **아키텍처 문서**: 최적화된 프로젝트 구조 설계
4. **마이그레이션 가이드**: 단계별 이전 계획
5. **성능 벤치마크**: 기준점 성능 측정 결과

---

## 🚨 주의사항

1. **기존 시스템 보존**: Light Version의 정상 동작을 절대 방해하지 말 것
2. **점진적 접근**: 한 번에 모든 것을 바꾸려 하지 말고 단계적으로 진행
3. **성능 모니터링**: 각 변경사항이 성능에 미치는 영향을 지속적으로 측정
4. **백업 필수**: 주요 변경 전에는 반드시 현재 상태를 백업

---

## 🔄 다음 단계

Phase 0 완료 후 [Phase 1: 기반 환경 구축](./phase-1-foundation.md)로 진행합니다.

**Phase 1 미리보기:**
- shadcn/ui 환경 구축
- 기본 컴포넌트 데모 개발
- 디자인 시스템 검증