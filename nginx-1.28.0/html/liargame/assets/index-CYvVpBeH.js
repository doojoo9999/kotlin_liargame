var bE=Object.defineProperty;var yE=(o,a,s)=>a in o?bE(o,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[a]=s;var Oe=(o,a,s)=>yE(o,typeof a!="symbol"?a+"":a,s);import{j as l,P as Ve,c as Qi,a as ly,u as Ut,B as vE,b as Dl,d as Mr,e as Ge,f as An,R as xE,g as cy,h as Zn,i as SE,S as NE,k as uy,l as EE,I as wE,m as Wf,n as Xl,o as dy,p as fy,q as TE,C as my,r as hy,s as py,t as gy,v as by,L as yy,w as vy,x as jE,T as RE,O as xy,y as CE,z as Sy,A as _E,D as Ny,E as Ey,F as AE,G as OE,H as wy,J as DE,K as ME,M as IE,N as kE,Q as LE,U as UE,V as GE,W as HE,X as zE,Y as PE,Z as Ty,_ as jy,$ as Ry}from"./ui-vendor-DIIg0gEZ.js";import{R as ie,b as VE,r as x,a as Zf,u as Jf,d as Ir,L as Ml,O as Cy,N as _y,e as Ay,f as BE,g as qE,h as YE}from"./router-Dd9xouSq.js";import{r as $E,a as FE,g as XE}from"./react-vendor-gH-7aFTg.js";import{Q as QE,a as Oy}from"./query-D1cgLYzc.js";import{c as Dy,t as KE}from"./utils-BJeS7sC5.js";import{X as My,S as WE,M as ZE,H as Pi,U as Il,L as Iy,A as JE,C as ew,a as Ql,b as tw,B as kl,P as Vi,c as nw,T as aw,d as ky,e as sw,F as Ll,f as Jn,R as Qa,g as Ly,h as Uy,i as rw,j as iw,k as Os,l as As,m as em,E as Gy,V as o0,n as Ul,o as Af,p as Hy,q as ow,r as Gl,s as Ds,t as zy,u as lw,v as Bi,w as Py,x as cw,y as uw,z as dw,D as fw,I as mw,K as hw,G as pw,Z as gw,W as bw,J as tm,N as yw,O as vw,Q as xw,Y as l0,_ as Vy,$ as Sw,a0 as Nw,a1 as Ew}from"./icons-DF7HGvKF.js";import{m as _t,A as nm}from"./animation-CRP82ASw.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function s(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=s(c);fetch(c.href,d)}})();var md={exports:{}},Mi={},hd={exports:{}},pd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function ww(){return c0||(c0=1,(function(o){function a(M,H){var ee=M.length;M.push(H);e:for(;0<ee;){var ue=ee-1>>>1,pe=M[ue];if(0<c(pe,H))M[ue]=H,M[ee]=pe,ee=ue;else break e}}function s(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var H=M[0],ee=M.pop();if(ee!==H){M[0]=ee;e:for(var ue=0,pe=M.length,k=pe>>>1;ue<k;){var C=2*(ue+1)-1,P=M[C],W=C+1,ne=M[W];if(0>c(P,ee))W<pe&&0>c(ne,P)?(M[ue]=ne,M[W]=ee,ue=W):(M[ue]=P,M[C]=ee,ue=C);else if(W<pe&&0>c(ne,ee))M[ue]=ne,M[W]=ee,ue=W;else break e}}return H}function c(M,H){var ee=M.sortIndex-H.sortIndex;return ee!==0?ee:M.id-H.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;o.unstable_now=function(){return d.now()}}else{var m=Date,h=m.now();o.unstable_now=function(){return m.now()-h}}var p=[],g=[],y=1,b=null,N=3,E=!1,j=!1,S=!1,_=!1,L=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function A(M){for(var H=s(g);H!==null;){if(H.callback===null)i(g);else if(H.startTime<=M)i(g),H.sortIndex=H.expirationTime,a(p,H);else break;H=s(g)}}function D(M){if(S=!1,A(M),!j)if(s(p)!==null)j=!0,Y||(Y=!0,le());else{var H=s(g);H!==null&&oe(D,H.startTime-M)}}var Y=!1,z=-1,I=5,G=-1;function Q(){return _?!0:!(o.unstable_now()-G<I)}function ae(){if(_=!1,Y){var M=o.unstable_now();G=M;var H=!0;try{e:{j=!1,S&&(S=!1,R(z),z=-1),E=!0;var ee=N;try{t:{for(A(M),b=s(p);b!==null&&!(b.expirationTime>M&&Q());){var ue=b.callback;if(typeof ue=="function"){b.callback=null,N=b.priorityLevel;var pe=ue(b.expirationTime<=M);if(M=o.unstable_now(),typeof pe=="function"){b.callback=pe,A(M),H=!0;break t}b===s(p)&&i(p),A(M)}else i(p);b=s(p)}if(b!==null)H=!0;else{var k=s(g);k!==null&&oe(D,k.startTime-M),H=!1}}break e}finally{b=null,N=ee,E=!1}H=void 0}}finally{H?le():Y=!1}}}var le;if(typeof T=="function")le=function(){T(ae)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,se=K.port2;K.port1.onmessage=ae,le=function(){se.postMessage(null)}}else le=function(){L(ae,0)};function oe(M,H){z=L(function(){M(o.unstable_now())},H)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(M){M.callback=null},o.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<M?Math.floor(1e3/M):5},o.unstable_getCurrentPriorityLevel=function(){return N},o.unstable_next=function(M){switch(N){case 1:case 2:case 3:var H=3;break;default:H=N}var ee=N;N=H;try{return M()}finally{N=ee}},o.unstable_requestPaint=function(){_=!0},o.unstable_runWithPriority=function(M,H){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ee=N;N=M;try{return H()}finally{N=ee}},o.unstable_scheduleCallback=function(M,H,ee){var ue=o.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ue+ee:ue):ee=ue,M){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ee+pe,M={id:y++,callback:H,priorityLevel:M,startTime:ee,expirationTime:pe,sortIndex:-1},ee>ue?(M.sortIndex=ee,a(g,M),s(p)===null&&M===s(g)&&(S?(R(z),z=-1):S=!0,oe(D,ee-ue))):(M.sortIndex=pe,a(p,M),j||E||(j=!0,Y||(Y=!0,le()))),M},o.unstable_shouldYield=Q,o.unstable_wrapCallback=function(M){var H=N;return function(){var ee=N;N=H;try{return M.apply(this,arguments)}finally{N=ee}}}})(pd)),pd}var u0;function Tw(){return u0||(u0=1,hd.exports=ww()),hd.exports}var d0;function jw(){if(d0)return Mi;d0=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=Tw(),a=$E(),s=FE();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(d(e)!==e)throw Error(i(188))}function p(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var u=n.return;if(u===null)break;var f=u.alternate;if(f===null){if(r=u.return,r!==null){n=r;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===n)return h(u),e;if(f===r)return h(u),t;f=f.sibling}throw Error(i(188))}if(n.return!==r.return)n=u,r=f;else{for(var v=!1,w=u.child;w;){if(w===n){v=!0,n=u,r=f;break}if(w===r){v=!0,r=u,n=f;break}w=w.sibling}if(!v){for(w=f.child;w;){if(w===n){v=!0,n=f,r=u;break}if(w===r){v=!0,r=f,n=u;break}w=w.sibling}if(!v)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function le(e){return e===null||typeof e!="object"?null:(e=ae&&e[ae]||e["@@iterator"],typeof e=="function"?e:null)}var K=Symbol.for("react.client.reference");function se(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===K?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case j:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case Y:return"SuspenseList";case G:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case T:return(e.displayName||"Context")+".Provider";case R:return(e._context.displayName||"Context")+".Consumer";case A:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z:return t=e.displayName||null,t!==null?t:se(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return se(e(t))}catch{}}return null}var oe=Array.isArray,M=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ue=[],pe=-1;function k(e){return{current:e}}function C(e){0>pe||(e.current=ue[pe],ue[pe]=null,pe--)}function P(e,t){pe++,ue[pe]=e.current,e.current=t}var W=k(null),ne=k(null),de=k(null),re=k(null);function ce(e,t){switch(P(de,t),P(ne,e),P(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?kg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=kg(t),e=Lg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}C(W),P(W,e)}function xe(){C(W),C(ne),C(de)}function Ne(e){e.memoizedState!==null&&P(re,e);var t=W.current,n=Lg(t,e.type);t!==n&&(P(ne,e),P(W,n))}function Ce(e){ne.current===e&&(C(W),C(ne)),re.current===e&&(C(re),Ci._currentValue=ee)}var Me=Object.prototype.hasOwnProperty,nt=o.unstable_scheduleCallback,ht=o.unstable_cancelCallback,Vt=o.unstable_shouldYield,wt=o.unstable_requestPaint,Xe=o.unstable_now,Pn=o.unstable_getCurrentPriorityLevel,At=o.unstable_ImmediatePriority,tn=o.unstable_UserBlockingPriority,vn=o.unstable_NormalPriority,at=o.unstable_LowPriority,Bt=o.unstable_IdlePriority,Vn=o.log,Bn=o.unstable_setDisableYieldValue,Ot=null,pt=null;function ge(e){if(typeof Vn=="function"&&Bn(e),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(Ot,e)}catch{}}var X=Math.clz32?Math.clz32:Pe,je=Math.log,qe=Math.LN2;function Pe(e){return e>>>=0,e===0?32:31-(je(e)/qe|0)|0}var un=256,nn=4194304;function me(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ot(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var u=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var w=r&134217727;return w!==0?(r=w&~f,r!==0?u=me(r):(v&=w,v!==0?u=me(v):n||(n=w&~e,n!==0&&(u=me(n))))):(w=r&~f,w!==0?u=me(w):v!==0?u=me(v):n||(n=r&~e,n!==0&&(u=me(n)))),u===0?0:t!==0&&t!==u&&(t&f)===0&&(f=u&-u,n=t&-t,f>=n||f===32&&(n&4194048)!==0)?t:u}function Gt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Mn(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qt(){var e=un;return un<<=1,(un&4194048)===0&&(un=256),e}function Us(){var e=nn;return nn<<=1,(nn&62914560)===0&&(nn=4194304),e}function ns(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Gs(e,t,n,r,u,f){var v=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var w=e.entanglements,O=e.expirationTimes,q=e.hiddenUpdates;for(n=v&~n;0<n;){var Z=31-X(n),te=1<<Z;w[Z]=0,O[Z]=-1;var $=q[Z];if($!==null)for(q[Z]=null,Z=0;Z<$.length;Z++){var F=$[Z];F!==null&&(F.lane&=-536870913)}n&=~te}r!==0&&Te(e,r,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~t))}function Te(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-X(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&4194090}function dt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-X(n),u=1<<r;u&t|e[r]&t&&(e[r]|=t),n&=~u}}function st(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Tt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function as(){var e=H.p;return e!==0?e:(e=window.event,e===void 0?32:t0(e.type))}function jt(e,t){var n=H.p;try{return H.p=e,t()}finally{H.p=n}}var yt=Math.random().toString(36).slice(2),vt="__reactFiber$"+yt,rt="__reactProps$"+yt,Dt="__reactContainer$"+yt,Hs="__reactEvents$"+yt,ta="__reactListeners$"+yt,Nm="__reactHandles$"+yt,Em="__reactResources$"+yt,Hr="__reactMarker$"+yt;function ic(e){delete e[vt],delete e[rt],delete e[Hs],delete e[ta],delete e[Nm]}function zs(e){var t=e[vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Dt]||n[vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=zg(e);e!==null;){if(n=e[vt])return n;e=zg(e)}return t}e=n,n=e.parentNode}return null}function Ps(e){if(e=e[vt]||e[Dt]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function zr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Vs(e){var t=e[Em];return t||(t=e[Em]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Mt(e){e[Hr]=!0}var wm=new Set,Tm={};function ss(e,t){Bs(e,t),Bs(e+"Capture",t)}function Bs(e,t){for(Tm[e]=t,e=0;e<t.length;e++)wm.add(t[e])}var cS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jm={},Rm={};function uS(e){return Me.call(Rm,e)?!0:Me.call(jm,e)?!1:cS.test(e)?Rm[e]=!0:(jm[e]=!0,!1)}function to(e,t,n){if(uS(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function no(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function na(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}var oc,Cm;function qs(e){if(oc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);oc=t&&t[1]||"",Cm=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oc+e+Cm}var lc=!1;function cc(e,t){if(!e||lc)return"";lc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(F){var $=F}Reflect.construct(e,[],te)}else{try{te.call()}catch(F){$=F}e.call(te.prototype)}}else{try{throw Error()}catch(F){$=F}(te=e())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(F){if(F&&$&&typeof F.stack=="string")return[F.stack,$.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=r.DetermineComponentFrameRoot(),v=f[0],w=f[1];if(v&&w){var O=v.split(`
`),q=w.split(`
`);for(u=r=0;r<O.length&&!O[r].includes("DetermineComponentFrameRoot");)r++;for(;u<q.length&&!q[u].includes("DetermineComponentFrameRoot");)u++;if(r===O.length||u===q.length)for(r=O.length-1,u=q.length-1;1<=r&&0<=u&&O[r]!==q[u];)u--;for(;1<=r&&0<=u;r--,u--)if(O[r]!==q[u]){if(r!==1||u!==1)do if(r--,u--,0>u||O[r]!==q[u]){var Z=`
`+O[r].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=r&&0<=u);break}}}finally{lc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?qs(n):""}function dS(e){switch(e.tag){case 26:case 27:case 5:return qs(e.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 15:return cc(e.type,!1);case 11:return cc(e.type.render,!1);case 1:return cc(e.type,!0);case 31:return qs("Activity");default:return""}}function _m(e){try{var t="";do t+=dS(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function xn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Am(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fS(e){var t=Am(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var u=n.get,f=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(v){r=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ao(e){e._valueTracker||(e._valueTracker=fS(e))}function Om(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Am(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function so(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var mS=/[\n"\\]/g;function Sn(e){return e.replace(mS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function uc(e,t,n,r,u,f,v,w){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+xn(t)):e.value!==""+xn(t)&&(e.value=""+xn(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?dc(e,v,xn(t)):n!=null?dc(e,v,xn(n)):r!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+xn(w):e.removeAttribute("name")}function Dm(e,t,n,r,u,f,v,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||n!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;n=n!=null?""+xn(n):"",t=t!=null?""+xn(t):n,w||t===e.value||(e.value=t),e.defaultValue=t}r=r??u,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=w?e.checked:!!r,e.defaultChecked=!!r,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function dc(e,t,n){t==="number"&&so(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ys(e,t,n,r){if(e=e.options,t){t={};for(var u=0;u<n.length;u++)t["$"+n[u]]=!0;for(n=0;n<e.length;n++)u=t.hasOwnProperty("$"+e[n].value),e[n].selected!==u&&(e[n].selected=u),u&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xn(n),t=null,u=0;u<e.length;u++){if(e[u].value===n){e[u].selected=!0,r&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Mm(e,t,n){if(t!=null&&(t=""+xn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+xn(n):""}function Im(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(oe(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n==null&&(n=""),t=n}n=xn(t),e.defaultValue=n,r=e.textContent,r===n&&r!==""&&r!==null&&(e.value=r)}function $s(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var hS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function km(e,t,n){var r=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,n):typeof n!="number"||n===0||hS.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Lm(e,t,n){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var u in t)r=t[u],t.hasOwnProperty(u)&&n[u]!==r&&km(e,u,r)}else for(var f in t)t.hasOwnProperty(f)&&km(e,f,t[f])}function fc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ro(e){return gS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var mc=null;function hc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fs=null,Xs=null;function Um(e){var t=Ps(e);if(t&&(e=t.stateNode)){var n=e[rt]||null;e:switch(e=t.stateNode,t.type){case"input":if(uc(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Sn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var u=r[rt]||null;if(!u)throw Error(i(90));uc(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Om(r)}break e;case"textarea":Mm(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ys(e,!!n.multiple,t,!1)}}}var pc=!1;function Gm(e,t,n){if(pc)return e(t,n);pc=!0;try{var r=e(t);return r}finally{if(pc=!1,(Fs!==null||Xs!==null)&&(Yo(),Fs&&(t=Fs,e=Xs,Xs=Fs=null,Um(t),e)))for(t=0;t<e.length;t++)Um(e[t])}}function Pr(e,t){var n=e.stateNode;if(n===null)return null;var r=n[rt]||null;if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(i(231,t,typeof n));return n}var aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gc=!1;if(aa)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){gc=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{gc=!1}var Na=null,bc=null,io=null;function Hm(){if(io)return io;var e,t=bc,n=t.length,r,u="value"in Na?Na.value:Na.textContent,f=u.length;for(e=0;e<n&&t[e]===u[e];e++);var v=n-e;for(r=1;r<=v&&t[n-r]===u[f-r];r++);return io=u.slice(e,1<r?1-r:void 0)}function oo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lo(){return!0}function zm(){return!1}function an(e){function t(n,r,u,f,v){this._reactName=n,this._targetInst=u,this.type=r,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(n=e[w],this[w]=n?n(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?lo:zm,this.isPropagationStopped=zm,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lo)},persist:function(){},isPersistent:lo}),t}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},co=an(rs),Br=y({},rs,{view:0,detail:0}),bS=an(Br),yc,vc,qr,uo=y({},Br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qr&&(qr&&e.type==="mousemove"?(yc=e.screenX-qr.screenX,vc=e.screenY-qr.screenY):vc=yc=0,qr=e),yc)},movementY:function(e){return"movementY"in e?e.movementY:vc}}),Pm=an(uo),yS=y({},uo,{dataTransfer:0}),vS=an(yS),xS=y({},Br,{relatedTarget:0}),xc=an(xS),SS=y({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),NS=an(SS),ES=y({},rs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wS=an(ES),TS=y({},rs,{data:0}),Vm=an(TS),jS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _S(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=CS[e])?!!t[e]:!1}function Sc(){return _S}var AS=y({},Br,{key:function(e){if(e.key){var t=jS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?RS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sc,charCode:function(e){return e.type==="keypress"?oo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),OS=an(AS),DS=y({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bm=an(DS),MS=y({},Br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sc}),IS=an(MS),kS=y({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),LS=an(kS),US=y({},uo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GS=an(US),HS=y({},rs,{newState:0,oldState:0}),zS=an(HS),PS=[9,13,27,32],Nc=aa&&"CompositionEvent"in window,Yr=null;aa&&"documentMode"in document&&(Yr=document.documentMode);var VS=aa&&"TextEvent"in window&&!Yr,qm=aa&&(!Nc||Yr&&8<Yr&&11>=Yr),Ym=" ",$m=!1;function Fm(e,t){switch(e){case"keyup":return PS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qs=!1;function BS(e,t){switch(e){case"compositionend":return Xm(t);case"keypress":return t.which!==32?null:($m=!0,Ym);case"textInput":return e=t.data,e===Ym&&$m?null:e;default:return null}}function qS(e,t){if(Qs)return e==="compositionend"||!Nc&&Fm(e,t)?(e=Hm(),io=bc=Na=null,Qs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qm&&t.locale!=="ko"?null:t.data;default:return null}}var YS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!YS[e.type]:t==="textarea"}function Km(e,t,n,r){Fs?Xs?Xs.push(r):Xs=[r]:Fs=r,t=Wo(t,"onChange"),0<t.length&&(n=new co("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $r=null,Fr=null;function $S(e){Ag(e,0)}function fo(e){var t=zr(e);if(Om(t))return e}function Wm(e,t){if(e==="change")return t}var Zm=!1;if(aa){var Ec;if(aa){var wc="oninput"in document;if(!wc){var Jm=document.createElement("div");Jm.setAttribute("oninput","return;"),wc=typeof Jm.oninput=="function"}Ec=wc}else Ec=!1;Zm=Ec&&(!document.documentMode||9<document.documentMode)}function eh(){$r&&($r.detachEvent("onpropertychange",th),Fr=$r=null)}function th(e){if(e.propertyName==="value"&&fo(Fr)){var t=[];Km(t,Fr,e,hc(e)),Gm($S,t)}}function FS(e,t,n){e==="focusin"?(eh(),$r=t,Fr=n,$r.attachEvent("onpropertychange",th)):e==="focusout"&&eh()}function XS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fo(Fr)}function QS(e,t){if(e==="click")return fo(t)}function KS(e,t){if(e==="input"||e==="change")return fo(t)}function WS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dn=typeof Object.is=="function"?Object.is:WS;function Xr(e,t){if(dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var u=n[r];if(!Me.call(t,u)||!dn(e[u],t[u]))return!1}return!0}function nh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ah(e,t){var n=nh(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nh(n)}}function sh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=so(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=so(e.document)}return t}function Tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ZS=aa&&"documentMode"in document&&11>=document.documentMode,Ks=null,jc=null,Qr=null,Rc=!1;function ih(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rc||Ks==null||Ks!==so(r)||(r=Ks,"selectionStart"in r&&Tc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qr&&Xr(Qr,r)||(Qr=r,r=Wo(jc,"onSelect"),0<r.length&&(t=new co("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ks)))}function is(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ws={animationend:is("Animation","AnimationEnd"),animationiteration:is("Animation","AnimationIteration"),animationstart:is("Animation","AnimationStart"),transitionrun:is("Transition","TransitionRun"),transitionstart:is("Transition","TransitionStart"),transitioncancel:is("Transition","TransitionCancel"),transitionend:is("Transition","TransitionEnd")},Cc={},oh={};aa&&(oh=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function os(e){if(Cc[e])return Cc[e];if(!Ws[e])return e;var t=Ws[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in oh)return Cc[e]=t[n];return e}var lh=os("animationend"),ch=os("animationiteration"),uh=os("animationstart"),JS=os("transitionrun"),eN=os("transitionstart"),tN=os("transitioncancel"),dh=os("transitionend"),fh=new Map,_c="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_c.push("scrollEnd");function In(e,t){fh.set(e,t),ss(t,[e])}var mh=new WeakMap;function Nn(e,t){if(typeof e=="object"&&e!==null){var n=mh.get(e);return n!==void 0?n:(t={value:e,source:t,stack:_m(t)},mh.set(e,t),t)}return{value:e,source:t,stack:_m(t)}}var En=[],Zs=0,Ac=0;function mo(){for(var e=Zs,t=Ac=Zs=0;t<e;){var n=En[t];En[t++]=null;var r=En[t];En[t++]=null;var u=En[t];En[t++]=null;var f=En[t];if(En[t++]=null,r!==null&&u!==null){var v=r.pending;v===null?u.next=u:(u.next=v.next,v.next=u),r.pending=u}f!==0&&hh(n,u,f)}}function ho(e,t,n,r){En[Zs++]=e,En[Zs++]=t,En[Zs++]=n,En[Zs++]=r,Ac|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Oc(e,t,n,r){return ho(e,t,n,r),po(e)}function Js(e,t){return ho(e,null,null,t),po(e)}function hh(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var u=!1,f=e.return;f!==null;)f.childLanes|=n,r=f.alternate,r!==null&&(r.childLanes|=n),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&t!==null&&(u=31-X(n),e=f.hiddenUpdates,r=e[u],r===null?e[u]=[t]:r.push(t),t.lane=n|536870912),f):null}function po(e){if(50<xi)throw xi=0,Uu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var er={};function nN(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(e,t,n,r){return new nN(e,t,n,r)}function Dc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sa(e,t){var n=e.alternate;return n===null?(n=fn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ph(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function go(e,t,n,r,u,f){var v=0;if(r=e,typeof e=="function")Dc(e)&&(v=1);else if(typeof e=="string")v=sE(e,n,W.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case G:return e=fn(31,n,t,u),e.elementType=G,e.lanes=f,e;case j:return ls(n.children,u,f,t);case S:v=8,u|=24;break;case _:return e=fn(12,n,t,u|2),e.elementType=_,e.lanes=f,e;case D:return e=fn(13,n,t,u),e.elementType=D,e.lanes=f,e;case Y:return e=fn(19,n,t,u),e.elementType=Y,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:case T:v=10;break e;case R:v=9;break e;case A:v=11;break e;case z:v=14;break e;case I:v=16,r=null;break e}v=29,n=Error(i(130,e===null?"null":typeof e,"")),r=null}return t=fn(v,n,t,u),t.elementType=e,t.type=r,t.lanes=f,t}function ls(e,t,n,r){return e=fn(7,e,r,t),e.lanes=n,e}function Mc(e,t,n){return e=fn(6,e,null,t),e.lanes=n,e}function Ic(e,t,n){return t=fn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var tr=[],nr=0,bo=null,yo=0,wn=[],Tn=0,cs=null,ra=1,ia="";function us(e,t){tr[nr++]=yo,tr[nr++]=bo,bo=e,yo=t}function gh(e,t,n){wn[Tn++]=ra,wn[Tn++]=ia,wn[Tn++]=cs,cs=e;var r=ra;e=ia;var u=32-X(r)-1;r&=~(1<<u),n+=1;var f=32-X(t)+u;if(30<f){var v=u-u%5;f=(r&(1<<v)-1).toString(32),r>>=v,u-=v,ra=1<<32-X(t)+u|n<<u|r,ia=f+e}else ra=1<<f|n<<u|r,ia=e}function kc(e){e.return!==null&&(us(e,1),gh(e,1,0))}function Lc(e){for(;e===bo;)bo=tr[--nr],tr[nr]=null,yo=tr[--nr],tr[nr]=null;for(;e===cs;)cs=wn[--Tn],wn[Tn]=null,ia=wn[--Tn],wn[Tn]=null,ra=wn[--Tn],wn[Tn]=null}var Ft=null,gt=null,Ye=!1,ds=null,Yn=!1,Uc=Error(i(519));function fs(e){var t=Error(i(418,""));throw Zr(Nn(t,e)),Uc}function bh(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[vt]=e,t[rt]=r,n){case"dialog":Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":case"embed":Ue("load",t);break;case"video":case"audio":for(n=0;n<Ni.length;n++)Ue(Ni[n],t);break;case"source":Ue("error",t);break;case"img":case"image":case"link":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"input":Ue("invalid",t),Dm(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ao(t);break;case"select":Ue("invalid",t);break;case"textarea":Ue("invalid",t),Im(t,r.value,r.defaultValue,r.children),ao(t)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||r.suppressHydrationWarning===!0||Ig(t.textContent,n)?(r.popover!=null&&(Ue("beforetoggle",t),Ue("toggle",t)),r.onScroll!=null&&Ue("scroll",t),r.onScrollEnd!=null&&Ue("scrollend",t),r.onClick!=null&&(t.onclick=Zo),t=!0):t=!1,t||fs(e)}function yh(e){for(Ft=e.return;Ft;)switch(Ft.tag){case 5:case 13:Yn=!1;return;case 27:case 3:Yn=!0;return;default:Ft=Ft.return}}function Kr(e){if(e!==Ft)return!1;if(!Ye)return yh(e),Ye=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Ju(e.type,e.memoizedProps)),n=!n),n&&gt&&fs(e),yh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){gt=Ln(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}gt=null}}else t===27?(t=gt,Ga(e.type)?(e=ad,ad=null,gt=e):gt=t):gt=Ft?Ln(e.stateNode.nextSibling):null;return!0}function Wr(){gt=Ft=null,Ye=!1}function vh(){var e=ds;return e!==null&&(on===null?on=e:on.push.apply(on,e),ds=null),e}function Zr(e){ds===null?ds=[e]:ds.push(e)}var Gc=k(null),ms=null,oa=null;function Ea(e,t,n){P(Gc,t._currentValue),t._currentValue=n}function la(e){e._currentValue=Gc.current,C(Gc)}function Hc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function zc(e,t,n,r){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var v=u.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=u;for(var O=0;O<t.length;O++)if(w.context===t[O]){f.lanes|=n,w=f.alternate,w!==null&&(w.lanes|=n),Hc(f.return,n,e),r||(v=null);break e}f=w.next}}else if(u.tag===18){if(v=u.return,v===null)throw Error(i(341));v.lanes|=n,f=v.alternate,f!==null&&(f.lanes|=n),Hc(v,n,e),v=null}else v=u.child;if(v!==null)v.return=u;else for(v=u;v!==null;){if(v===e){v=null;break}if(u=v.sibling,u!==null){u.return=v.return,v=u;break}v=v.return}u=v}}function Jr(e,t,n,r){e=null;for(var u=t,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var v=u.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var w=u.type;dn(u.pendingProps.value,v.value)||(e!==null?e.push(w):e=[w])}}else if(u===re.current){if(v=u.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(Ci):e=[Ci])}u=u.return}e!==null&&zc(t,e,n,r),t.flags|=262144}function vo(e){for(e=e.firstContext;e!==null;){if(!dn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function hs(e){ms=e,oa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Yt(e){return xh(ms,e)}function xo(e,t){return ms===null&&hs(e),xh(e,t)}function xh(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},oa===null){if(e===null)throw Error(i(308));oa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else oa=oa.next=t;return n}var aN=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},sN=o.unstable_scheduleCallback,rN=o.unstable_NormalPriority,Rt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pc(){return{controller:new aN,data:new Map,refCount:0}}function ei(e){e.refCount--,e.refCount===0&&sN(rN,function(){e.controller.abort()})}var ti=null,Vc=0,ar=0,sr=null;function iN(e,t){if(ti===null){var n=ti=[];Vc=0,ar=qu(),sr={status:"pending",value:void 0,then:function(r){n.push(r)}}}return Vc++,t.then(Sh,Sh),t}function Sh(){if(--Vc===0&&ti!==null){sr!==null&&(sr.status="fulfilled");var e=ti;ti=null,ar=0,sr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function oN(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(u){n.push(u)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var u=0;u<n.length;u++)(0,n[u])(t)},function(u){for(r.status="rejected",r.reason=u,u=0;u<n.length;u++)(0,n[u])(void 0)}),r}var Nh=M.S;M.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&iN(e,t),Nh!==null&&Nh(e,t)};var ps=k(null);function Bc(){var e=ps.current;return e!==null?e:it.pooledCache}function So(e,t){t===null?P(ps,ps.current):P(ps,t.pool)}function Eh(){var e=Bc();return e===null?null:{parent:Rt._currentValue,pool:e}}var ni=Error(i(460)),wh=Error(i(474)),No=Error(i(542)),qc={then:function(){}};function Th(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Eo(){}function jh(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Eo,Eo),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ch(e),e;default:if(typeof t.status=="string")t.then(Eo,Eo);else{if(e=it,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=r}},function(r){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ch(e),e}throw ai=t,ni}}var ai=null;function Rh(){if(ai===null)throw Error(i(459));var e=ai;return ai=null,e}function Ch(e){if(e===ni||e===No)throw Error(i(483))}var wa=!1;function Yc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $c(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ta(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ja(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Qe&2)!==0){var u=r.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),r.pending=t,t=po(e),hh(e,null,n),t}return ho(e,r,t,n),po(e)}function si(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dt(e,n)}}function Fc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var u=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var v={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};f===null?u=f=v:f=f.next=v,n=n.next}while(n!==null);f===null?u=f=t:f=f.next=t}else u=f=t;n={baseState:r.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Xc=!1;function ri(){if(Xc){var e=sr;if(e!==null)throw e}}function ii(e,t,n,r){Xc=!1;var u=e.updateQueue;wa=!1;var f=u.firstBaseUpdate,v=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var O=w,q=O.next;O.next=null,v===null?f=q:v.next=q,v=O;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==v&&(w===null?Z.firstBaseUpdate=q:w.next=q,Z.lastBaseUpdate=O))}if(f!==null){var te=u.baseState;v=0,Z=q=O=null,w=f;do{var $=w.lane&-536870913,F=$!==w.lane;if(F?(ze&$)===$:(r&$)===$){$!==0&&$===ar&&(Xc=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var we=e,Se=w;$=t;var et=n;switch(Se.tag){case 1:if(we=Se.payload,typeof we=="function"){te=we.call(et,te,$);break e}te=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Se.payload,$=typeof we=="function"?we.call(et,te,$):we,$==null)break e;te=y({},te,$);break e;case 2:wa=!0}}$=w.callback,$!==null&&(e.flags|=64,F&&(e.flags|=8192),F=u.callbacks,F===null?u.callbacks=[$]:F.push($))}else F={lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(q=Z=F,O=te):Z=Z.next=F,v|=$;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;F=w,w=F.next,F.next=null,u.lastBaseUpdate=F,u.shared.pending=null}}while(!0);Z===null&&(O=te),u.baseState=O,u.firstBaseUpdate=q,u.lastBaseUpdate=Z,f===null&&(u.shared.lanes=0),Ia|=v,e.lanes=v,e.memoizedState=te}}function _h(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Ah(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)_h(n[e],t)}var rr=k(null),wo=k(0);function Oh(e,t){e=pa,P(wo,e),P(rr,t),pa=e|t.baseLanes}function Qc(){P(wo,pa),P(rr,rr.current)}function Kc(){pa=wo.current,C(rr),C(wo)}var Ra=0,Ie=null,Ze=null,Nt=null,To=!1,ir=!1,gs=!1,jo=0,oi=0,or=null,lN=0;function xt(){throw Error(i(321))}function Wc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!dn(e[n],t[n]))return!1;return!0}function Zc(e,t,n,r,u,f){return Ra=f,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=e===null||e.memoizedState===null?hp:pp,gs=!1,f=n(r,u),gs=!1,ir&&(f=Mh(t,n,r,u)),Dh(e),f}function Dh(e){M.H=Do;var t=Ze!==null&&Ze.next!==null;if(Ra=0,Nt=Ze=Ie=null,To=!1,oi=0,or=null,t)throw Error(i(300));e===null||It||(e=e.dependencies,e!==null&&vo(e)&&(It=!0))}function Mh(e,t,n,r){Ie=e;var u=0;do{if(ir&&(or=null),oi=0,ir=!1,25<=u)throw Error(i(301));if(u+=1,Nt=Ze=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}M.H=pN,f=t(n,r)}while(ir);return f}function cN(){var e=M.H,t=e.useState()[0];return t=typeof t.then=="function"?li(t):t,e=e.useState()[0],(Ze!==null?Ze.memoizedState:null)!==e&&(Ie.flags|=1024),t}function Jc(){var e=jo!==0;return jo=0,e}function eu(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function tu(e){if(To){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}To=!1}Ra=0,Nt=Ze=Ie=null,ir=!1,oi=jo=0,or=null}function sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ie.memoizedState=Nt=e:Nt=Nt.next=e,Nt}function Et(){if(Ze===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=Nt===null?Ie.memoizedState:Nt.next;if(t!==null)Nt=t,Ze=e;else{if(e===null)throw Ie.alternate===null?Error(i(467)):Error(i(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Nt===null?Ie.memoizedState=Nt=e:Nt=Nt.next=e}return Nt}function nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function li(e){var t=oi;return oi+=1,or===null&&(or=[]),e=jh(or,e,t),t=Ie,(Nt===null?t.memoizedState:Nt.next)===null&&(t=t.alternate,M.H=t===null||t.memoizedState===null?hp:pp),e}function Ro(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return li(e);if(e.$$typeof===T)return Yt(e)}throw Error(i(438,String(e)))}function au(e){var t=null,n=Ie.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=Ie.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=nu(),Ie.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=Q;return t.index++,n}function ca(e,t){return typeof t=="function"?t(e):t}function Co(e){var t=Et();return su(t,Ze,e)}function su(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var u=e.baseQueue,f=r.pending;if(f!==null){if(u!==null){var v=u.next;u.next=f.next,f.next=v}t.baseQueue=u=f,r.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{t=u.next;var w=v=null,O=null,q=t,Z=!1;do{var te=q.lane&-536870913;if(te!==q.lane?(ze&te)===te:(Ra&te)===te){var $=q.revertLane;if($===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),te===ar&&(Z=!0);else if((Ra&$)===$){q=q.next,$===ar&&(Z=!0);continue}else te={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},O===null?(w=O=te,v=f):O=O.next=te,Ie.lanes|=$,Ia|=$;te=q.action,gs&&n(f,te),f=q.hasEagerState?q.eagerState:n(f,te)}else $={lane:te,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},O===null?(w=O=$,v=f):O=O.next=$,Ie.lanes|=te,Ia|=te;q=q.next}while(q!==null&&q!==t);if(O===null?v=f:O.next=w,!dn(f,e.memoizedState)&&(It=!0,Z&&(n=sr,n!==null)))throw n;e.memoizedState=f,e.baseState=v,e.baseQueue=O,r.lastRenderedState=f}return u===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ru(e){var t=Et(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,u=n.pending,f=t.memoizedState;if(u!==null){n.pending=null;var v=u=u.next;do f=e(f,v.action),v=v.next;while(v!==u);dn(f,t.memoizedState)||(It=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,r]}function Ih(e,t,n){var r=Ie,u=Et(),f=Ye;if(f){if(n===void 0)throw Error(i(407));n=n()}else n=t();var v=!dn((Ze||u).memoizedState,n);v&&(u.memoizedState=n,It=!0),u=u.queue;var w=Uh.bind(null,r,u,e);if(ci(2048,8,w,[e]),u.getSnapshot!==t||v||Nt!==null&&Nt.memoizedState.tag&1){if(r.flags|=2048,lr(9,_o(),Lh.bind(null,r,u,n,t),null),it===null)throw Error(i(349));f||(Ra&124)!==0||kh(r,t,n)}return n}function kh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ie.updateQueue,t===null?(t=nu(),Ie.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Lh(e,t,n,r){t.value=n,t.getSnapshot=r,Gh(t)&&Hh(e)}function Uh(e,t,n){return n(function(){Gh(t)&&Hh(e)})}function Gh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!dn(e,n)}catch{return!0}}function Hh(e){var t=Js(e,2);t!==null&&bn(t,e,2)}function iu(e){var t=sn();if(typeof e=="function"){var n=e;if(e=n(),gs){ge(!0);try{n()}finally{ge(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e},t}function zh(e,t,n,r){return e.baseState=n,su(e,Ze,typeof r=="function"?r:ca)}function uN(e,t,n,r,u){if(Oo(e))throw Error(i(485));if(e=t.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};M.T!==null?n(!0):f.isTransition=!1,r(f),n=t.pending,n===null?(f.next=t.pending=f,Ph(t,f)):(f.next=n.next,t.pending=n.next=f)}}function Ph(e,t){var n=t.action,r=t.payload,u=e.state;if(t.isTransition){var f=M.T,v={};M.T=v;try{var w=n(u,r),O=M.S;O!==null&&O(v,w),Vh(e,t,w)}catch(q){ou(e,t,q)}finally{M.T=f}}else try{f=n(u,r),Vh(e,t,f)}catch(q){ou(e,t,q)}}function Vh(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){Bh(e,t,r)},function(r){return ou(e,t,r)}):Bh(e,t,n)}function Bh(e,t,n){t.status="fulfilled",t.value=n,qh(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ph(e,n)))}function ou(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=n,qh(t),t=t.next;while(t!==r)}e.action=null}function qh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Yh(e,t){return t}function $h(e,t){if(Ye){var n=it.formState;if(n!==null){e:{var r=Ie;if(Ye){if(gt){t:{for(var u=gt,f=Yn;u.nodeType!==8;){if(!f){u=null;break t}if(u=Ln(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){gt=Ln(u.nextSibling),r=u.data==="F!";break e}}fs(r)}r=!1}r&&(t=n[0])}}return n=sn(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yh,lastRenderedState:t},n.queue=r,n=dp.bind(null,Ie,r),r.dispatch=n,r=iu(!1),f=fu.bind(null,Ie,!1,r.queue),r=sn(),u={state:t,dispatch:null,action:e,pending:null},r.queue=u,n=uN.bind(null,Ie,u,f,n),u.dispatch=n,r.memoizedState=e,[t,n,!1]}function Fh(e){var t=Et();return Xh(t,Ze,e)}function Xh(e,t,n){if(t=su(e,t,Yh)[0],e=Co(ca)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=li(t)}catch(v){throw v===ni?No:v}else r=t;t=Et();var u=t.queue,f=u.dispatch;return n!==t.memoizedState&&(Ie.flags|=2048,lr(9,_o(),dN.bind(null,u,n),null)),[r,f,e]}function dN(e,t){e.action=t}function Qh(e){var t=Et(),n=Ze;if(n!==null)return Xh(t,n,e);Et(),t=t.memoizedState,n=Et();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function lr(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=Ie.updateQueue,t===null&&(t=nu(),Ie.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function _o(){return{destroy:void 0,resource:void 0}}function Kh(){return Et().memoizedState}function Ao(e,t,n,r){var u=sn();r=r===void 0?null:r,Ie.flags|=e,u.memoizedState=lr(1|t,_o(),n,r)}function ci(e,t,n,r){var u=Et();r=r===void 0?null:r;var f=u.memoizedState.inst;Ze!==null&&r!==null&&Wc(r,Ze.memoizedState.deps)?u.memoizedState=lr(t,f,n,r):(Ie.flags|=e,u.memoizedState=lr(1|t,f,n,r))}function Wh(e,t){Ao(8390656,8,e,t)}function Zh(e,t){ci(2048,8,e,t)}function Jh(e,t){return ci(4,2,e,t)}function ep(e,t){return ci(4,4,e,t)}function tp(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function np(e,t,n){n=n!=null?n.concat([e]):null,ci(4,4,tp.bind(null,t,e),n)}function lu(){}function ap(e,t){var n=Et();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&Wc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function sp(e,t){var n=Et();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&Wc(t,r[1]))return r[0];if(r=e(),gs){ge(!0);try{e()}finally{ge(!1)}}return n.memoizedState=[r,t],r}function cu(e,t,n){return n===void 0||(Ra&1073741824)!==0?e.memoizedState=t:(e.memoizedState=n,e=og(),Ie.lanes|=e,Ia|=e,n)}function rp(e,t,n,r){return dn(n,t)?n:rr.current!==null?(e=cu(e,n,r),dn(e,t)||(It=!0),e):(Ra&42)===0?(It=!0,e.memoizedState=n):(e=og(),Ie.lanes|=e,Ia|=e,t)}function ip(e,t,n,r,u){var f=H.p;H.p=f!==0&&8>f?f:8;var v=M.T,w={};M.T=w,fu(e,!1,t,n);try{var O=u(),q=M.S;if(q!==null&&q(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Z=oN(O,r);ui(e,t,Z,gn(e))}else ui(e,t,r,gn(e))}catch(te){ui(e,t,{then:function(){},status:"rejected",reason:te},gn())}finally{H.p=f,M.T=v}}function fN(){}function uu(e,t,n,r){if(e.tag!==5)throw Error(i(476));var u=op(e).queue;ip(e,u,t,ee,n===null?fN:function(){return lp(e),n(r)})}function op(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:ee},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function lp(e){var t=op(e).next.queue;ui(e,t,{},gn())}function du(){return Yt(Ci)}function cp(){return Et().memoizedState}function up(){return Et().memoizedState}function mN(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=gn();e=Ta(n);var r=ja(t,e,n);r!==null&&(bn(r,t,n),si(r,t,n)),t={cache:Pc()},e.payload=t;return}t=t.return}}function hN(e,t,n){var r=gn();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Oo(e)?fp(t,n):(n=Oc(e,t,n,r),n!==null&&(bn(n,e,r),mp(n,t,r)))}function dp(e,t,n){var r=gn();ui(e,t,n,r)}function ui(e,t,n,r){var u={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Oo(e))fp(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,w=f(v,n);if(u.hasEagerState=!0,u.eagerState=w,dn(w,v))return ho(e,t,u,0),it===null&&mo(),!1}catch{}finally{}if(n=Oc(e,t,u,r),n!==null)return bn(n,e,r),mp(n,t,r),!0}return!1}function fu(e,t,n,r){if(r={lane:2,revertLane:qu(),action:r,hasEagerState:!1,eagerState:null,next:null},Oo(e)){if(t)throw Error(i(479))}else t=Oc(e,n,r,2),t!==null&&bn(t,e,2)}function Oo(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function fp(e,t){ir=To=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mp(e,t,n){if((n&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dt(e,n)}}var Do={readContext:Yt,use:Ro,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt},hp={readContext:Yt,use:Ro,useCallback:function(e,t){return sn().memoizedState=[e,t===void 0?null:t],e},useContext:Yt,useEffect:Wh,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ao(4194308,4,tp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ao(4194308,4,e,t)},useInsertionEffect:function(e,t){Ao(4,2,e,t)},useMemo:function(e,t){var n=sn();t=t===void 0?null:t;var r=e();if(gs){ge(!0);try{e()}finally{ge(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=sn();if(n!==void 0){var u=n(t);if(gs){ge(!0);try{n(t)}finally{ge(!1)}}}else u=t;return r.memoizedState=r.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},r.queue=e,e=e.dispatch=hN.bind(null,Ie,e),[r.memoizedState,e]},useRef:function(e){var t=sn();return e={current:e},t.memoizedState=e},useState:function(e){e=iu(e);var t=e.queue,n=dp.bind(null,Ie,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:lu,useDeferredValue:function(e,t){var n=sn();return cu(n,e,t)},useTransition:function(){var e=iu(!1);return e=ip.bind(null,Ie,e.queue,!0,!1),sn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Ie,u=sn();if(Ye){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),it===null)throw Error(i(349));(ze&124)!==0||kh(r,t,n)}u.memoizedState=n;var f={value:n,getSnapshot:t};return u.queue=f,Wh(Uh.bind(null,r,f,e),[e]),r.flags|=2048,lr(9,_o(),Lh.bind(null,r,f,n,t),null),n},useId:function(){var e=sn(),t=it.identifierPrefix;if(Ye){var n=ia,r=ra;n=(r&~(1<<32-X(r)-1)).toString(32)+n,t=""+t+"R"+n,n=jo++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=lN++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:du,useFormState:$h,useActionState:$h,useOptimistic:function(e){var t=sn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=fu.bind(null,Ie,!0,n),n.dispatch=t,[e,t]},useMemoCache:au,useCacheRefresh:function(){return sn().memoizedState=mN.bind(null,Ie)}},pp={readContext:Yt,use:Ro,useCallback:ap,useContext:Yt,useEffect:Zh,useImperativeHandle:np,useInsertionEffect:Jh,useLayoutEffect:ep,useMemo:sp,useReducer:Co,useRef:Kh,useState:function(){return Co(ca)},useDebugValue:lu,useDeferredValue:function(e,t){var n=Et();return rp(n,Ze.memoizedState,e,t)},useTransition:function(){var e=Co(ca)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:li(e),t]},useSyncExternalStore:Ih,useId:cp,useHostTransitionStatus:du,useFormState:Fh,useActionState:Fh,useOptimistic:function(e,t){var n=Et();return zh(n,Ze,e,t)},useMemoCache:au,useCacheRefresh:up},pN={readContext:Yt,use:Ro,useCallback:ap,useContext:Yt,useEffect:Zh,useImperativeHandle:np,useInsertionEffect:Jh,useLayoutEffect:ep,useMemo:sp,useReducer:ru,useRef:Kh,useState:function(){return ru(ca)},useDebugValue:lu,useDeferredValue:function(e,t){var n=Et();return Ze===null?cu(n,e,t):rp(n,Ze.memoizedState,e,t)},useTransition:function(){var e=ru(ca)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:li(e),t]},useSyncExternalStore:Ih,useId:cp,useHostTransitionStatus:du,useFormState:Qh,useActionState:Qh,useOptimistic:function(e,t){var n=Et();return Ze!==null?zh(n,Ze,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:au,useCacheRefresh:up},cr=null,di=0;function Mo(e){var t=di;return di+=1,cr===null&&(cr=[]),jh(cr,e,t)}function fi(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Io(e,t){throw t.$$typeof===b?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function gp(e){var t=e._init;return t(e._payload)}function bp(e){function t(V,U){if(e){var B=V.deletions;B===null?(V.deletions=[U],V.flags|=16):B.push(U)}}function n(V,U){if(!e)return null;for(;U!==null;)t(V,U),U=U.sibling;return null}function r(V){for(var U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function u(V,U){return V=sa(V,U),V.index=0,V.sibling=null,V}function f(V,U,B){return V.index=B,e?(B=V.alternate,B!==null?(B=B.index,B<U?(V.flags|=67108866,U):B):(V.flags|=67108866,U)):(V.flags|=1048576,U)}function v(V){return e&&V.alternate===null&&(V.flags|=67108866),V}function w(V,U,B,J){return U===null||U.tag!==6?(U=Mc(B,V.mode,J),U.return=V,U):(U=u(U,B),U.return=V,U)}function O(V,U,B,J){var fe=B.type;return fe===j?Z(V,U,B.props.children,J,B.key):U!==null&&(U.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===I&&gp(fe)===U.type)?(U=u(U,B.props),fi(U,B),U.return=V,U):(U=go(B.type,B.key,B.props,null,V.mode,J),fi(U,B),U.return=V,U)}function q(V,U,B,J){return U===null||U.tag!==4||U.stateNode.containerInfo!==B.containerInfo||U.stateNode.implementation!==B.implementation?(U=Ic(B,V.mode,J),U.return=V,U):(U=u(U,B.children||[]),U.return=V,U)}function Z(V,U,B,J,fe){return U===null||U.tag!==7?(U=ls(B,V.mode,J,fe),U.return=V,U):(U=u(U,B),U.return=V,U)}function te(V,U,B){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Mc(""+U,V.mode,B),U.return=V,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case N:return B=go(U.type,U.key,U.props,null,V.mode,B),fi(B,U),B.return=V,B;case E:return U=Ic(U,V.mode,B),U.return=V,U;case I:var J=U._init;return U=J(U._payload),te(V,U,B)}if(oe(U)||le(U))return U=ls(U,V.mode,B,null),U.return=V,U;if(typeof U.then=="function")return te(V,Mo(U),B);if(U.$$typeof===T)return te(V,xo(V,U),B);Io(V,U)}return null}function $(V,U,B,J){var fe=U!==null?U.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return fe!==null?null:w(V,U,""+B,J);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case N:return B.key===fe?O(V,U,B,J):null;case E:return B.key===fe?q(V,U,B,J):null;case I:return fe=B._init,B=fe(B._payload),$(V,U,B,J)}if(oe(B)||le(B))return fe!==null?null:Z(V,U,B,J,null);if(typeof B.then=="function")return $(V,U,Mo(B),J);if(B.$$typeof===T)return $(V,U,xo(V,B),J);Io(V,B)}return null}function F(V,U,B,J,fe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return V=V.get(B)||null,w(U,V,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case N:return V=V.get(J.key===null?B:J.key)||null,O(U,V,J,fe);case E:return V=V.get(J.key===null?B:J.key)||null,q(U,V,J,fe);case I:var ke=J._init;return J=ke(J._payload),F(V,U,B,J,fe)}if(oe(J)||le(J))return V=V.get(B)||null,Z(U,V,J,fe,null);if(typeof J.then=="function")return F(V,U,B,Mo(J),fe);if(J.$$typeof===T)return F(V,U,B,xo(U,J),fe);Io(U,J)}return null}function we(V,U,B,J){for(var fe=null,ke=null,be=U,Ee=U=0,Lt=null;be!==null&&Ee<B.length;Ee++){be.index>Ee?(Lt=be,be=null):Lt=be.sibling;var Be=$(V,be,B[Ee],J);if(Be===null){be===null&&(be=Lt);break}e&&be&&Be.alternate===null&&t(V,be),U=f(Be,U,Ee),ke===null?fe=Be:ke.sibling=Be,ke=Be,be=Lt}if(Ee===B.length)return n(V,be),Ye&&us(V,Ee),fe;if(be===null){for(;Ee<B.length;Ee++)be=te(V,B[Ee],J),be!==null&&(U=f(be,U,Ee),ke===null?fe=be:ke.sibling=be,ke=be);return Ye&&us(V,Ee),fe}for(be=r(be);Ee<B.length;Ee++)Lt=F(be,V,Ee,B[Ee],J),Lt!==null&&(e&&Lt.alternate!==null&&be.delete(Lt.key===null?Ee:Lt.key),U=f(Lt,U,Ee),ke===null?fe=Lt:ke.sibling=Lt,ke=Lt);return e&&be.forEach(function(Ba){return t(V,Ba)}),Ye&&us(V,Ee),fe}function Se(V,U,B,J){if(B==null)throw Error(i(151));for(var fe=null,ke=null,be=U,Ee=U=0,Lt=null,Be=B.next();be!==null&&!Be.done;Ee++,Be=B.next()){be.index>Ee?(Lt=be,be=null):Lt=be.sibling;var Ba=$(V,be,Be.value,J);if(Ba===null){be===null&&(be=Lt);break}e&&be&&Ba.alternate===null&&t(V,be),U=f(Ba,U,Ee),ke===null?fe=Ba:ke.sibling=Ba,ke=Ba,be=Lt}if(Be.done)return n(V,be),Ye&&us(V,Ee),fe;if(be===null){for(;!Be.done;Ee++,Be=B.next())Be=te(V,Be.value,J),Be!==null&&(U=f(Be,U,Ee),ke===null?fe=Be:ke.sibling=Be,ke=Be);return Ye&&us(V,Ee),fe}for(be=r(be);!Be.done;Ee++,Be=B.next())Be=F(be,V,Ee,Be.value,J),Be!==null&&(e&&Be.alternate!==null&&be.delete(Be.key===null?Ee:Be.key),U=f(Be,U,Ee),ke===null?fe=Be:ke.sibling=Be,ke=Be);return e&&be.forEach(function(gE){return t(V,gE)}),Ye&&us(V,Ee),fe}function et(V,U,B,J){if(typeof B=="object"&&B!==null&&B.type===j&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case N:e:{for(var fe=B.key;U!==null;){if(U.key===fe){if(fe=B.type,fe===j){if(U.tag===7){n(V,U.sibling),J=u(U,B.props.children),J.return=V,V=J;break e}}else if(U.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===I&&gp(fe)===U.type){n(V,U.sibling),J=u(U,B.props),fi(J,B),J.return=V,V=J;break e}n(V,U);break}else t(V,U);U=U.sibling}B.type===j?(J=ls(B.props.children,V.mode,J,B.key),J.return=V,V=J):(J=go(B.type,B.key,B.props,null,V.mode,J),fi(J,B),J.return=V,V=J)}return v(V);case E:e:{for(fe=B.key;U!==null;){if(U.key===fe)if(U.tag===4&&U.stateNode.containerInfo===B.containerInfo&&U.stateNode.implementation===B.implementation){n(V,U.sibling),J=u(U,B.children||[]),J.return=V,V=J;break e}else{n(V,U);break}else t(V,U);U=U.sibling}J=Ic(B,V.mode,J),J.return=V,V=J}return v(V);case I:return fe=B._init,B=fe(B._payload),et(V,U,B,J)}if(oe(B))return we(V,U,B,J);if(le(B)){if(fe=le(B),typeof fe!="function")throw Error(i(150));return B=fe.call(B),Se(V,U,B,J)}if(typeof B.then=="function")return et(V,U,Mo(B),J);if(B.$$typeof===T)return et(V,U,xo(V,B),J);Io(V,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,U!==null&&U.tag===6?(n(V,U.sibling),J=u(U,B),J.return=V,V=J):(n(V,U),J=Mc(B,V.mode,J),J.return=V,V=J),v(V)):n(V,U)}return function(V,U,B,J){try{di=0;var fe=et(V,U,B,J);return cr=null,fe}catch(be){if(be===ni||be===No)throw be;var ke=fn(29,be,null,V.mode);return ke.lanes=J,ke.return=V,ke}finally{}}}var ur=bp(!0),yp=bp(!1),jn=k(null),$n=null;function Ca(e){var t=e.alternate;P(Ct,Ct.current&1),P(jn,e),$n===null&&(t===null||rr.current!==null||t.memoizedState!==null)&&($n=e)}function vp(e){if(e.tag===22){if(P(Ct,Ct.current),P(jn,e),$n===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&($n=e)}}else _a()}function _a(){P(Ct,Ct.current),P(jn,jn.current)}function ua(e){C(jn),$n===e&&($n=null),C(Ct)}var Ct=k(0);function ko(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||nd(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function mu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:y({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var hu={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=gn(),u=Ta(r);u.payload=t,n!=null&&(u.callback=n),t=ja(e,u,r),t!==null&&(bn(t,e,r),si(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=gn(),u=Ta(r);u.tag=1,u.payload=t,n!=null&&(u.callback=n),t=ja(e,u,r),t!==null&&(bn(t,e,r),si(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gn(),r=Ta(n);r.tag=2,t!=null&&(r.callback=t),t=ja(e,r,n),t!==null&&(bn(t,e,n),si(t,e,n))}};function xp(e,t,n,r,u,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,f,v):t.prototype&&t.prototype.isPureReactComponent?!Xr(n,r)||!Xr(u,f):!0}function Sp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hu.enqueueReplaceState(t,t.state,null)}function bs(e,t){var n=t;if("ref"in t){n={};for(var r in t)r!=="ref"&&(n[r]=t[r])}if(e=e.defaultProps){n===t&&(n=y({},n));for(var u in e)n[u]===void 0&&(n[u]=e[u])}return n}var Lo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Np(e){Lo(e)}function Ep(e){console.error(e)}function wp(e){Lo(e)}function Uo(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Tp(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function pu(e,t,n){return n=Ta(n),n.tag=3,n.payload={element:null},n.callback=function(){Uo(e,t)},n}function jp(e){return e=Ta(e),e.tag=3,e}function Rp(e,t,n,r){var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var f=r.value;e.payload=function(){return u(f)},e.callback=function(){Tp(t,n,r)}}var v=n.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Tp(t,n,r),typeof u!="function"&&(ka===null?ka=new Set([this]):ka.add(this));var w=r.stack;this.componentDidCatch(r.value,{componentStack:w!==null?w:""})})}function gN(e,t,n,r,u){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=n.alternate,t!==null&&Jr(t,n,u,!0),n=jn.current,n!==null){switch(n.tag){case 13:return $n===null?Hu():n.alternate===null&&bt===0&&(bt=3),n.flags&=-257,n.flags|=65536,n.lanes=u,r===qc?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),Pu(e,r,u)),!1;case 22:return n.flags|=65536,r===qc?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),Pu(e,r,u)),!1}throw Error(i(435,n.tag))}return Pu(e,r,u),Hu(),!1}if(Ye)return t=jn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,r!==Uc&&(e=Error(i(422),{cause:r}),Zr(Nn(e,n)))):(r!==Uc&&(t=Error(i(423),{cause:r}),Zr(Nn(t,n))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,r=Nn(r,n),u=pu(e.stateNode,r,u),Fc(e,u),bt!==4&&(bt=2)),!1;var f=Error(i(520),{cause:r});if(f=Nn(f,n),vi===null?vi=[f]:vi.push(f),bt!==4&&(bt=2),t===null)return!0;r=Nn(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=u&-u,n.lanes|=e,e=pu(n.stateNode,r,e),Fc(n,e),!1;case 1:if(t=n.type,f=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ka===null||!ka.has(f))))return n.flags|=65536,u&=-u,n.lanes|=u,u=jp(u),Rp(u,e,n,r),Fc(n,u),!1}n=n.return}while(n!==null);return!1}var Cp=Error(i(461)),It=!1;function Ht(e,t,n,r){t.child=e===null?yp(t,null,n,r):ur(t,e.child,n,r)}function _p(e,t,n,r,u){n=n.render;var f=t.ref;if("ref"in r){var v={};for(var w in r)w!=="ref"&&(v[w]=r[w])}else v=r;return hs(t),r=Zc(e,t,n,v,f,u),w=Jc(),e!==null&&!It?(eu(e,t,u),da(e,t,u)):(Ye&&w&&kc(t),t.flags|=1,Ht(e,t,r,u),t.child)}function Ap(e,t,n,r,u){if(e===null){var f=n.type;return typeof f=="function"&&!Dc(f)&&f.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=f,Op(e,t,f,r,u)):(e=go(n.type,null,r,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!Eu(e,u)){var v=f.memoizedProps;if(n=n.compare,n=n!==null?n:Xr,n(v,r)&&e.ref===t.ref)return da(e,t,u)}return t.flags|=1,e=sa(f,r),e.ref=t.ref,e.return=t,t.child=e}function Op(e,t,n,r,u){if(e!==null){var f=e.memoizedProps;if(Xr(f,r)&&e.ref===t.ref)if(It=!1,t.pendingProps=r=f,Eu(e,u))(e.flags&131072)!==0&&(It=!0);else return t.lanes=e.lanes,da(e,t,u)}return gu(e,t,n,r,u)}function Dp(e,t,n){var r=t.pendingProps,u=r.children,f=e!==null?e.memoizedState:null;if(r.mode==="hidden"){if((t.flags&128)!==0){if(r=f!==null?f.baseLanes|n:n,e!==null){for(u=t.child=e.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;t.childLanes=f&~r}else t.childLanes=0,t.child=null;return Mp(e,t,r,n)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&So(t,f!==null?f.cachePool:null),f!==null?Oh(t,f):Qc(),vp(t);else return t.lanes=t.childLanes=536870912,Mp(e,t,f!==null?f.baseLanes|n:n,n)}else f!==null?(So(t,f.cachePool),Oh(t,f),_a(),t.memoizedState=null):(e!==null&&So(t,null),Qc(),_a());return Ht(e,t,u,n),t.child}function Mp(e,t,n,r){var u=Bc();return u=u===null?null:{parent:Rt._currentValue,pool:u},t.memoizedState={baseLanes:n,cachePool:u},e!==null&&So(t,null),Qc(),vp(t),e!==null&&Jr(e,t,r,!0),null}function Go(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function gu(e,t,n,r,u){return hs(t),n=Zc(e,t,n,r,void 0,u),r=Jc(),e!==null&&!It?(eu(e,t,u),da(e,t,u)):(Ye&&r&&kc(t),t.flags|=1,Ht(e,t,n,u),t.child)}function Ip(e,t,n,r,u,f){return hs(t),t.updateQueue=null,n=Mh(t,r,n,u),Dh(e),r=Jc(),e!==null&&!It?(eu(e,t,f),da(e,t,f)):(Ye&&r&&kc(t),t.flags|=1,Ht(e,t,n,f),t.child)}function kp(e,t,n,r,u){if(hs(t),t.stateNode===null){var f=er,v=n.contextType;typeof v=="object"&&v!==null&&(f=Yt(v)),f=new n(r,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=hu,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=r,f.state=t.memoizedState,f.refs={},Yc(t),v=n.contextType,f.context=typeof v=="object"&&v!==null?Yt(v):er,f.state=t.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(mu(t,n,v,r),f.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&hu.enqueueReplaceState(f,f.state,null),ii(t,r,f,u),ri(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){f=t.stateNode;var w=t.memoizedProps,O=bs(n,w);f.props=O;var q=f.context,Z=n.contextType;v=er,typeof Z=="object"&&Z!==null&&(v=Yt(Z));var te=n.getDerivedStateFromProps;Z=typeof te=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,Z||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||q!==v)&&Sp(t,f,r,v),wa=!1;var $=t.memoizedState;f.state=$,ii(t,r,f,u),ri(),q=t.memoizedState,w||$!==q||wa?(typeof te=="function"&&(mu(t,n,te,r),q=t.memoizedState),(O=wa||xp(t,n,O,r,$,q,v))?(Z||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=q),f.props=r,f.state=q,f.context=v,r=O):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{f=t.stateNode,$c(e,t),v=t.memoizedProps,Z=bs(n,v),f.props=Z,te=t.pendingProps,$=f.context,q=n.contextType,O=er,typeof q=="object"&&q!==null&&(O=Yt(q)),w=n.getDerivedStateFromProps,(q=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==te||$!==O)&&Sp(t,f,r,O),wa=!1,$=t.memoizedState,f.state=$,ii(t,r,f,u),ri();var F=t.memoizedState;v!==te||$!==F||wa||e!==null&&e.dependencies!==null&&vo(e.dependencies)?(typeof w=="function"&&(mu(t,n,w,r),F=t.memoizedState),(Z=wa||xp(t,n,Z,r,$,F,O)||e!==null&&e.dependencies!==null&&vo(e.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(r,F,O),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(r,F,O)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=F),f.props=r,f.state=F,f.context=O,r=Z):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),r=!1)}return f=r,Go(e,t),r=(t.flags&128)!==0,f||r?(f=t.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&r?(t.child=ur(t,e.child,null,u),t.child=ur(t,null,n,u)):Ht(e,t,n,u),t.memoizedState=f.state,e=t.child):e=da(e,t,u),e}function Lp(e,t,n,r){return Wr(),t.flags|=256,Ht(e,t,n,r),t.child}var bu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yu(e){return{baseLanes:e,cachePool:Eh()}}function vu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Rn),e}function Up(e,t,n){var r=t.pendingProps,u=!1,f=(t.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Ct.current&2)!==0),v&&(u=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ye){if(u?Ca(t):_a(),Ye){var w=gt,O;if(O=w){e:{for(O=w,w=Yn;O.nodeType!==8;){if(!w){w=null;break e}if(O=Ln(O.nextSibling),O===null){w=null;break e}}w=O}w!==null?(t.memoizedState={dehydrated:w,treeContext:cs!==null?{id:ra,overflow:ia}:null,retryLane:536870912,hydrationErrors:null},O=fn(18,null,null,0),O.stateNode=w,O.return=t,t.child=O,Ft=t,gt=null,O=!0):O=!1}O||fs(t)}if(w=t.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return nd(w)?t.lanes=32:t.lanes=536870912,null;ua(t)}return w=r.children,r=r.fallback,u?(_a(),u=t.mode,w=Ho({mode:"hidden",children:w},u),r=ls(r,u,n,null),w.return=t,r.return=t,w.sibling=r,t.child=w,u=t.child,u.memoizedState=yu(n),u.childLanes=vu(e,v,n),t.memoizedState=bu,r):(Ca(t),xu(t,w))}if(O=e.memoizedState,O!==null&&(w=O.dehydrated,w!==null)){if(f)t.flags&256?(Ca(t),t.flags&=-257,t=Su(e,t,n)):t.memoizedState!==null?(_a(),t.child=e.child,t.flags|=128,t=null):(_a(),u=r.fallback,w=t.mode,r=Ho({mode:"visible",children:r.children},w),u=ls(u,w,n,null),u.flags|=2,r.return=t,u.return=t,r.sibling=u,t.child=r,ur(t,e.child,null,n),r=t.child,r.memoizedState=yu(n),r.childLanes=vu(e,v,n),t.memoizedState=bu,t=u);else if(Ca(t),nd(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var q=v.dgst;v=q,r=Error(i(419)),r.stack="",r.digest=v,Zr({value:r,source:null,stack:null}),t=Su(e,t,n)}else if(It||Jr(e,t,n,!1),v=(n&e.childLanes)!==0,It||v){if(v=it,v!==null&&(r=n&-n,r=(r&42)!==0?1:st(r),r=(r&(v.suspendedLanes|n))!==0?0:r,r!==0&&r!==O.retryLane))throw O.retryLane=r,Js(e,r),bn(v,e,r),Cp;w.data==="$?"||Hu(),t=Su(e,t,n)}else w.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=O.treeContext,gt=Ln(w.nextSibling),Ft=t,Ye=!0,ds=null,Yn=!1,e!==null&&(wn[Tn++]=ra,wn[Tn++]=ia,wn[Tn++]=cs,ra=e.id,ia=e.overflow,cs=t),t=xu(t,r.children),t.flags|=4096);return t}return u?(_a(),u=r.fallback,w=t.mode,O=e.child,q=O.sibling,r=sa(O,{mode:"hidden",children:r.children}),r.subtreeFlags=O.subtreeFlags&65011712,q!==null?u=sa(q,u):(u=ls(u,w,n,null),u.flags|=2),u.return=t,r.return=t,r.sibling=u,t.child=r,r=u,u=t.child,w=e.child.memoizedState,w===null?w=yu(n):(O=w.cachePool,O!==null?(q=Rt._currentValue,O=O.parent!==q?{parent:q,pool:q}:O):O=Eh(),w={baseLanes:w.baseLanes|n,cachePool:O}),u.memoizedState=w,u.childLanes=vu(e,v,n),t.memoizedState=bu,r):(Ca(t),n=e.child,e=n.sibling,n=sa(n,{mode:"visible",children:r.children}),n.return=t,n.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=n,t.memoizedState=null,n)}function xu(e,t){return t=Ho({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ho(e,t){return e=fn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Su(e,t,n){return ur(t,e.child,null,n),e=xu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Gp(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Hc(e.return,t,n)}function Nu(e,t,n,r,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:u}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=r,f.tail=n,f.tailMode=u)}function Hp(e,t,n){var r=t.pendingProps,u=r.revealOrder,f=r.tail;if(Ht(e,t,r.children,n),r=Ct.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gp(e,n,t);else if(e.tag===19)Gp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(P(Ct,r),u){case"forwards":for(n=t.child,u=null;n!==null;)e=n.alternate,e!==null&&ko(e)===null&&(u=n),n=n.sibling;n=u,n===null?(u=t.child,t.child=null):(u=n.sibling,n.sibling=null),Nu(t,!1,u,n,f);break;case"backwards":for(n=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&ko(e)===null){t.child=u;break}e=u.sibling,u.sibling=n,n=u,u=e}Nu(t,!0,n,null,f);break;case"together":Nu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function da(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ia|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Jr(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=sa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=sa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Eu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&vo(e)))}function bN(e,t,n){switch(t.tag){case 3:ce(t,t.stateNode.containerInfo),Ea(t,Rt,e.memoizedState.cache),Wr();break;case 27:case 5:Ne(t);break;case 4:ce(t,t.stateNode.containerInfo);break;case 10:Ea(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Ca(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Up(e,t,n):(Ca(t),e=da(e,t,n),e!==null?e.sibling:null);Ca(t);break;case 19:var u=(e.flags&128)!==0;if(r=(n&t.childLanes)!==0,r||(Jr(e,t,n,!1),r=(n&t.childLanes)!==0),u){if(r)return Hp(e,t,n);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),P(Ct,Ct.current),r)break;return null;case 22:case 23:return t.lanes=0,Dp(e,t,n);case 24:Ea(t,Rt,e.memoizedState.cache)}return da(e,t,n)}function zp(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)It=!0;else{if(!Eu(e,n)&&(t.flags&128)===0)return It=!1,bN(e,t,n);It=(e.flags&131072)!==0}else It=!1,Ye&&(t.flags&1048576)!==0&&gh(t,yo,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,u=r._init;if(r=u(r._payload),t.type=r,typeof r=="function")Dc(r)?(e=bs(r,e),t.tag=1,t=kp(null,t,r,e,n)):(t.tag=0,t=gu(null,t,r,e,n));else{if(r!=null){if(u=r.$$typeof,u===A){t.tag=11,t=_p(null,t,r,e,n);break e}else if(u===z){t.tag=14,t=Ap(null,t,r,e,n);break e}}throw t=se(r)||r,Error(i(306,t,""))}}return t;case 0:return gu(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,u=bs(r,t.pendingProps),kp(e,t,r,u,n);case 3:e:{if(ce(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var f=t.memoizedState;u=f.element,$c(e,t),ii(t,r,null,n);var v=t.memoizedState;if(r=v.cache,Ea(t,Rt,r),r!==f.cache&&zc(t,[Rt],n,!0),ri(),r=v.element,f.isDehydrated)if(f={element:r,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=Lp(e,t,r,n);break e}else if(r!==u){u=Nn(Error(i(424)),t),Zr(u),t=Lp(e,t,r,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(gt=Ln(e.firstChild),Ft=t,Ye=!0,ds=null,Yn=!0,n=yp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Wr(),r===u){t=da(e,t,n);break e}Ht(e,t,r,n)}t=t.child}return t;case 26:return Go(e,t),e===null?(n=qg(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ye||(n=t.type,e=t.pendingProps,r=Jo(de.current).createElement(n),r[vt]=t,r[rt]=e,Pt(r,n,e),Mt(r),t.stateNode=r):t.memoizedState=qg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ne(t),e===null&&Ye&&(r=t.stateNode=Pg(t.type,t.pendingProps,de.current),Ft=t,Yn=!0,u=gt,Ga(t.type)?(ad=u,gt=Ln(r.firstChild)):gt=u),Ht(e,t,t.pendingProps.children,n),Go(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ye&&((u=r=gt)&&(r=YN(r,t.type,t.pendingProps,Yn),r!==null?(t.stateNode=r,Ft=t,gt=Ln(r.firstChild),Yn=!1,u=!0):u=!1),u||fs(t)),Ne(t),u=t.type,f=t.pendingProps,v=e!==null?e.memoizedProps:null,r=f.children,Ju(u,f)?r=null:v!==null&&Ju(u,v)&&(t.flags|=32),t.memoizedState!==null&&(u=Zc(e,t,cN,null,null,n),Ci._currentValue=u),Go(e,t),Ht(e,t,r,n),t.child;case 6:return e===null&&Ye&&((e=n=gt)&&(n=$N(n,t.pendingProps,Yn),n!==null?(t.stateNode=n,Ft=t,gt=null,e=!0):e=!1),e||fs(t)),null;case 13:return Up(e,t,n);case 4:return ce(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ur(t,null,r,n):Ht(e,t,r,n),t.child;case 11:return _p(e,t,t.type,t.pendingProps,n);case 7:return Ht(e,t,t.pendingProps,n),t.child;case 8:return Ht(e,t,t.pendingProps.children,n),t.child;case 12:return Ht(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ea(t,t.type,r.value),Ht(e,t,r.children,n),t.child;case 9:return u=t.type._context,r=t.pendingProps.children,hs(t),u=Yt(u),r=r(u),t.flags|=1,Ht(e,t,r,n),t.child;case 14:return Ap(e,t,t.type,t.pendingProps,n);case 15:return Op(e,t,t.type,t.pendingProps,n);case 19:return Hp(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},e===null?(n=Ho(r,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=sa(e.child,r),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Dp(e,t,n);case 24:return hs(t),r=Yt(Rt),e===null?(u=Bc(),u===null&&(u=it,f=Pc(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=n),u=f),t.memoizedState={parent:r,cache:u},Yc(t),Ea(t,Rt,u)):((e.lanes&n)!==0&&($c(e,t),ii(t,null,null,n),ri()),u=e.memoizedState,f=t.memoizedState,u.parent!==r?(u={parent:r,cache:r},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),Ea(t,Rt,r)):(r=f.cache,Ea(t,Rt,r),r!==u.cache&&zc(t,[Rt],n,!0))),Ht(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function fa(e){e.flags|=4}function Pp(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Qg(t)){if(t=jn.current,t!==null&&((ze&4194048)===ze?$n!==null:(ze&62914560)!==ze&&(ze&536870912)===0||t!==$n))throw ai=qc,wh;e.flags|=8192}}function zo(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Us():536870912,e.lanes|=t,hr|=t)}function mi(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var u=e.child;u!==null;)n|=u.lanes|u.childLanes,r|=u.subtreeFlags&65011712,r|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)n|=u.lanes|u.childLanes,r|=u.subtreeFlags,r|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function yN(e,t,n){var r=t.pendingProps;switch(Lc(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(t),null;case 1:return ft(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),la(Rt),xe(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Kr(t)?fa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,vh())),ft(t),null;case 26:return n=t.memoizedState,e===null?(fa(t),n!==null?(ft(t),Pp(t,n)):(ft(t),t.flags&=-16777217)):n?n!==e.memoizedState?(fa(t),ft(t),Pp(t,n)):(ft(t),t.flags&=-16777217):(e.memoizedProps!==r&&fa(t),ft(t),t.flags&=-16777217),null;case 27:Ce(t),n=de.current;var u=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==r&&fa(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return ft(t),null}e=W.current,Kr(t)?bh(t):(e=Pg(u,r,n),t.stateNode=e,fa(t))}return ft(t),null;case 5:if(Ce(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&fa(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return ft(t),null}if(e=W.current,Kr(t))bh(t);else{switch(u=Jo(de.current),e){case 1:e=u.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=u.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=u.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=u.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof r.is=="string"?u.createElement("select",{is:r.is}):u.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e=typeof r.is=="string"?u.createElement(n,{is:r.is}):u.createElement(n)}}e[vt]=t,e[rt]=r;e:for(u=t.child;u!==null;){if(u.tag===5||u.tag===6)e.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}t.stateNode=e;e:switch(Pt(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&fa(t)}}return ft(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&fa(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(i(166));if(e=de.current,Kr(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,u=Ft,u!==null)switch(u.tag){case 27:case 5:r=u.memoizedProps}e[vt]=t,e=!!(e.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||Ig(e.nodeValue,n)),e||fs(t)}else e=Jo(e).createTextNode(r),e[vt]=t,t.stateNode=e}return ft(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Kr(t),r!==null&&r.dehydrated!==null){if(e===null){if(!u)throw Error(i(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));u[vt]=t}else Wr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ft(t),u=!1}else u=vh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(ua(t),t):(ua(t),null)}if(ua(t),(t.flags&128)!==0)return t.lanes=n,t;if(n=r!==null,e=e!==null&&e.memoizedState!==null,n){r=t.child,u=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(u=r.alternate.memoizedState.cachePool.pool);var f=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==u&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),zo(t,t.updateQueue),ft(t),null;case 4:return xe(),e===null&&Xu(t.stateNode.containerInfo),ft(t),null;case 10:return la(t.type),ft(t),null;case 19:if(C(Ct),u=t.memoizedState,u===null)return ft(t),null;if(r=(t.flags&128)!==0,f=u.rendering,f===null)if(r)mi(u,!1);else{if(bt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=ko(e),f!==null){for(t.flags|=128,mi(u,!1),e=f.updateQueue,t.updateQueue=e,zo(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ph(n,e),n=n.sibling;return P(Ct,Ct.current&1|2),t.child}e=e.sibling}u.tail!==null&&Xe()>Bo&&(t.flags|=128,r=!0,mi(u,!1),t.lanes=4194304)}else{if(!r)if(e=ko(f),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,zo(t,e),mi(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!Ye)return ft(t),null}else 2*Xe()-u.renderingStartTime>Bo&&n!==536870912&&(t.flags|=128,r=!0,mi(u,!1),t.lanes=4194304);u.isBackwards?(f.sibling=t.child,t.child=f):(e=u.last,e!==null?e.sibling=f:t.child=f,u.last=f)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Xe(),t.sibling=null,e=Ct.current,P(Ct,r?e&1|2:e&1),t):(ft(t),null);case 22:case 23:return ua(t),Kc(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(n&536870912)!==0&&(t.flags&128)===0&&(ft(t),t.subtreeFlags&6&&(t.flags|=8192)):ft(t),n=t.updateQueue,n!==null&&zo(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&C(ps),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),la(Rt),ft(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function vN(e,t){switch(Lc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return la(Rt),xe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ce(t),null;case 13:if(ua(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Wr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return C(Ct),null;case 4:return xe(),null;case 10:return la(t.type),null;case 22:case 23:return ua(t),Kc(),e!==null&&C(ps),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return la(Rt),null;case 25:return null;default:return null}}function Vp(e,t){switch(Lc(t),t.tag){case 3:la(Rt),xe();break;case 26:case 27:case 5:Ce(t);break;case 4:xe();break;case 13:ua(t);break;case 19:C(Ct);break;case 10:la(t.type);break;case 22:case 23:ua(t),Kc(),e!==null&&C(ps);break;case 24:la(Rt)}}function hi(e,t){try{var n=t.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var u=r.next;n=u;do{if((n.tag&e)===e){r=void 0;var f=n.create,v=n.inst;r=f(),v.destroy=r}n=n.next}while(n!==u)}}catch(w){tt(t,t.return,w)}}function Aa(e,t,n){try{var r=t.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var f=u.next;r=f;do{if((r.tag&e)===e){var v=r.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,u=t;var O=n,q=w;try{q()}catch(Z){tt(u,O,Z)}}}r=r.next}while(r!==f)}}catch(Z){tt(t,t.return,Z)}}function Bp(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ah(t,n)}catch(r){tt(e,e.return,r)}}}function qp(e,t,n){n.props=bs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){tt(e,t,r)}}function pi(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(u){tt(e,t,u)}}function Fn(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(u){tt(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(u){tt(e,t,u)}else n.current=null}function Yp(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(u){tt(e,e.return,u)}}function wu(e,t,n){try{var r=e.stateNode;zN(r,e.type,n,t),r[rt]=t}catch(u){tt(e,e.return,u)}}function $p(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ga(e.type)||e.tag===4}function Tu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$p(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ga(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ju(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Zo));else if(r!==4&&(r===27&&Ga(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(ju(e,t,n),e=e.sibling;e!==null;)ju(e,t,n),e=e.sibling}function Po(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Ga(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Po(e,t,n),e=e.sibling;e!==null;)Po(e,t,n),e=e.sibling}function Fp(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);Pt(t,r,n),t[vt]=e,t[rt]=n}catch(f){tt(e,e.return,f)}}var ma=!1,St=!1,Ru=!1,Xp=typeof WeakSet=="function"?WeakSet:Set,kt=null;function xN(e,t){if(e=e.containerInfo,Wu=rl,e=rh(e),Tc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var u=r.anchorOffset,f=r.focusNode;r=r.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var v=0,w=-1,O=-1,q=0,Z=0,te=e,$=null;t:for(;;){for(var F;te!==n||u!==0&&te.nodeType!==3||(w=v+u),te!==f||r!==0&&te.nodeType!==3||(O=v+r),te.nodeType===3&&(v+=te.nodeValue.length),(F=te.firstChild)!==null;)$=te,te=F;for(;;){if(te===e)break t;if($===n&&++q===u&&(w=v),$===f&&++Z===r&&(O=v),(F=te.nextSibling)!==null)break;te=$,$=te.parentNode}te=F}n=w===-1||O===-1?null:{start:w,end:O}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zu={focusedElem:e,selectionRange:n},rl=!1,kt=t;kt!==null;)if(t=kt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,kt=e;else for(;kt!==null;){switch(t=kt,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,n=t,u=f.memoizedProps,f=f.memoizedState,r=n.stateNode;try{var we=bs(n.type,u,n.elementType===n.type);e=r.getSnapshotBeforeUpdate(we,f),r.__reactInternalSnapshotBeforeUpdate=e}catch(Se){tt(n,n.return,Se)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)td(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":td(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,kt=e;break}kt=t.return}}function Qp(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Oa(e,n),r&4&&hi(5,n);break;case 1:if(Oa(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(v){tt(n,n.return,v)}else{var u=bs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){tt(n,n.return,v)}}r&64&&Bp(n),r&512&&pi(n,n.return);break;case 3:if(Oa(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ah(e,t)}catch(v){tt(n,n.return,v)}}break;case 27:t===null&&r&4&&Fp(n);case 26:case 5:Oa(e,n),t===null&&r&4&&Yp(n),r&512&&pi(n,n.return);break;case 12:Oa(e,n);break;case 13:Oa(e,n),r&4&&Zp(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=_N.bind(null,n),FN(e,n))));break;case 22:if(r=n.memoizedState!==null||ma,!r){t=t!==null&&t.memoizedState!==null||St,u=ma;var f=St;ma=r,(St=t)&&!f?Da(e,n,(n.subtreeFlags&8772)!==0):Oa(e,n),ma=u,St=f}break;case 30:break;default:Oa(e,n)}}function Kp(e){var t=e.alternate;t!==null&&(e.alternate=null,Kp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ic(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var lt=null,rn=!1;function ha(e,t,n){for(n=n.child;n!==null;)Wp(e,t,n),n=n.sibling}function Wp(e,t,n){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(Ot,n)}catch{}switch(n.tag){case 26:St||Fn(n,t),ha(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:St||Fn(n,t);var r=lt,u=rn;Ga(n.type)&&(lt=n.stateNode,rn=!1),ha(e,t,n),wi(n.stateNode),lt=r,rn=u;break;case 5:St||Fn(n,t);case 6:if(r=lt,u=rn,lt=null,ha(e,t,n),lt=r,rn=u,lt!==null)if(rn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(n.stateNode)}catch(f){tt(n,t,f)}else try{lt.removeChild(n.stateNode)}catch(f){tt(n,t,f)}break;case 18:lt!==null&&(rn?(e=lt,Hg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Di(e)):Hg(lt,n.stateNode));break;case 4:r=lt,u=rn,lt=n.stateNode.containerInfo,rn=!0,ha(e,t,n),lt=r,rn=u;break;case 0:case 11:case 14:case 15:St||Aa(2,n,t),St||Aa(4,n,t),ha(e,t,n);break;case 1:St||(Fn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"&&qp(n,t,r)),ha(e,t,n);break;case 21:ha(e,t,n);break;case 22:St=(r=St)||n.memoizedState!==null,ha(e,t,n),St=r;break;default:ha(e,t,n)}}function Zp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Di(e)}catch(n){tt(t,t.return,n)}}function SN(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Xp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Xp),t;default:throw Error(i(435,e.tag))}}function Cu(e,t){var n=SN(e);t.forEach(function(r){var u=AN.bind(null,e,r);n.has(r)||(n.add(r),r.then(u,u))})}function mn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var u=n[r],f=e,v=t,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(Ga(w.type)){lt=w.stateNode,rn=!1;break e}break;case 5:lt=w.stateNode,rn=!1;break e;case 3:case 4:lt=w.stateNode.containerInfo,rn=!0;break e}w=w.return}if(lt===null)throw Error(i(160));Wp(f,v,u),lt=null,rn=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Jp(t,e),t=t.sibling}var kn=null;function Jp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:mn(t,e),hn(e),r&4&&(Aa(3,e,e.return),hi(3,e),Aa(5,e,e.return));break;case 1:mn(t,e),hn(e),r&512&&(St||n===null||Fn(n,n.return)),r&64&&ma&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var u=kn;if(mn(t,e),hn(e),r&512&&(St||n===null||Fn(n,n.return)),r&4){var f=n!==null?n.memoizedState:null;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){e:{r=e.type,n=e.memoizedProps,u=u.ownerDocument||u;t:switch(r){case"title":f=u.getElementsByTagName("title")[0],(!f||f[Hr]||f[vt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(r),u.head.insertBefore(f,u.querySelector("head > title"))),Pt(f,r,n),f[vt]=e,Mt(f),r=f;break e;case"link":var v=Fg("link","href",u).get(r+(n.href||""));if(v){for(var w=0;w<v.length;w++)if(f=v[w],f.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&f.getAttribute("rel")===(n.rel==null?null:n.rel)&&f.getAttribute("title")===(n.title==null?null:n.title)&&f.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){v.splice(w,1);break t}}f=u.createElement(r),Pt(f,r,n),u.head.appendChild(f);break;case"meta":if(v=Fg("meta","content",u).get(r+(n.content||""))){for(w=0;w<v.length;w++)if(f=v[w],f.getAttribute("content")===(n.content==null?null:""+n.content)&&f.getAttribute("name")===(n.name==null?null:n.name)&&f.getAttribute("property")===(n.property==null?null:n.property)&&f.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&f.getAttribute("charset")===(n.charSet==null?null:n.charSet)){v.splice(w,1);break t}}f=u.createElement(r),Pt(f,r,n),u.head.appendChild(f);break;default:throw Error(i(468,r))}f[vt]=e,Mt(f),r=f}e.stateNode=r}else Xg(u,e.type,e.stateNode);else e.stateNode=$g(u,r,e.memoizedProps);else f!==r?(f===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):f.count--,r===null?Xg(u,e.type,e.stateNode):$g(u,r,e.memoizedProps)):r===null&&e.stateNode!==null&&wu(e,e.memoizedProps,n.memoizedProps)}break;case 27:mn(t,e),hn(e),r&512&&(St||n===null||Fn(n,n.return)),n!==null&&r&4&&wu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(mn(t,e),hn(e),r&512&&(St||n===null||Fn(n,n.return)),e.flags&32){u=e.stateNode;try{$s(u,"")}catch(F){tt(e,e.return,F)}}r&4&&e.stateNode!=null&&(u=e.memoizedProps,wu(e,u,n!==null?n.memoizedProps:u)),r&1024&&(Ru=!0);break;case 6:if(mn(t,e),hn(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(F){tt(e,e.return,F)}}break;case 3:if(nl=null,u=kn,kn=el(t.containerInfo),mn(t,e),kn=u,hn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Di(t.containerInfo)}catch(F){tt(e,e.return,F)}Ru&&(Ru=!1,eg(e));break;case 4:r=kn,kn=el(e.stateNode.containerInfo),mn(t,e),hn(e),kn=r;break;case 12:mn(t,e),hn(e);break;case 13:mn(t,e),hn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Iu=Xe()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Cu(e,r)));break;case 22:u=e.memoizedState!==null;var O=n!==null&&n.memoizedState!==null,q=ma,Z=St;if(ma=q||u,St=Z||O,mn(t,e),St=Z,ma=q,hn(e),r&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(n===null||O||ma||St||ys(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){O=n=t;try{if(f=O.stateNode,u)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=O.stateNode;var te=O.memoizedProps.style,$=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(F){tt(O,O.return,F)}}}else if(t.tag===6){if(n===null){O=t;try{O.stateNode.nodeValue=u?"":O.memoizedProps}catch(F){tt(O,O.return,F)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Cu(e,n))));break;case 19:mn(t,e),hn(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Cu(e,r)));break;case 30:break;case 21:break;default:mn(t,e),hn(e)}}function hn(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if($p(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var u=n.stateNode,f=Tu(e);Po(e,f,u);break;case 5:var v=n.stateNode;n.flags&32&&($s(v,""),n.flags&=-33);var w=Tu(e);Po(e,w,v);break;case 3:case 4:var O=n.stateNode.containerInfo,q=Tu(e);ju(e,q,O);break;default:throw Error(i(161))}}catch(Z){tt(e,e.return,Z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function eg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;eg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Oa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Qp(e,t.alternate,t),t=t.sibling}function ys(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Aa(4,t,t.return),ys(t);break;case 1:Fn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&qp(t,t.return,n),ys(t);break;case 27:wi(t.stateNode);case 26:case 5:Fn(t,t.return),ys(t);break;case 22:t.memoizedState===null&&ys(t);break;case 30:ys(t);break;default:ys(t)}e=e.sibling}}function Da(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,u=e,f=t,v=f.flags;switch(f.tag){case 0:case 11:case 15:Da(u,f,n),hi(4,f);break;case 1:if(Da(u,f,n),r=f,u=r.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(q){tt(r,r.return,q)}if(r=f,u=r.updateQueue,u!==null){var w=r.stateNode;try{var O=u.shared.hiddenCallbacks;if(O!==null)for(u.shared.hiddenCallbacks=null,u=0;u<O.length;u++)_h(O[u],w)}catch(q){tt(r,r.return,q)}}n&&v&64&&Bp(f),pi(f,f.return);break;case 27:Fp(f);case 26:case 5:Da(u,f,n),n&&r===null&&v&4&&Yp(f),pi(f,f.return);break;case 12:Da(u,f,n);break;case 13:Da(u,f,n),n&&v&4&&Zp(u,f);break;case 22:f.memoizedState===null&&Da(u,f,n),pi(f,f.return);break;case 30:break;default:Da(u,f,n)}t=t.sibling}}function _u(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ei(n))}function Au(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ei(e))}function Xn(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)tg(e,t,n,r),t=t.sibling}function tg(e,t,n,r){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Xn(e,t,n,r),u&2048&&hi(9,t);break;case 1:Xn(e,t,n,r);break;case 3:Xn(e,t,n,r),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ei(e)));break;case 12:if(u&2048){Xn(e,t,n,r),e=t.stateNode;try{var f=t.memoizedProps,v=f.id,w=f.onPostCommit;typeof w=="function"&&w(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){tt(t,t.return,O)}}else Xn(e,t,n,r);break;case 13:Xn(e,t,n,r);break;case 23:break;case 22:f=t.stateNode,v=t.alternate,t.memoizedState!==null?f._visibility&2?Xn(e,t,n,r):gi(e,t):f._visibility&2?Xn(e,t,n,r):(f._visibility|=2,dr(e,t,n,r,(t.subtreeFlags&10256)!==0)),u&2048&&_u(v,t);break;case 24:Xn(e,t,n,r),u&2048&&Au(t.alternate,t);break;default:Xn(e,t,n,r)}}function dr(e,t,n,r,u){for(u=u&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,v=t,w=n,O=r,q=v.flags;switch(v.tag){case 0:case 11:case 15:dr(f,v,w,O,u),hi(8,v);break;case 23:break;case 22:var Z=v.stateNode;v.memoizedState!==null?Z._visibility&2?dr(f,v,w,O,u):gi(f,v):(Z._visibility|=2,dr(f,v,w,O,u)),u&&q&2048&&_u(v.alternate,v);break;case 24:dr(f,v,w,O,u),u&&q&2048&&Au(v.alternate,v);break;default:dr(f,v,w,O,u)}t=t.sibling}}function gi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,u=r.flags;switch(r.tag){case 22:gi(n,r),u&2048&&_u(r.alternate,r);break;case 24:gi(n,r),u&2048&&Au(r.alternate,r);break;default:gi(n,r)}t=t.sibling}}var bi=8192;function fr(e){if(e.subtreeFlags&bi)for(e=e.child;e!==null;)ng(e),e=e.sibling}function ng(e){switch(e.tag){case 26:fr(e),e.flags&bi&&e.memoizedState!==null&&iE(kn,e.memoizedState,e.memoizedProps);break;case 5:fr(e);break;case 3:case 4:var t=kn;kn=el(e.stateNode.containerInfo),fr(e),kn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=bi,bi=16777216,fr(e),bi=t):fr(e));break;default:fr(e)}}function ag(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function yi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];kt=r,rg(r,e)}ag(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)sg(e),e=e.sibling}function sg(e){switch(e.tag){case 0:case 11:case 15:yi(e),e.flags&2048&&Aa(9,e,e.return);break;case 3:yi(e);break;case 12:yi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Vo(e)):yi(e);break;default:yi(e)}}function Vo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];kt=r,rg(r,e)}ag(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Aa(8,t,t.return),Vo(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Vo(t));break;default:Vo(t)}e=e.sibling}}function rg(e,t){for(;kt!==null;){var n=kt;switch(n.tag){case 0:case 11:case 15:Aa(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ei(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,kt=r;else e:for(n=e;kt!==null;){r=kt;var u=r.sibling,f=r.return;if(Kp(r),r===n){kt=null;break e}if(u!==null){u.return=f,kt=u;break e}kt=f}}}var NN={getCacheForType:function(e){var t=Yt(Rt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},EN=typeof WeakMap=="function"?WeakMap:Map,Qe=0,it=null,Le=null,ze=0,Ke=0,pn=null,Ma=!1,mr=!1,Ou=!1,pa=0,bt=0,Ia=0,vs=0,Du=0,Rn=0,hr=0,vi=null,on=null,Mu=!1,Iu=0,Bo=1/0,qo=null,ka=null,zt=0,La=null,pr=null,gr=0,ku=0,Lu=null,ig=null,xi=0,Uu=null;function gn(){if((Qe&2)!==0&&ze!==0)return ze&-ze;if(M.T!==null){var e=ar;return e!==0?e:qu()}return as()}function og(){Rn===0&&(Rn=(ze&536870912)===0||Ye?qt():536870912);var e=jn.current;return e!==null&&(e.flags|=32),Rn}function bn(e,t,n){(e===it&&(Ke===2||Ke===9)||e.cancelPendingCommit!==null)&&(br(e,0),Ua(e,ze,Rn,!1)),qn(e,n),((Qe&2)===0||e!==it)&&(e===it&&((Qe&2)===0&&(vs|=n),bt===4&&Ua(e,ze,Rn,!1)),Qn(e))}function lg(e,t,n){if((Qe&6)!==0)throw Error(i(327));var r=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Gt(e,t),u=r?jN(e,t):zu(e,t,!0),f=r;do{if(u===0){mr&&!r&&Ua(e,t,0,!1);break}else{if(n=e.current.alternate,f&&!wN(n)){u=zu(e,t,!1),f=!1;continue}if(u===2){if(f=t,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var w=e;u=vi;var O=w.current.memoizedState.isDehydrated;if(O&&(br(w,v).flags|=256),v=zu(w,v,!1),v!==2){if(Ou&&!O){w.errorRecoveryDisabledLanes|=f,vs|=f,u=4;break e}f=on,on=u,f!==null&&(on===null?on=f:on.push.apply(on,f))}u=v}if(f=!1,u!==2)continue}}if(u===1){br(e,0),Ua(e,t,0,!0);break}e:{switch(r=e,f=u,f){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Ua(r,t,Rn,!Ma);break e;case 2:on=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(u=Iu+300-Xe(),10<u)){if(Ua(r,t,Rn,!Ma),ot(r,0,!0)!==0)break e;r.timeoutHandle=Ug(cg.bind(null,r,n,on,qo,Mu,t,Rn,vs,hr,Ma,f,2,-0,0),u);break e}cg(r,n,on,qo,Mu,t,Rn,vs,hr,Ma,f,0,-0,0)}}break}while(!0);Qn(e)}function cg(e,t,n,r,u,f,v,w,O,q,Z,te,$,F){if(e.timeoutHandle=-1,te=t.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Ri={stylesheets:null,count:0,unsuspend:rE},ng(t),te=oE(),te!==null)){e.cancelPendingCommit=te(gg.bind(null,e,t,f,n,r,u,v,w,O,Z,1,$,F)),Ua(e,f,v,!q);return}gg(e,t,f,n,r,u,v,w,O)}function wN(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var u=n[r],f=u.getSnapshot;u=u.value;try{if(!dn(f(),u))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ua(e,t,n,r){t&=~Du,t&=~vs,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var u=t;0<u;){var f=31-X(u),v=1<<f;r[f]=-1,u&=~v}n!==0&&Te(e,n,t)}function Yo(){return(Qe&6)===0?(Si(0),!1):!0}function Gu(){if(Le!==null){if(Ke===0)var e=Le.return;else e=Le,oa=ms=null,tu(e),cr=null,di=0,e=Le;for(;e!==null;)Vp(e.alternate,e),e=e.return;Le=null}}function br(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,VN(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Gu(),it=e,Le=n=sa(e.current,null),ze=t,Ke=0,pn=null,Ma=!1,mr=Gt(e,t),Ou=!1,hr=Rn=Du=vs=Ia=bt=0,on=vi=null,Mu=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var u=31-X(r),f=1<<u;t|=e[u],r&=~f}return pa=t,mo(),n}function ug(e,t){Ie=null,M.H=Do,t===ni||t===No?(t=Rh(),Ke=3):t===wh?(t=Rh(),Ke=4):Ke=t===Cp?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,pn=t,Le===null&&(bt=1,Uo(e,Nn(t,e.current)))}function dg(){var e=M.H;return M.H=Do,e===null?Do:e}function fg(){var e=M.A;return M.A=NN,e}function Hu(){bt=4,Ma||(ze&4194048)!==ze&&jn.current!==null||(mr=!0),(Ia&134217727)===0&&(vs&134217727)===0||it===null||Ua(it,ze,Rn,!1)}function zu(e,t,n){var r=Qe;Qe|=2;var u=dg(),f=fg();(it!==e||ze!==t)&&(qo=null,br(e,t)),t=!1;var v=bt;e:do try{if(Ke!==0&&Le!==null){var w=Le,O=pn;switch(Ke){case 8:Gu(),v=6;break e;case 3:case 2:case 9:case 6:jn.current===null&&(t=!0);var q=Ke;if(Ke=0,pn=null,yr(e,w,O,q),n&&mr){v=0;break e}break;default:q=Ke,Ke=0,pn=null,yr(e,w,O,q)}}TN(),v=bt;break}catch(Z){ug(e,Z)}while(!0);return t&&e.shellSuspendCounter++,oa=ms=null,Qe=r,M.H=u,M.A=f,Le===null&&(it=null,ze=0,mo()),v}function TN(){for(;Le!==null;)mg(Le)}function jN(e,t){var n=Qe;Qe|=2;var r=dg(),u=fg();it!==e||ze!==t?(qo=null,Bo=Xe()+500,br(e,t)):mr=Gt(e,t);e:do try{if(Ke!==0&&Le!==null){t=Le;var f=pn;t:switch(Ke){case 1:Ke=0,pn=null,yr(e,t,f,1);break;case 2:case 9:if(Th(f)){Ke=0,pn=null,hg(t);break}t=function(){Ke!==2&&Ke!==9||it!==e||(Ke=7),Qn(e)},f.then(t,t);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:Th(f)?(Ke=0,pn=null,hg(t)):(Ke=0,pn=null,yr(e,t,f,7));break;case 5:var v=null;switch(Le.tag){case 26:v=Le.memoizedState;case 5:case 27:var w=Le;if(!v||Qg(v)){Ke=0,pn=null;var O=w.sibling;if(O!==null)Le=O;else{var q=w.return;q!==null?(Le=q,$o(q)):Le=null}break t}}Ke=0,pn=null,yr(e,t,f,5);break;case 6:Ke=0,pn=null,yr(e,t,f,6);break;case 8:Gu(),bt=6;break e;default:throw Error(i(462))}}RN();break}catch(Z){ug(e,Z)}while(!0);return oa=ms=null,M.H=r,M.A=u,Qe=n,Le!==null?0:(it=null,ze=0,mo(),bt)}function RN(){for(;Le!==null&&!Vt();)mg(Le)}function mg(e){var t=zp(e.alternate,e,pa);e.memoizedProps=e.pendingProps,t===null?$o(e):Le=t}function hg(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ip(n,t,t.pendingProps,t.type,void 0,ze);break;case 11:t=Ip(n,t,t.pendingProps,t.type.render,t.ref,ze);break;case 5:tu(t);default:Vp(n,t),t=Le=ph(t,pa),t=zp(n,t,pa)}e.memoizedProps=e.pendingProps,t===null?$o(e):Le=t}function yr(e,t,n,r){oa=ms=null,tu(t),cr=null,di=0;var u=t.return;try{if(gN(e,u,t,n,ze)){bt=1,Uo(e,Nn(n,e.current)),Le=null;return}}catch(f){if(u!==null)throw Le=u,f;bt=1,Uo(e,Nn(n,e.current)),Le=null;return}t.flags&32768?(Ye||r===1?e=!0:mr||(ze&536870912)!==0?e=!1:(Ma=e=!0,(r===2||r===9||r===3||r===6)&&(r=jn.current,r!==null&&r.tag===13&&(r.flags|=16384))),pg(t,e)):$o(t)}function $o(e){var t=e;do{if((t.flags&32768)!==0){pg(t,Ma);return}e=t.return;var n=yN(t.alternate,t,pa);if(n!==null){Le=n;return}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);bt===0&&(bt=5)}function pg(e,t){do{var n=vN(e.alternate,e);if(n!==null){n.flags&=32767,Le=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Le=e;return}Le=e=n}while(e!==null);bt=6,Le=null}function gg(e,t,n,r,u,f,v,w,O){e.cancelPendingCommit=null;do Fo();while(zt!==0);if((Qe&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(f=t.lanes|t.childLanes,f|=Ac,Gs(e,n,f,v,w,O),e===it&&(Le=it=null,ze=0),pr=t,La=e,gr=n,ku=f,Lu=u,ig=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ON(vn,function(){return Sg(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=M.T,M.T=null,u=H.p,H.p=2,v=Qe,Qe|=4;try{xN(e,t,n)}finally{Qe=v,H.p=u,M.T=r}}zt=1,bg(),yg(),vg()}}function bg(){if(zt===1){zt=0;var e=La,t=pr,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=M.T,M.T=null;var r=H.p;H.p=2;var u=Qe;Qe|=4;try{Jp(t,e);var f=Zu,v=rh(e.containerInfo),w=f.focusedElem,O=f.selectionRange;if(v!==w&&w&&w.ownerDocument&&sh(w.ownerDocument.documentElement,w)){if(O!==null&&Tc(w)){var q=O.start,Z=O.end;if(Z===void 0&&(Z=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(Z,w.value.length);else{var te=w.ownerDocument||document,$=te&&te.defaultView||window;if($.getSelection){var F=$.getSelection(),we=w.textContent.length,Se=Math.min(O.start,we),et=O.end===void 0?Se:Math.min(O.end,we);!F.extend&&Se>et&&(v=et,et=Se,Se=v);var V=ah(w,Se),U=ah(w,et);if(V&&U&&(F.rangeCount!==1||F.anchorNode!==V.node||F.anchorOffset!==V.offset||F.focusNode!==U.node||F.focusOffset!==U.offset)){var B=te.createRange();B.setStart(V.node,V.offset),F.removeAllRanges(),Se>et?(F.addRange(B),F.extend(U.node,U.offset)):(B.setEnd(U.node,U.offset),F.addRange(B))}}}}for(te=[],F=w;F=F.parentNode;)F.nodeType===1&&te.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var J=te[w];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}rl=!!Wu,Zu=Wu=null}finally{Qe=u,H.p=r,M.T=n}}e.current=t,zt=2}}function yg(){if(zt===2){zt=0;var e=La,t=pr,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=M.T,M.T=null;var r=H.p;H.p=2;var u=Qe;Qe|=4;try{Qp(e,t.alternate,t)}finally{Qe=u,H.p=r,M.T=n}}zt=3}}function vg(){if(zt===4||zt===3){zt=0,wt();var e=La,t=pr,n=gr,r=ig;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?zt=5:(zt=0,pr=La=null,xg(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(ka=null),Tt(n),t=t.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(Ot,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=M.T,u=H.p,H.p=2,M.T=null;try{for(var f=e.onRecoverableError,v=0;v<r.length;v++){var w=r[v];f(w.value,{componentStack:w.stack})}}finally{M.T=t,H.p=u}}(gr&3)!==0&&Fo(),Qn(e),u=e.pendingLanes,(n&4194090)!==0&&(u&42)!==0?e===Uu?xi++:(xi=0,Uu=e):xi=0,Si(0)}}function xg(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ei(t)))}function Fo(e){return bg(),yg(),vg(),Sg()}function Sg(){if(zt!==5)return!1;var e=La,t=ku;ku=0;var n=Tt(gr),r=M.T,u=H.p;try{H.p=32>n?32:n,M.T=null,n=Lu,Lu=null;var f=La,v=gr;if(zt=0,pr=La=null,gr=0,(Qe&6)!==0)throw Error(i(331));var w=Qe;if(Qe|=4,sg(f.current),tg(f,f.current,v,n),Qe=w,Si(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(Ot,f)}catch{}return!0}finally{H.p=u,M.T=r,xg(e,t)}}function Ng(e,t,n){t=Nn(n,t),t=pu(e.stateNode,t,2),e=ja(e,t,2),e!==null&&(qn(e,2),Qn(e))}function tt(e,t,n){if(e.tag===3)Ng(e,e,n);else for(;t!==null;){if(t.tag===3){Ng(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ka===null||!ka.has(r))){e=Nn(n,e),n=jp(2),r=ja(t,n,2),r!==null&&(Rp(n,r,t,e),qn(r,2),Qn(r));break}}t=t.return}}function Pu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new EN;var u=new Set;r.set(t,u)}else u=r.get(t),u===void 0&&(u=new Set,r.set(t,u));u.has(n)||(Ou=!0,u.add(n),e=CN.bind(null,e,t,n),t.then(e,e))}function CN(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,it===e&&(ze&n)===n&&(bt===4||bt===3&&(ze&62914560)===ze&&300>Xe()-Iu?(Qe&2)===0&&br(e,0):Du|=n,hr===ze&&(hr=0)),Qn(e)}function Eg(e,t){t===0&&(t=Us()),e=Js(e,t),e!==null&&(qn(e,t),Qn(e))}function _N(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Eg(e,n)}function AN(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,u=e.memoizedState;u!==null&&(n=u.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),Eg(e,n)}function ON(e,t){return nt(e,t)}var Xo=null,vr=null,Vu=!1,Qo=!1,Bu=!1,xs=0;function Qn(e){e!==vr&&e.next===null&&(vr===null?Xo=vr=e:vr=vr.next=e),Qo=!0,Vu||(Vu=!0,MN())}function Si(e,t){if(!Bu&&Qo){Bu=!0;do for(var n=!1,r=Xo;r!==null;){if(e!==0){var u=r.pendingLanes;if(u===0)var f=0;else{var v=r.suspendedLanes,w=r.pingedLanes;f=(1<<31-X(42|e)+1)-1,f&=u&~(v&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(n=!0,Rg(r,f))}else f=ze,f=ot(r,r===it?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(f&3)===0||Gt(r,f)||(n=!0,Rg(r,f));r=r.next}while(n);Bu=!1}}function DN(){wg()}function wg(){Qo=Vu=!1;var e=0;xs!==0&&(PN()&&(e=xs),xs=0);for(var t=Xe(),n=null,r=Xo;r!==null;){var u=r.next,f=Tg(r,t);f===0?(r.next=null,n===null?Xo=u:n.next=u,u===null&&(vr=n)):(n=r,(e!==0||(f&3)!==0)&&(Qo=!0)),r=u}Si(e)}function Tg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-X(f),w=1<<v,O=u[v];O===-1?((w&n)===0||(w&r)!==0)&&(u[v]=Mn(w,t)):O<=t&&(e.expiredLanes|=w),f&=~w}if(t=it,n=ze,n=ot(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Ke===2||Ke===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&ht(r),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Gt(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&ht(r),Tt(n)){case 2:case 8:n=tn;break;case 32:n=vn;break;case 268435456:n=Bt;break;default:n=vn}return r=jg.bind(null,e),n=nt(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&ht(r),e.callbackPriority=2,e.callbackNode=null,2}function jg(e,t){if(zt!==0&&zt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Fo()&&e.callbackNode!==n)return null;var r=ze;return r=ot(e,e===it?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(lg(e,r,t),Tg(e,Xe()),e.callbackNode!=null&&e.callbackNode===n?jg.bind(null,e):null)}function Rg(e,t){if(Fo())return null;lg(e,t,!0)}function MN(){BN(function(){(Qe&6)!==0?nt(At,DN):wg()})}function qu(){return xs===0&&(xs=qt()),xs}function Cg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ro(""+e)}function _g(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function IN(e,t,n,r,u){if(t==="submit"&&n&&n.stateNode===u){var f=Cg((u[rt]||null).action),v=r.submitter;v&&(t=(t=v[rt]||null)?Cg(t.formAction):v.getAttribute("formAction"),t!==null&&(f=t,v=null));var w=new co("action","action",null,r,u);e.push({event:w,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(xs!==0){var O=v?_g(u,v):new FormData(u);uu(n,{pending:!0,data:O,method:u.method,action:f},null,O)}}else typeof f=="function"&&(w.preventDefault(),O=v?_g(u,v):new FormData(u),uu(n,{pending:!0,data:O,method:u.method,action:f},f,O))},currentTarget:u}]})}}for(var Yu=0;Yu<_c.length;Yu++){var $u=_c[Yu],kN=$u.toLowerCase(),LN=$u[0].toUpperCase()+$u.slice(1);In(kN,"on"+LN)}In(lh,"onAnimationEnd"),In(ch,"onAnimationIteration"),In(uh,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(JS,"onTransitionRun"),In(eN,"onTransitionStart"),In(tN,"onTransitionCancel"),In(dh,"onTransitionEnd"),Bs("onMouseEnter",["mouseout","mouseover"]),Bs("onMouseLeave",["mouseout","mouseover"]),Bs("onPointerEnter",["pointerout","pointerover"]),Bs("onPointerLeave",["pointerout","pointerover"]),ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ni));function Ag(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],u=r.event;r=r.listeners;e:{var f=void 0;if(t)for(var v=r.length-1;0<=v;v--){var w=r[v],O=w.instance,q=w.currentTarget;if(w=w.listener,O!==f&&u.isPropagationStopped())break e;f=w,u.currentTarget=q;try{f(u)}catch(Z){Lo(Z)}u.currentTarget=null,f=O}else for(v=0;v<r.length;v++){if(w=r[v],O=w.instance,q=w.currentTarget,w=w.listener,O!==f&&u.isPropagationStopped())break e;f=w,u.currentTarget=q;try{f(u)}catch(Z){Lo(Z)}u.currentTarget=null,f=O}}}}function Ue(e,t){var n=t[Hs];n===void 0&&(n=t[Hs]=new Set);var r=e+"__bubble";n.has(r)||(Og(t,e,2,!1),n.add(r))}function Fu(e,t,n){var r=0;t&&(r|=4),Og(n,e,r,t)}var Ko="_reactListening"+Math.random().toString(36).slice(2);function Xu(e){if(!e[Ko]){e[Ko]=!0,wm.forEach(function(n){n!=="selectionchange"&&(UN.has(n)||Fu(n,!1,e),Fu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ko]||(t[Ko]=!0,Fu("selectionchange",!1,t))}}function Og(e,t,n,r){switch(t0(t)){case 2:var u=uE;break;case 8:u=dE;break;default:u=ld}n=u.bind(null,t,n,e),u=void 0,!gc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),r?u!==void 0?e.addEventListener(t,n,{capture:!0,passive:u}):e.addEventListener(t,n,!0):u!==void 0?e.addEventListener(t,n,{passive:u}):e.addEventListener(t,n,!1)}function Qu(e,t,n,r,u){var f=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var v=r.tag;if(v===3||v===4){var w=r.stateNode.containerInfo;if(w===u)break;if(v===4)for(v=r.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===u)return;v=v.return}for(;w!==null;){if(v=zs(w),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){r=f=v;continue e}w=w.parentNode}}r=r.return}Gm(function(){var q=f,Z=hc(n),te=[];e:{var $=fh.get(e);if($!==void 0){var F=co,we=e;switch(e){case"keypress":if(oo(n)===0)break e;case"keydown":case"keyup":F=OS;break;case"focusin":we="focus",F=xc;break;case"focusout":we="blur",F=xc;break;case"beforeblur":case"afterblur":F=xc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Pm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=vS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=IS;break;case lh:case ch:case uh:F=NS;break;case dh:F=LS;break;case"scroll":case"scrollend":F=bS;break;case"wheel":F=GS;break;case"copy":case"cut":case"paste":F=wS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Bm;break;case"toggle":case"beforetoggle":F=zS}var Se=(t&4)!==0,et=!Se&&(e==="scroll"||e==="scrollend"),V=Se?$!==null?$+"Capture":null:$;Se=[];for(var U=q,B;U!==null;){var J=U;if(B=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||B===null||V===null||(J=Pr(U,V),J!=null&&Se.push(Ei(U,J,B))),et)break;U=U.return}0<Se.length&&($=new F($,we,null,n,Z),te.push({event:$,listeners:Se}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",$&&n!==mc&&(we=n.relatedTarget||n.fromElement)&&(zs(we)||we[Dt]))break e;if((F||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,F?(we=n.relatedTarget||n.toElement,F=q,we=we?zs(we):null,we!==null&&(et=d(we),Se=we.tag,we!==et||Se!==5&&Se!==27&&Se!==6)&&(we=null)):(F=null,we=q),F!==we)){if(Se=Pm,J="onMouseLeave",V="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(Se=Bm,J="onPointerLeave",V="onPointerEnter",U="pointer"),et=F==null?$:zr(F),B=we==null?$:zr(we),$=new Se(J,U+"leave",F,n,Z),$.target=et,$.relatedTarget=B,J=null,zs(Z)===q&&(Se=new Se(V,U+"enter",we,n,Z),Se.target=B,Se.relatedTarget=et,J=Se),et=J,F&&we)t:{for(Se=F,V=we,U=0,B=Se;B;B=xr(B))U++;for(B=0,J=V;J;J=xr(J))B++;for(;0<U-B;)Se=xr(Se),U--;for(;0<B-U;)V=xr(V),B--;for(;U--;){if(Se===V||V!==null&&Se===V.alternate)break t;Se=xr(Se),V=xr(V)}Se=null}else Se=null;F!==null&&Dg(te,$,F,Se,!1),we!==null&&et!==null&&Dg(te,et,we,Se,!0)}}e:{if($=q?zr(q):window,F=$.nodeName&&$.nodeName.toLowerCase(),F==="select"||F==="input"&&$.type==="file")var fe=Wm;else if(Qm($))if(Zm)fe=KS;else{fe=XS;var ke=FS}else F=$.nodeName,!F||F.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?q&&fc(q.elementType)&&(fe=Wm):fe=QS;if(fe&&(fe=fe(e,q))){Km(te,fe,n,Z);break e}ke&&ke(e,$,q),e==="focusout"&&q&&$.type==="number"&&q.memoizedProps.value!=null&&dc($,"number",$.value)}switch(ke=q?zr(q):window,e){case"focusin":(Qm(ke)||ke.contentEditable==="true")&&(Ks=ke,jc=q,Qr=null);break;case"focusout":Qr=jc=Ks=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,ih(te,n,Z);break;case"selectionchange":if(ZS)break;case"keydown":case"keyup":ih(te,n,Z)}var be;if(Nc)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Qs?Fm(e,n)&&(Ee="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ee="onCompositionStart");Ee&&(qm&&n.locale!=="ko"&&(Qs||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Qs&&(be=Hm()):(Na=Z,bc="value"in Na?Na.value:Na.textContent,Qs=!0)),ke=Wo(q,Ee),0<ke.length&&(Ee=new Vm(Ee,e,null,n,Z),te.push({event:Ee,listeners:ke}),be?Ee.data=be:(be=Xm(n),be!==null&&(Ee.data=be)))),(be=VS?BS(e,n):qS(e,n))&&(Ee=Wo(q,"onBeforeInput"),0<Ee.length&&(ke=new Vm("onBeforeInput","beforeinput",null,n,Z),te.push({event:ke,listeners:Ee}),ke.data=be)),IN(te,e,q,n,Z)}Ag(te,t)})}function Ei(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wo(e,t){for(var n=t+"Capture",r=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=Pr(e,n),u!=null&&r.unshift(Ei(e,u,f)),u=Pr(e,t),u!=null&&r.push(Ei(e,u,f))),e.tag===3)return r;e=e.return}return[]}function xr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dg(e,t,n,r,u){for(var f=t._reactName,v=[];n!==null&&n!==r;){var w=n,O=w.alternate,q=w.stateNode;if(w=w.tag,O!==null&&O===r)break;w!==5&&w!==26&&w!==27||q===null||(O=q,u?(q=Pr(n,f),q!=null&&v.unshift(Ei(n,q,O))):u||(q=Pr(n,f),q!=null&&v.push(Ei(n,q,O)))),n=n.return}v.length!==0&&e.push({event:t,listeners:v})}var GN=/\r\n?/g,HN=/\u0000|\uFFFD/g;function Mg(e){return(typeof e=="string"?e:""+e).replace(GN,`
`).replace(HN,"")}function Ig(e,t){return t=Mg(t),Mg(e)===t}function Zo(){}function Je(e,t,n,r,u,f){switch(n){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||$s(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&$s(e,""+r);break;case"className":no(e,"class",r);break;case"tabIndex":no(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":no(e,n,r);break;case"style":Lm(e,r,f);break;case"data":if(t!=="object"){no(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=ro(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(n==="formAction"?(t!=="input"&&Je(e,t,"name",u.name,u,null),Je(e,t,"formEncType",u.formEncType,u,null),Je(e,t,"formMethod",u.formMethod,u,null),Je(e,t,"formTarget",u.formTarget,u,null)):(Je(e,t,"encType",u.encType,u,null),Je(e,t,"method",u.method,u,null),Je(e,t,"target",u.target,u,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=ro(""+r),e.setAttribute(n,r);break;case"onClick":r!=null&&(e.onclick=Zo);break;case"onScroll":r!=null&&Ue("scroll",e);break;case"onScrollEnd":r!=null&&Ue("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(i(61));if(n=r.__html,n!=null){if(u.children!=null)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}n=ro(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":r===!0?e.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Ue("beforetoggle",e),Ue("toggle",e),to(e,"popover",r);break;case"xlinkActuate":na(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":na(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":na(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":na(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":na(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":na(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":na(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":na(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":na(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":to(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=pS.get(n)||n,to(e,n,r))}}function Ku(e,t,n,r,u,f){switch(n){case"style":Lm(e,r,f);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(i(61));if(n=r.__html,n!=null){if(u.children!=null)throw Error(i(60));e.innerHTML=n}}break;case"children":typeof r=="string"?$s(e,r):(typeof r=="number"||typeof r=="bigint")&&$s(e,""+r);break;case"onScroll":r!=null&&Ue("scroll",e);break;case"onScrollEnd":r!=null&&Ue("scrollend",e);break;case"onClick":r!=null&&(e.onclick=Zo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tm.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(u=n.endsWith("Capture"),t=n.slice(2,u?n.length-7:void 0),f=e[rt]||null,f=f!=null?f[n]:null,typeof f=="function"&&e.removeEventListener(t,f,u),typeof r=="function")){typeof f!="function"&&f!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,u);break e}n in e?e[n]=r:r===!0?e.setAttribute(n,""):to(e,n,r)}}}function Pt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",e),Ue("load",e);var r=!1,u=!1,f;for(f in n)if(n.hasOwnProperty(f)){var v=n[f];if(v!=null)switch(f){case"src":r=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Je(e,t,f,v,n,null)}}u&&Je(e,t,"srcSet",n.srcSet,n,null),r&&Je(e,t,"src",n.src,n,null);return;case"input":Ue("invalid",e);var w=f=v=u=null,O=null,q=null;for(r in n)if(n.hasOwnProperty(r)){var Z=n[r];if(Z!=null)switch(r){case"name":u=Z;break;case"type":v=Z;break;case"checked":O=Z;break;case"defaultChecked":q=Z;break;case"value":f=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,t));break;default:Je(e,t,r,Z,n,null)}}Dm(e,f,w,O,q,v,u,!1),ao(e);return;case"select":Ue("invalid",e),r=v=f=null;for(u in n)if(n.hasOwnProperty(u)&&(w=n[u],w!=null))switch(u){case"value":f=w;break;case"defaultValue":v=w;break;case"multiple":r=w;default:Je(e,t,u,w,n,null)}t=f,n=v,e.multiple=!!r,t!=null?Ys(e,!!r,t,!1):n!=null&&Ys(e,!!r,n,!0);return;case"textarea":Ue("invalid",e),f=u=r=null;for(v in n)if(n.hasOwnProperty(v)&&(w=n[v],w!=null))switch(v){case"value":r=w;break;case"defaultValue":u=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:Je(e,t,v,w,n,null)}Im(e,r,u,f),ao(e);return;case"option":for(O in n)if(n.hasOwnProperty(O)&&(r=n[O],r!=null))switch(O){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Je(e,t,O,r,n,null)}return;case"dialog":Ue("beforetoggle",e),Ue("toggle",e),Ue("cancel",e),Ue("close",e);break;case"iframe":case"object":Ue("load",e);break;case"video":case"audio":for(r=0;r<Ni.length;r++)Ue(Ni[r],e);break;case"image":Ue("error",e),Ue("load",e);break;case"details":Ue("toggle",e);break;case"embed":case"source":case"link":Ue("error",e),Ue("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in n)if(n.hasOwnProperty(q)&&(r=n[q],r!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Je(e,t,q,r,n,null)}return;default:if(fc(t)){for(Z in n)n.hasOwnProperty(Z)&&(r=n[Z],r!==void 0&&Ku(e,t,Z,r,n,void 0));return}}for(w in n)n.hasOwnProperty(w)&&(r=n[w],r!=null&&Je(e,t,w,r,n,null))}function zN(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,v=null,w=null,O=null,q=null,Z=null;for(F in n){var te=n[F];if(n.hasOwnProperty(F)&&te!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":O=te;default:r.hasOwnProperty(F)||Je(e,t,F,null,r,te)}}for(var $ in r){var F=r[$];if(te=n[$],r.hasOwnProperty($)&&(F!=null||te!=null))switch($){case"type":f=F;break;case"name":u=F;break;case"checked":q=F;break;case"defaultChecked":Z=F;break;case"value":v=F;break;case"defaultValue":w=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,t));break;default:F!==te&&Je(e,t,$,F,r,te)}}uc(e,v,w,O,q,Z,f,u);return;case"select":F=v=w=$=null;for(f in n)if(O=n[f],n.hasOwnProperty(f)&&O!=null)switch(f){case"value":break;case"multiple":F=O;default:r.hasOwnProperty(f)||Je(e,t,f,null,r,O)}for(u in r)if(f=r[u],O=n[u],r.hasOwnProperty(u)&&(f!=null||O!=null))switch(u){case"value":$=f;break;case"defaultValue":w=f;break;case"multiple":v=f;default:f!==O&&Je(e,t,u,f,r,O)}t=w,n=v,r=F,$!=null?Ys(e,!!n,$,!1):!!r!=!!n&&(t!=null?Ys(e,!!n,t,!0):Ys(e,!!n,n?[]:"",!1));return;case"textarea":F=$=null;for(w in n)if(u=n[w],n.hasOwnProperty(w)&&u!=null&&!r.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Je(e,t,w,null,r,u)}for(v in r)if(u=r[v],f=n[v],r.hasOwnProperty(v)&&(u!=null||f!=null))switch(v){case"value":$=u;break;case"defaultValue":F=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(i(91));break;default:u!==f&&Je(e,t,v,u,r,f)}Mm(e,$,F);return;case"option":for(var we in n)if($=n[we],n.hasOwnProperty(we)&&$!=null&&!r.hasOwnProperty(we))switch(we){case"selected":e.selected=!1;break;default:Je(e,t,we,null,r,$)}for(O in r)if($=r[O],F=n[O],r.hasOwnProperty(O)&&$!==F&&($!=null||F!=null))switch(O){case"selected":e.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:Je(e,t,O,$,r,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in n)$=n[Se],n.hasOwnProperty(Se)&&$!=null&&!r.hasOwnProperty(Se)&&Je(e,t,Se,null,r,$);for(q in r)if($=r[q],F=n[q],r.hasOwnProperty(q)&&$!==F&&($!=null||F!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,t));break;default:Je(e,t,q,$,r,F)}return;default:if(fc(t)){for(var et in n)$=n[et],n.hasOwnProperty(et)&&$!==void 0&&!r.hasOwnProperty(et)&&Ku(e,t,et,void 0,r,$);for(Z in r)$=r[Z],F=n[Z],!r.hasOwnProperty(Z)||$===F||$===void 0&&F===void 0||Ku(e,t,Z,$,r,F);return}}for(var V in n)$=n[V],n.hasOwnProperty(V)&&$!=null&&!r.hasOwnProperty(V)&&Je(e,t,V,null,r,$);for(te in r)$=r[te],F=n[te],!r.hasOwnProperty(te)||$===F||$==null&&F==null||Je(e,t,te,$,r,F)}var Wu=null,Zu=null;function Jo(e){return e.nodeType===9?e:e.ownerDocument}function kg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ju(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ed=null;function PN(){var e=window.event;return e&&e.type==="popstate"?e===ed?!1:(ed=e,!0):(ed=null,!1)}var Ug=typeof setTimeout=="function"?setTimeout:void 0,VN=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,BN=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(e){return Gg.resolve(null).then(e).catch(qN)}:Ug;function qN(e){setTimeout(function(){throw e})}function Ga(e){return e==="head"}function Hg(e,t){var n=t,r=0,u=0;do{var f=n.nextSibling;if(e.removeChild(n),f&&f.nodeType===8)if(n=f.data,n==="/$"){if(0<r&&8>r){n=r;var v=e.ownerDocument;if(n&1&&wi(v.documentElement),n&2&&wi(v.body),n&4)for(n=v.head,wi(n),v=n.firstChild;v;){var w=v.nextSibling,O=v.nodeName;v[Hr]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&v.rel.toLowerCase()==="stylesheet"||n.removeChild(v),v=w}}if(u===0){e.removeChild(f),Di(t);return}u--}else n==="$"||n==="$?"||n==="$!"?u++:r=n.charCodeAt(0)-48;else r=0;n=f}while(n);Di(t)}function td(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":td(n),ic(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function YN(e,t,n,r){for(;e.nodeType===1;){var u=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Hr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Ln(e.nextSibling),e===null)break}return null}function $N(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Ln(e.nextSibling),e===null))return null;return e}function nd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function FN(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Ln(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var ad=null;function zg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function Pg(e,t,n){switch(t=Jo(n),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function wi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ic(e)}var Cn=new Map,Vg=new Set;function el(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ga=H.d;H.d={f:XN,r:QN,D:KN,C:WN,L:ZN,m:JN,X:tE,S:eE,M:nE};function XN(){var e=ga.f(),t=Yo();return e||t}function QN(e){var t=Ps(e);t!==null&&t.tag===5&&t.type==="form"?lp(t):ga.r(e)}var Sr=typeof document>"u"?null:document;function Bg(e,t,n){var r=Sr;if(r&&typeof t=="string"&&t){var u=Sn(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof n=="string"&&(u+='[crossorigin="'+n+'"]'),Vg.has(u)||(Vg.add(u),e={rel:e,crossOrigin:n,href:t},r.querySelector(u)===null&&(t=r.createElement("link"),Pt(t,"link",e),Mt(t),r.head.appendChild(t)))}}function KN(e){ga.D(e),Bg("dns-prefetch",e,null)}function WN(e,t){ga.C(e,t),Bg("preconnect",e,t)}function ZN(e,t,n){ga.L(e,t,n);var r=Sr;if(r&&e&&t){var u='link[rel="preload"][as="'+Sn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(u+='[imagesrcset="'+Sn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(u+='[imagesizes="'+Sn(n.imageSizes)+'"]')):u+='[href="'+Sn(e)+'"]';var f=u;switch(t){case"style":f=Nr(e);break;case"script":f=Er(e)}Cn.has(f)||(e=y({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Cn.set(f,e),r.querySelector(u)!==null||t==="style"&&r.querySelector(Ti(f))||t==="script"&&r.querySelector(ji(f))||(t=r.createElement("link"),Pt(t,"link",e),Mt(t),r.head.appendChild(t)))}}function JN(e,t){ga.m(e,t);var n=Sr;if(n&&e){var r=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+Sn(r)+'"][href="'+Sn(e)+'"]',f=u;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Er(e)}if(!Cn.has(f)&&(e=y({rel:"modulepreload",href:e},t),Cn.set(f,e),n.querySelector(u)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ji(f)))return}r=n.createElement("link"),Pt(r,"link",e),Mt(r),n.head.appendChild(r)}}}function eE(e,t,n){ga.S(e,t,n);var r=Sr;if(r&&e){var u=Vs(r).hoistableStyles,f=Nr(e);t=t||"default";var v=u.get(f);if(!v){var w={loading:0,preload:null};if(v=r.querySelector(Ti(f)))w.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Cn.get(f))&&sd(e,n);var O=v=r.createElement("link");Mt(O),Pt(O,"link",e),O._p=new Promise(function(q,Z){O.onload=q,O.onerror=Z}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,tl(v,t,r)}v={type:"stylesheet",instance:v,count:1,state:w},u.set(f,v)}}}function tE(e,t){ga.X(e,t);var n=Sr;if(n&&e){var r=Vs(n).hoistableScripts,u=Er(e),f=r.get(u);f||(f=n.querySelector(ji(u)),f||(e=y({src:e,async:!0},t),(t=Cn.get(u))&&rd(e,t),f=n.createElement("script"),Mt(f),Pt(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},r.set(u,f))}}function nE(e,t){ga.M(e,t);var n=Sr;if(n&&e){var r=Vs(n).hoistableScripts,u=Er(e),f=r.get(u);f||(f=n.querySelector(ji(u)),f||(e=y({src:e,async:!0,type:"module"},t),(t=Cn.get(u))&&rd(e,t),f=n.createElement("script"),Mt(f),Pt(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},r.set(u,f))}}function qg(e,t,n,r){var u=(u=de.current)?el(u):null;if(!u)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Nr(n.href),n=Vs(u).hoistableStyles,r=n.get(t),r||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Nr(n.href);var f=Vs(u).hoistableStyles,v=f.get(e);if(v||(u=u.ownerDocument||u,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=u.querySelector(Ti(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Cn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Cn.set(e,n),f||aE(u,e,n,v.state))),t&&r===null)throw Error(i(528,""));return v}if(t&&r!==null)throw Error(i(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Er(n),n=Vs(u).hoistableScripts,r=n.get(t),r||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Nr(e){return'href="'+Sn(e)+'"'}function Ti(e){return'link[rel="stylesheet"]['+e+"]"}function Yg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function aE(e,t,n,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),Pt(t,"link",n),Mt(t),e.head.appendChild(t))}function Er(e){return'[src="'+Sn(e)+'"]'}function ji(e){return"script[async]"+e}function $g(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Sn(n.href)+'"]');if(r)return t.instance=r,Mt(r),r;var u=y({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),Mt(r),Pt(r,"style",u),tl(r,n.precedence,e),t.instance=r;case"stylesheet":u=Nr(n.href);var f=e.querySelector(Ti(u));if(f)return t.state.loading|=4,t.instance=f,Mt(f),f;r=Yg(n),(u=Cn.get(u))&&sd(r,u),f=(e.ownerDocument||e).createElement("link"),Mt(f);var v=f;return v._p=new Promise(function(w,O){v.onload=w,v.onerror=O}),Pt(f,"link",r),t.state.loading|=4,tl(f,n.precedence,e),t.instance=f;case"script":return f=Er(n.src),(u=e.querySelector(ji(f)))?(t.instance=u,Mt(u),u):(r=n,(u=Cn.get(f))&&(r=y({},n),rd(r,u)),e=e.ownerDocument||e,u=e.createElement("script"),Mt(u),Pt(u,"link",r),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,tl(r,n.precedence,e));return t.instance}function tl(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=r.length?r[r.length-1]:null,f=u,v=0;v<r.length;v++){var w=r[v];if(w.dataset.precedence===t)f=w;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function sd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function rd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var nl=null;function Fg(e,t,n){if(nl===null){var r=new Map,u=nl=new Map;u.set(n,r)}else u=nl,r=u.get(n),r||(r=new Map,u.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),u=0;u<n.length;u++){var f=n[u];if(!(f[Hr]||f[vt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(t)||"";v=e+v;var w=r.get(v);w?w.push(f):r.set(v,[f])}}return r}function Xg(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function sE(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Qg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Ri=null;function rE(){}function iE(e,t,n){if(Ri===null)throw Error(i(475));var r=Ri;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var u=Nr(n.href),f=e.querySelector(Ti(u));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(r.count++,r=al.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=f,Mt(f);return}f=e.ownerDocument||e,n=Yg(n),(u=Cn.get(u))&&sd(n,u),f=f.createElement("link"),Mt(f);var v=f;v._p=new Promise(function(w,O){v.onload=w,v.onerror=O}),Pt(f,"link",n),t.instance=f}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(r.count++,t=al.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}function oE(){if(Ri===null)throw Error(i(475));var e=Ri;return e.stylesheets&&e.count===0&&id(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&id(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function al(){if(this.count--,this.count===0){if(this.stylesheets)id(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var sl=null;function id(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,sl=new Map,t.forEach(lE,e),sl=null,al.call(e))}function lE(e,t){if(!(t.state.loading&4)){var n=sl.get(e);if(n)var r=n.get(null);else{n=new Map,sl.set(e,n);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var v=u[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(n.set(v.dataset.precedence,v),r=v)}r&&n.set(null,r)}u=t.instance,v=u.getAttribute("data-precedence"),f=n.get(v)||r,f===r&&n.set(null,u),n.set(v,u),this.count++,r=al.bind(this),u.addEventListener("load",r),u.addEventListener("error",r),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var Ci={$$typeof:T,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function cE(e,t,n,r,u,f,v,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ns(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ns(0),this.hiddenUpdates=ns(null),this.identifierPrefix=r,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Kg(e,t,n,r,u,f,v,w,O,q,Z,te){return e=new cE(e,t,n,v,w,O,q,te),t=1,f===!0&&(t|=24),f=fn(3,null,null,t),e.current=f,f.stateNode=e,t=Pc(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:r,isDehydrated:n,cache:t},Yc(f),e}function Wg(e){return e?(e=er,e):er}function Zg(e,t,n,r,u,f){u=Wg(u),r.context===null?r.context=u:r.pendingContext=u,r=Ta(t),r.payload={element:n},f=f===void 0?null:f,f!==null&&(r.callback=f),n=ja(e,r,t),n!==null&&(bn(n,e,t),si(n,e,t))}function Jg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function od(e,t){Jg(e,t),(e=e.alternate)&&Jg(e,t)}function e0(e){if(e.tag===13){var t=Js(e,67108864);t!==null&&bn(t,e,67108864),od(e,67108864)}}var rl=!0;function uE(e,t,n,r){var u=M.T;M.T=null;var f=H.p;try{H.p=2,ld(e,t,n,r)}finally{H.p=f,M.T=u}}function dE(e,t,n,r){var u=M.T;M.T=null;var f=H.p;try{H.p=8,ld(e,t,n,r)}finally{H.p=f,M.T=u}}function ld(e,t,n,r){if(rl){var u=cd(r);if(u===null)Qu(e,t,r,il,n),n0(e,r);else if(mE(u,e,t,n,r))r.stopPropagation();else if(n0(e,r),t&4&&-1<fE.indexOf(e)){for(;u!==null;){var f=Ps(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=me(f.pendingLanes);if(v!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var O=1<<31-X(v);w.entanglements[1]|=O,v&=~O}Qn(f),(Qe&6)===0&&(Bo=Xe()+500,Si(0))}}break;case 13:w=Js(f,2),w!==null&&bn(w,f,2),Yo(),od(f,2)}if(f=cd(r),f===null&&Qu(e,t,r,il,n),f===u)break;u=f}u!==null&&r.stopPropagation()}else Qu(e,t,r,null,n)}}function cd(e){return e=hc(e),ud(e)}var il=null;function ud(e){if(il=null,e=zs(e),e!==null){var t=d(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=m(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return il=e,null}function t0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pn()){case At:return 2;case tn:return 8;case vn:case at:return 32;case Bt:return 268435456;default:return 32}default:return 32}}var dd=!1,Ha=null,za=null,Pa=null,_i=new Map,Ai=new Map,Va=[],fE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n0(e,t){switch(e){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":_i.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ai.delete(t.pointerId)}}function Oi(e,t,n,r,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:f,targetContainers:[u]},t!==null&&(t=Ps(t),t!==null&&e0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function mE(e,t,n,r,u){switch(t){case"focusin":return Ha=Oi(Ha,e,t,n,r,u),!0;case"dragenter":return za=Oi(za,e,t,n,r,u),!0;case"mouseover":return Pa=Oi(Pa,e,t,n,r,u),!0;case"pointerover":var f=u.pointerId;return _i.set(f,Oi(_i.get(f)||null,e,t,n,r,u)),!0;case"gotpointercapture":return f=u.pointerId,Ai.set(f,Oi(Ai.get(f)||null,e,t,n,r,u)),!0}return!1}function a0(e){var t=zs(e.target);if(t!==null){var n=d(t);if(n!==null){if(t=n.tag,t===13){if(t=m(n),t!==null){e.blockedOn=t,jt(e.priority,function(){if(n.tag===13){var r=gn();r=st(r);var u=Js(n,r);u!==null&&bn(u,n,r),od(n,r)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ol(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=cd(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);mc=r,n.target.dispatchEvent(r),mc=null}else return t=Ps(n),t!==null&&e0(t),e.blockedOn=n,!1;t.shift()}return!0}function s0(e,t,n){ol(e)&&n.delete(t)}function hE(){dd=!1,Ha!==null&&ol(Ha)&&(Ha=null),za!==null&&ol(za)&&(za=null),Pa!==null&&ol(Pa)&&(Pa=null),_i.forEach(s0),Ai.forEach(s0)}function ll(e,t){e.blockedOn===t&&(e.blockedOn=null,dd||(dd=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,hE)))}var cl=null;function r0(e){cl!==e&&(cl=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){cl===e&&(cl=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],u=e[t+2];if(typeof r!="function"){if(ud(r||n)===null)continue;break}var f=Ps(n);f!==null&&(e.splice(t,3),t-=3,uu(f,{pending:!0,data:u,method:n.method,action:r},r,u))}}))}function Di(e){function t(O){return ll(O,e)}Ha!==null&&ll(Ha,e),za!==null&&ll(za,e),Pa!==null&&ll(Pa,e),_i.forEach(t),Ai.forEach(t);for(var n=0;n<Va.length;n++){var r=Va[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Va.length&&(n=Va[0],n.blockedOn===null);)a0(n),n.blockedOn===null&&Va.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var u=n[r],f=n[r+1],v=u[rt]||null;if(typeof f=="function")v||r0(n);else if(v){var w=null;if(f&&f.hasAttribute("formAction")){if(u=f,v=f[rt]||null)w=v.formAction;else if(ud(u)!==null)continue}else w=v.action;typeof w=="function"?n[r+1]=w:(n.splice(r,3),r-=3),r0(n)}}}function fd(e){this._internalRoot=e}ul.prototype.render=fd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current,r=gn();Zg(n,r,e,t,null,null)},ul.prototype.unmount=fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zg(e.current,2,null,e,null,null),Yo(),t[Dt]=null}};function ul(e){this._internalRoot=e}ul.prototype.unstable_scheduleHydration=function(e){if(e){var t=as();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Va.length&&t!==0&&t<Va[n].priority;n++);Va.splice(n,0,e),n===0&&a0(e)}};var i0=a.version;if(i0!=="19.1.1")throw Error(i(527,i0,"19.1.1"));H.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var pE={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{Ot=dl.inject(pE),pt=dl}catch{}}return Mi.createRoot=function(e,t){if(!c(e))throw Error(i(299));var n=!1,r="",u=Np,f=Ep,v=wp,w=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(w=t.unstable_transitionCallbacks)),t=Kg(e,1,!1,null,null,n,r,u,f,v,w,null),e[Dt]=t.current,Xu(e),new fd(t)},Mi.hydrateRoot=function(e,t,n){if(!c(e))throw Error(i(299));var r=!1,u="",f=Np,v=Ep,w=wp,O=null,q=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(v=n.onCaughtError),n.onRecoverableError!==void 0&&(w=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(O=n.unstable_transitionCallbacks),n.formState!==void 0&&(q=n.formState)),t=Kg(e,1,!0,t,n??null,r,u,f,v,w,O,q),t.context=Wg(null),n=t.current,r=gn(),r=st(r),u=Ta(r),u.callback=null,ja(n,u,r),n=r,t.current.lanes=n,qn(t,n),Qn(t),e[Dt]=t.current,Xu(e),new ul(t)},Mi.version="19.1.1",Mi}var f0;function Rw(){if(f0)return md.exports;f0=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(a){console.error(a)}}return o(),md.exports=jw(),md.exports}var Cw=Rw();function _w(o){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",a.appendChild(s),s.styleSheet?s.styleSheet.cssText=o:s.appendChild(document.createTextNode(o))}const Aw=o=>{switch(o){case"success":return Mw;case"info":return kw;case"warning":return Iw;case"error":return Lw;default:return null}},Ow=Array(12).fill(0),Dw=({visible:o,className:a})=>ie.createElement("div",{className:["sonner-loading-wrapper",a].filter(Boolean).join(" "),"data-visible":o},ie.createElement("div",{className:"sonner-spinner"},Ow.map((s,i)=>ie.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),Mw=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Iw=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),kw=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Lw=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Uw=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ie.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ie.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Gw=()=>{const[o,a]=ie.useState(document.hidden);return ie.useEffect(()=>{const s=()=>{a(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),o};let Of=1;class Hw{constructor(){this.subscribe=a=>(this.subscribers.push(a),()=>{const s=this.subscribers.indexOf(a);this.subscribers.splice(s,1)}),this.publish=a=>{this.subscribers.forEach(s=>s(a))},this.addToast=a=>{this.publish(a),this.toasts=[...this.toasts,a]},this.create=a=>{var s;const{message:i,...c}=a,d=typeof a?.id=="number"||((s=a.id)==null?void 0:s.length)>0?a.id:Of++,m=this.toasts.find(p=>p.id===d),h=a.dismissible===void 0?!0:a.dismissible;return this.dismissedToasts.has(d)&&this.dismissedToasts.delete(d),m?this.toasts=this.toasts.map(p=>p.id===d?(this.publish({...p,...a,id:d,title:i}),{...p,...a,id:d,dismissible:h,title:i}):p):this.addToast({title:i,...c,dismissible:h,id:d}),d},this.dismiss=a=>(a?(this.dismissedToasts.add(a),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:a,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(i=>i({id:s.id,dismiss:!0}))}),a),this.message=(a,s)=>this.create({...s,message:a}),this.error=(a,s)=>this.create({...s,message:a,type:"error"}),this.success=(a,s)=>this.create({...s,type:"success",message:a}),this.info=(a,s)=>this.create({...s,type:"info",message:a}),this.warning=(a,s)=>this.create({...s,type:"warning",message:a}),this.loading=(a,s)=>this.create({...s,type:"loading",message:a}),this.promise=(a,s)=>{if(!s)return;let i;s.loading!==void 0&&(i=this.create({...s,promise:a,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const c=Promise.resolve(a instanceof Function?a():a);let d=i!==void 0,m;const h=c.then(async g=>{if(m=["resolve",g],ie.isValidElement(g))d=!1,this.create({id:i,type:"default",message:g});else if(Pw(g)&&!g.ok){d=!1;const b=typeof s.error=="function"?await s.error(`HTTP error! status: ${g.status}`):s.error,N=typeof s.description=="function"?await s.description(`HTTP error! status: ${g.status}`):s.description,j=typeof b=="object"&&!ie.isValidElement(b)?b:{message:b};this.create({id:i,type:"error",description:N,...j})}else if(g instanceof Error){d=!1;const b=typeof s.error=="function"?await s.error(g):s.error,N=typeof s.description=="function"?await s.description(g):s.description,j=typeof b=="object"&&!ie.isValidElement(b)?b:{message:b};this.create({id:i,type:"error",description:N,...j})}else if(s.success!==void 0){d=!1;const b=typeof s.success=="function"?await s.success(g):s.success,N=typeof s.description=="function"?await s.description(g):s.description,j=typeof b=="object"&&!ie.isValidElement(b)?b:{message:b};this.create({id:i,type:"success",description:N,...j})}}).catch(async g=>{if(m=["reject",g],s.error!==void 0){d=!1;const y=typeof s.error=="function"?await s.error(g):s.error,b=typeof s.description=="function"?await s.description(g):s.description,E=typeof y=="object"&&!ie.isValidElement(y)?y:{message:y};this.create({id:i,type:"error",description:b,...E})}}).finally(()=>{d&&(this.dismiss(i),i=void 0),s.finally==null||s.finally.call(s)}),p=()=>new Promise((g,y)=>h.then(()=>m[0]==="reject"?y(m[1]):g(m[1])).catch(y));return typeof i!="string"&&typeof i!="number"?{unwrap:p}:Object.assign(i,{unwrap:p})},this.custom=(a,s)=>{const i=s?.id||Of++;return this.create({jsx:a(i),id:i,...s}),i},this.getActiveToasts=()=>this.toasts.filter(a=>!this.dismissedToasts.has(a.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ln=new Hw,zw=(o,a)=>{const s=a?.id||Of++;return ln.addToast({title:o,...a,id:s}),s},Pw=o=>o&&typeof o=="object"&&"ok"in o&&typeof o.ok=="boolean"&&"status"in o&&typeof o.status=="number",Vw=zw,Bw=()=>ln.toasts,qw=()=>ln.getActiveToasts(),Fe=Object.assign(Vw,{success:ln.success,info:ln.info,warning:ln.warning,error:ln.error,custom:ln.custom,message:ln.message,promise:ln.promise,dismiss:ln.dismiss,loading:ln.loading},{getHistory:Bw,getToasts:qw});_w("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function fl(o){return o.label!==void 0}const Yw=3,$w="24px",Fw="16px",m0=4e3,Xw=356,Qw=14,Kw=45,Ww=200;function Kn(...o){return o.filter(Boolean).join(" ")}function Zw(o){const[a,s]=o.split("-"),i=[];return a&&i.push(a),s&&i.push(s),i}const Jw=o=>{var a,s,i,c,d,m,h,p,g;const{invert:y,toast:b,unstyled:N,interacting:E,setHeights:j,visibleToasts:S,heights:_,index:L,toasts:R,expanded:T,removeToast:A,defaultRichColors:D,closeButton:Y,style:z,cancelButtonStyle:I,actionButtonStyle:G,className:Q="",descriptionClassName:ae="",duration:le,position:K,gap:se,expandByDefault:oe,classNames:M,icons:H,closeButtonAriaLabel:ee="Close toast"}=o,[ue,pe]=ie.useState(null),[k,C]=ie.useState(null),[P,W]=ie.useState(!1),[ne,de]=ie.useState(!1),[re,ce]=ie.useState(!1),[xe,Ne]=ie.useState(!1),[Ce,Me]=ie.useState(!1),[nt,ht]=ie.useState(0),[Vt,wt]=ie.useState(0),Xe=ie.useRef(b.duration||le||m0),Pn=ie.useRef(null),At=ie.useRef(null),tn=L===0,vn=L+1<=S,at=b.type,Bt=b.dismissible!==!1,Vn=b.className||"",Bn=b.descriptionClassName||"",Ot=ie.useMemo(()=>_.findIndex(Te=>Te.toastId===b.id)||0,[_,b.id]),pt=ie.useMemo(()=>{var Te;return(Te=b.closeButton)!=null?Te:Y},[b.closeButton,Y]),ge=ie.useMemo(()=>b.duration||le||m0,[b.duration,le]),X=ie.useRef(0),je=ie.useRef(0),qe=ie.useRef(0),Pe=ie.useRef(null),[un,nn]=K.split("-"),me=ie.useMemo(()=>_.reduce((Te,dt,st)=>st>=Ot?Te:Te+dt.height,0),[_,Ot]),ot=Gw(),Gt=b.invert||y,Mn=at==="loading";je.current=ie.useMemo(()=>Ot*se+me,[Ot,me]),ie.useEffect(()=>{Xe.current=ge},[ge]),ie.useEffect(()=>{W(!0)},[]),ie.useEffect(()=>{const Te=At.current;if(Te){const dt=Te.getBoundingClientRect().height;return wt(dt),j(st=>[{toastId:b.id,height:dt,position:b.position},...st]),()=>j(st=>st.filter(Tt=>Tt.toastId!==b.id))}},[j,b.id]),ie.useLayoutEffect(()=>{if(!P)return;const Te=At.current,dt=Te.style.height;Te.style.height="auto";const st=Te.getBoundingClientRect().height;Te.style.height=dt,wt(st),j(Tt=>Tt.find(jt=>jt.toastId===b.id)?Tt.map(jt=>jt.toastId===b.id?{...jt,height:st}:jt):[{toastId:b.id,height:st,position:b.position},...Tt])},[P,b.title,b.description,j,b.id,b.jsx,b.action,b.cancel]);const qt=ie.useCallback(()=>{de(!0),ht(je.current),j(Te=>Te.filter(dt=>dt.toastId!==b.id)),setTimeout(()=>{A(b)},Ww)},[b,A,j,je]);ie.useEffect(()=>{if(b.promise&&at==="loading"||b.duration===1/0||b.type==="loading")return;let Te;return T||E||ot?(()=>{if(qe.current<X.current){const Tt=new Date().getTime()-X.current;Xe.current=Xe.current-Tt}qe.current=new Date().getTime()})():(()=>{Xe.current!==1/0&&(X.current=new Date().getTime(),Te=setTimeout(()=>{b.onAutoClose==null||b.onAutoClose.call(b,b),qt()},Xe.current))})(),()=>clearTimeout(Te)},[T,E,b,at,ot,qt]),ie.useEffect(()=>{b.delete&&(qt(),b.onDismiss==null||b.onDismiss.call(b,b))},[qt,b.delete]);function Us(){var Te;if(H?.loading){var dt;return ie.createElement("div",{className:Kn(M?.loader,b==null||(dt=b.classNames)==null?void 0:dt.loader,"sonner-loader"),"data-visible":at==="loading"},H.loading)}return ie.createElement(Dw,{className:Kn(M?.loader,b==null||(Te=b.classNames)==null?void 0:Te.loader),visible:at==="loading"})}const ns=b.icon||H?.[at]||Aw(at);var qn,Gs;return ie.createElement("li",{tabIndex:0,ref:At,className:Kn(Q,Vn,M?.toast,b==null||(a=b.classNames)==null?void 0:a.toast,M?.default,M?.[at],b==null||(s=b.classNames)==null?void 0:s[at]),"data-sonner-toast":"","data-rich-colors":(qn=b.richColors)!=null?qn:D,"data-styled":!(b.jsx||b.unstyled||N),"data-mounted":P,"data-promise":!!b.promise,"data-swiped":Ce,"data-removed":ne,"data-visible":vn,"data-y-position":un,"data-x-position":nn,"data-index":L,"data-front":tn,"data-swiping":re,"data-dismissible":Bt,"data-type":at,"data-invert":Gt,"data-swipe-out":xe,"data-swipe-direction":k,"data-expanded":!!(T||oe&&P),"data-testid":b.testId,style:{"--index":L,"--toasts-before":L,"--z-index":R.length-L,"--offset":`${ne?nt:je.current}px`,"--initial-height":oe?"auto":`${Vt}px`,...z,...b.style},onDragEnd:()=>{ce(!1),pe(null),Pe.current=null},onPointerDown:Te=>{Te.button!==2&&(Mn||!Bt||(Pn.current=new Date,ht(je.current),Te.target.setPointerCapture(Te.pointerId),Te.target.tagName!=="BUTTON"&&(ce(!0),Pe.current={x:Te.clientX,y:Te.clientY})))},onPointerUp:()=>{var Te,dt,st;if(xe||!Bt)return;Pe.current=null;const Tt=Number(((Te=At.current)==null?void 0:Te.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),as=Number(((dt=At.current)==null?void 0:dt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),jt=new Date().getTime()-((st=Pn.current)==null?void 0:st.getTime()),yt=ue==="x"?Tt:as,vt=Math.abs(yt)/jt;if(Math.abs(yt)>=Kw||vt>.11){ht(je.current),b.onDismiss==null||b.onDismiss.call(b,b),C(ue==="x"?Tt>0?"right":"left":as>0?"down":"up"),qt(),Ne(!0);return}else{var rt,Dt;(rt=At.current)==null||rt.style.setProperty("--swipe-amount-x","0px"),(Dt=At.current)==null||Dt.style.setProperty("--swipe-amount-y","0px")}Me(!1),ce(!1),pe(null)},onPointerMove:Te=>{var dt,st,Tt;if(!Pe.current||!Bt||((dt=window.getSelection())==null?void 0:dt.toString().length)>0)return;const jt=Te.clientY-Pe.current.y,yt=Te.clientX-Pe.current.x;var vt;const rt=(vt=o.swipeDirections)!=null?vt:Zw(K);!ue&&(Math.abs(yt)>1||Math.abs(jt)>1)&&pe(Math.abs(yt)>Math.abs(jt)?"x":"y");let Dt={x:0,y:0};const Hs=ta=>1/(1.5+Math.abs(ta)/20);if(ue==="y"){if(rt.includes("top")||rt.includes("bottom"))if(rt.includes("top")&&jt<0||rt.includes("bottom")&&jt>0)Dt.y=jt;else{const ta=jt*Hs(jt);Dt.y=Math.abs(ta)<Math.abs(jt)?ta:jt}}else if(ue==="x"&&(rt.includes("left")||rt.includes("right")))if(rt.includes("left")&&yt<0||rt.includes("right")&&yt>0)Dt.x=yt;else{const ta=yt*Hs(yt);Dt.x=Math.abs(ta)<Math.abs(yt)?ta:yt}(Math.abs(Dt.x)>0||Math.abs(Dt.y)>0)&&Me(!0),(st=At.current)==null||st.style.setProperty("--swipe-amount-x",`${Dt.x}px`),(Tt=At.current)==null||Tt.style.setProperty("--swipe-amount-y",`${Dt.y}px`)}},pt&&!b.jsx&&at!=="loading"?ie.createElement("button",{"aria-label":ee,"data-disabled":Mn,"data-close-button":!0,onClick:Mn||!Bt?()=>{}:()=>{qt(),b.onDismiss==null||b.onDismiss.call(b,b)},className:Kn(M?.closeButton,b==null||(i=b.classNames)==null?void 0:i.closeButton)},(Gs=H?.close)!=null?Gs:Uw):null,(at||b.icon||b.promise)&&b.icon!==null&&(H?.[at]!==null||b.icon)?ie.createElement("div",{"data-icon":"",className:Kn(M?.icon,b==null||(c=b.classNames)==null?void 0:c.icon)},b.promise||b.type==="loading"&&!b.icon?b.icon||Us():null,b.type!=="loading"?ns:null):null,ie.createElement("div",{"data-content":"",className:Kn(M?.content,b==null||(d=b.classNames)==null?void 0:d.content)},ie.createElement("div",{"data-title":"",className:Kn(M?.title,b==null||(m=b.classNames)==null?void 0:m.title)},b.jsx?b.jsx:typeof b.title=="function"?b.title():b.title),b.description?ie.createElement("div",{"data-description":"",className:Kn(ae,Bn,M?.description,b==null||(h=b.classNames)==null?void 0:h.description)},typeof b.description=="function"?b.description():b.description):null),ie.isValidElement(b.cancel)?b.cancel:b.cancel&&fl(b.cancel)?ie.createElement("button",{"data-button":!0,"data-cancel":!0,style:b.cancelButtonStyle||I,onClick:Te=>{fl(b.cancel)&&Bt&&(b.cancel.onClick==null||b.cancel.onClick.call(b.cancel,Te),qt())},className:Kn(M?.cancelButton,b==null||(p=b.classNames)==null?void 0:p.cancelButton)},b.cancel.label):null,ie.isValidElement(b.action)?b.action:b.action&&fl(b.action)?ie.createElement("button",{"data-button":!0,"data-action":!0,style:b.actionButtonStyle||G,onClick:Te=>{fl(b.action)&&(b.action.onClick==null||b.action.onClick.call(b.action,Te),!Te.defaultPrevented&&qt())},className:Kn(M?.actionButton,b==null||(g=b.classNames)==null?void 0:g.actionButton)},b.action.label):null)};function h0(){if(typeof window>"u"||typeof document>"u")return"ltr";const o=document.documentElement.getAttribute("dir");return o==="auto"||!o?window.getComputedStyle(document.documentElement).direction:o}function e1(o,a){const s={};return[o,a].forEach((i,c)=>{const d=c===1,m=d?"--mobile-offset":"--offset",h=d?Fw:$w;function p(g){["top","right","bottom","left"].forEach(y=>{s[`${m}-${y}`]=typeof g=="number"?`${g}px`:g})}typeof i=="number"||typeof i=="string"?p(i):typeof i=="object"?["top","right","bottom","left"].forEach(g=>{i[g]===void 0?s[`${m}-${g}`]=h:s[`${m}-${g}`]=typeof i[g]=="number"?`${i[g]}px`:i[g]}):p(h)}),s}const t1=ie.forwardRef(function(a,s){const{id:i,invert:c,position:d="bottom-right",hotkey:m=["altKey","KeyT"],expand:h,closeButton:p,className:g,offset:y,mobileOffset:b,theme:N="light",richColors:E,duration:j,style:S,visibleToasts:_=Yw,toastOptions:L,dir:R=h0(),gap:T=Qw,icons:A,containerAriaLabel:D="Notifications"}=a,[Y,z]=ie.useState([]),I=ie.useMemo(()=>i?Y.filter(P=>P.toasterId===i):Y.filter(P=>!P.toasterId),[Y,i]),G=ie.useMemo(()=>Array.from(new Set([d].concat(I.filter(P=>P.position).map(P=>P.position)))),[I,d]),[Q,ae]=ie.useState([]),[le,K]=ie.useState(!1),[se,oe]=ie.useState(!1),[M,H]=ie.useState(N!=="system"?N:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ee=ie.useRef(null),ue=m.join("+").replace(/Key/g,"").replace(/Digit/g,""),pe=ie.useRef(null),k=ie.useRef(!1),C=ie.useCallback(P=>{z(W=>{var ne;return(ne=W.find(de=>de.id===P.id))!=null&&ne.delete||ln.dismiss(P.id),W.filter(({id:de})=>de!==P.id)})},[]);return ie.useEffect(()=>ln.subscribe(P=>{if(P.dismiss){requestAnimationFrame(()=>{z(W=>W.map(ne=>ne.id===P.id?{...ne,delete:!0}:ne))});return}setTimeout(()=>{VE.flushSync(()=>{z(W=>{const ne=W.findIndex(de=>de.id===P.id);return ne!==-1?[...W.slice(0,ne),{...W[ne],...P},...W.slice(ne+1)]:[P,...W]})})})}),[Y]),ie.useEffect(()=>{if(N!=="system"){H(N);return}if(N==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;const P=window.matchMedia("(prefers-color-scheme: dark)");try{P.addEventListener("change",({matches:W})=>{H(W?"dark":"light")})}catch{P.addListener(({matches:ne})=>{try{H(ne?"dark":"light")}catch(de){console.error(de)}})}},[N]),ie.useEffect(()=>{Y.length<=1&&K(!1)},[Y]),ie.useEffect(()=>{const P=W=>{var ne;if(m.every(ce=>W[ce]||W.code===ce)){var re;K(!0),(re=ee.current)==null||re.focus()}W.code==="Escape"&&(document.activeElement===ee.current||(ne=ee.current)!=null&&ne.contains(document.activeElement))&&K(!1)};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[m]),ie.useEffect(()=>{if(ee.current)return()=>{pe.current&&(pe.current.focus({preventScroll:!0}),pe.current=null,k.current=!1)}},[ee.current]),ie.createElement("section",{ref:s,"aria-label":`${D} ${ue}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},G.map((P,W)=>{var ne;const[de,re]=P.split("-");return I.length?ie.createElement("ol",{key:P,dir:R==="auto"?h0():R,tabIndex:-1,ref:ee,className:g,"data-sonner-toaster":!0,"data-sonner-theme":M,"data-y-position":de,"data-x-position":re,style:{"--front-toast-height":`${((ne=Q[0])==null?void 0:ne.height)||0}px`,"--width":`${Xw}px`,"--gap":`${T}px`,...S,...e1(y,b)},onBlur:ce=>{k.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(k.current=!1,pe.current&&(pe.current.focus({preventScroll:!0}),pe.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||k.current||(k.current=!0,pe.current=ce.relatedTarget)},onMouseEnter:()=>K(!0),onMouseMove:()=>K(!0),onMouseLeave:()=>{se||K(!1)},onDragEnd:()=>K(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||oe(!0)},onPointerUp:()=>oe(!1)},I.filter(ce=>!ce.position&&W===0||ce.position===P).map((ce,xe)=>{var Ne,Ce;return ie.createElement(Jw,{key:ce.id,icons:A,index:xe,toast:ce,defaultRichColors:E,duration:(Ne=L?.duration)!=null?Ne:j,className:L?.className,descriptionClassName:L?.descriptionClassName,invert:c,visibleToasts:_,closeButton:(Ce=L?.closeButton)!=null?Ce:p,interacting:se,position:P,style:L?.style,unstyled:L?.unstyled,classNames:L?.classNames,cancelButtonStyle:L?.cancelButtonStyle,actionButtonStyle:L?.actionButtonStyle,closeButtonAriaLabel:L?.closeButtonAriaLabel,removeToast:C,toasts:I.filter(Me=>Me.position==ce.position),heights:Q.filter(Me=>Me.position==ce.position),setHeights:ae,expandByDefault:h,gap:T,expanded:le,swipeDirections:a.swipeDirections})})):null}))}),n1="modulepreload",a1=function(o){return"/liargame/"+o},p0={},_r=function(a,s,i){let c=Promise.resolve();if(s&&s.length>0){let p=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),h=m?.nonce||m?.getAttribute("nonce");c=p(s.map(g=>{if(g=a1(g),g in p0)return;p0[g]=!0;const y=g.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${b}`))return;const N=document.createElement("link");if(N.rel=y?"stylesheet":n1,y||(N.as="script"),N.crossOrigin="",N.href=g,h&&N.setAttribute("nonce",h),document.head.appendChild(N),y)return new Promise((E,j)=>{N.addEventListener("load",E),N.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${g}`)))})}))}function d(m){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=m,window.dispatchEvent(h),!h.defaultPrevented)throw m}return c.then(m=>{for(const h of m||[])h.status==="rejected"&&d(h.reason);return a().catch(d)})};var By=function(){return null};const qy=new QE({defaultOptions:{queries:{staleTime:1e3*60*5,gcTime:1e3*60*30,retry:(o,a)=>a instanceof Error&&a.message.includes("401")||a instanceof Error&&a.message.includes("403")||a instanceof Error&&a.message.includes("404")?!1:o<2,refetchOnWindowFocus:!1},mutations:{retry:!1}}});var Yy=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),s1="VisuallyHidden",am=x.forwardRef((o,a)=>l.jsx(Ve.span,{...o,ref:a,style:{...Yy,...o.style}}));am.displayName=s1;var sm="ToastProvider",[rm,r1,i1]=ly("Toast"),[$y]=Qi("Toast",[i1]),[o1,Kl]=$y(sm),Fy=o=>{const{__scopeToast:a,label:s="Notification",duration:i=5e3,swipeDirection:c="right",swipeThreshold:d=50,children:m}=o,[h,p]=x.useState(null),[g,y]=x.useState(0),b=x.useRef(!1),N=x.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${sm}\`. Expected non-empty \`string\`.`),l.jsx(rm.Provider,{scope:a,children:l.jsx(o1,{scope:a,label:s,duration:i,swipeDirection:c,swipeThreshold:d,toastCount:g,viewport:h,onViewportChange:p,onToastAdd:x.useCallback(()=>y(E=>E+1),[]),onToastRemove:x.useCallback(()=>y(E=>E-1),[]),isFocusedToastEscapeKeyDownRef:b,isClosePausedRef:N,children:m})})};Fy.displayName=sm;var Xy="ToastViewport",l1=["F8"],Df="toast.viewportPause",Mf="toast.viewportResume",Qy=x.forwardRef((o,a)=>{const{__scopeToast:s,hotkey:i=l1,label:c="Notifications ({hotkey})",...d}=o,m=Kl(Xy,s),h=r1(s),p=x.useRef(null),g=x.useRef(null),y=x.useRef(null),b=x.useRef(null),N=Ut(a,b,m.onViewportChange),E=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=m.toastCount>0;x.useEffect(()=>{const _=L=>{i.length!==0&&i.every(T=>L[T]||L.code===T)&&b.current?.focus()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[i]),x.useEffect(()=>{const _=p.current,L=b.current;if(j&&_&&L){const R=()=>{if(!m.isClosePausedRef.current){const Y=new CustomEvent(Df);L.dispatchEvent(Y),m.isClosePausedRef.current=!0}},T=()=>{if(m.isClosePausedRef.current){const Y=new CustomEvent(Mf);L.dispatchEvent(Y),m.isClosePausedRef.current=!1}},A=Y=>{!_.contains(Y.relatedTarget)&&T()},D=()=>{_.contains(document.activeElement)||T()};return _.addEventListener("focusin",R),_.addEventListener("focusout",A),_.addEventListener("pointermove",R),_.addEventListener("pointerleave",D),window.addEventListener("blur",R),window.addEventListener("focus",T),()=>{_.removeEventListener("focusin",R),_.removeEventListener("focusout",A),_.removeEventListener("pointermove",R),_.removeEventListener("pointerleave",D),window.removeEventListener("blur",R),window.removeEventListener("focus",T)}}},[j,m.isClosePausedRef]);const S=x.useCallback(({tabbingDirection:_})=>{const R=h().map(T=>{const A=T.ref.current,D=[A,...S1(A)];return _==="forwards"?D:D.reverse()});return(_==="forwards"?R.reverse():R).flat()},[h]);return x.useEffect(()=>{const _=b.current;if(_){const L=R=>{const T=R.altKey||R.ctrlKey||R.metaKey;if(R.key==="Tab"&&!T){const D=document.activeElement,Y=R.shiftKey;if(R.target===_&&Y){g.current?.focus();return}const G=S({tabbingDirection:Y?"backwards":"forwards"}),Q=G.findIndex(ae=>ae===D);gd(G.slice(Q+1))?R.preventDefault():Y?g.current?.focus():y.current?.focus()}};return _.addEventListener("keydown",L),()=>_.removeEventListener("keydown",L)}},[h,S]),l.jsxs(vE,{ref:p,role:"region","aria-label":c.replace("{hotkey}",E),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&l.jsx(If,{ref:g,onFocusFromOutsideViewport:()=>{const _=S({tabbingDirection:"forwards"});gd(_)}}),l.jsx(rm.Slot,{scope:s,children:l.jsx(Ve.ol,{tabIndex:-1,...d,ref:N})}),j&&l.jsx(If,{ref:y,onFocusFromOutsideViewport:()=>{const _=S({tabbingDirection:"backwards"});gd(_)}})]})});Qy.displayName=Xy;var Ky="ToastFocusProxy",If=x.forwardRef((o,a)=>{const{__scopeToast:s,onFocusFromOutsideViewport:i,...c}=o,d=Kl(Ky,s);return l.jsx(am,{tabIndex:0,...c,ref:a,style:{position:"fixed"},onFocus:m=>{const h=m.relatedTarget;!d.viewport?.contains(h)&&i()}})});If.displayName=Ky;var Ki="Toast",c1="toast.swipeStart",u1="toast.swipeMove",d1="toast.swipeCancel",f1="toast.swipeEnd",Wy=x.forwardRef((o,a)=>{const{forceMount:s,open:i,defaultOpen:c,onOpenChange:d,...m}=o,[h,p]=Dl({prop:i,defaultProp:c??!0,onChange:d,caller:Ki});return l.jsx(Mr,{present:s||h,children:l.jsx(p1,{open:h,...m,ref:a,onClose:()=>p(!1),onPause:An(o.onPause),onResume:An(o.onResume),onSwipeStart:Ge(o.onSwipeStart,g=>{g.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ge(o.onSwipeMove,g=>{const{x:y,y:b}=g.detail.delta;g.currentTarget.setAttribute("data-swipe","move"),g.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${y}px`),g.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${b}px`)}),onSwipeCancel:Ge(o.onSwipeCancel,g=>{g.currentTarget.setAttribute("data-swipe","cancel"),g.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),g.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),g.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),g.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ge(o.onSwipeEnd,g=>{const{x:y,y:b}=g.detail.delta;g.currentTarget.setAttribute("data-swipe","end"),g.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),g.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),g.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${y}px`),g.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${b}px`),p(!1)})})})});Wy.displayName=Ki;var[m1,h1]=$y(Ki,{onClose(){}}),p1=x.forwardRef((o,a)=>{const{__scopeToast:s,type:i="foreground",duration:c,open:d,onClose:m,onEscapeKeyDown:h,onPause:p,onResume:g,onSwipeStart:y,onSwipeMove:b,onSwipeCancel:N,onSwipeEnd:E,...j}=o,S=Kl(Ki,s),[_,L]=x.useState(null),R=Ut(a,se=>L(se)),T=x.useRef(null),A=x.useRef(null),D=c||S.duration,Y=x.useRef(0),z=x.useRef(D),I=x.useRef(0),{onToastAdd:G,onToastRemove:Q}=S,ae=An(()=>{_?.contains(document.activeElement)&&S.viewport?.focus(),m()}),le=x.useCallback(se=>{!se||se===1/0||(window.clearTimeout(I.current),Y.current=new Date().getTime(),I.current=window.setTimeout(ae,se))},[ae]);x.useEffect(()=>{const se=S.viewport;if(se){const oe=()=>{le(z.current),g?.()},M=()=>{const H=new Date().getTime()-Y.current;z.current=z.current-H,window.clearTimeout(I.current),p?.()};return se.addEventListener(Df,M),se.addEventListener(Mf,oe),()=>{se.removeEventListener(Df,M),se.removeEventListener(Mf,oe)}}},[S.viewport,D,p,g,le]),x.useEffect(()=>{d&&!S.isClosePausedRef.current&&le(D)},[d,D,S.isClosePausedRef,le]),x.useEffect(()=>(G(),()=>Q()),[G,Q]);const K=x.useMemo(()=>_?sv(_):null,[_]);return S.viewport?l.jsxs(l.Fragment,{children:[K&&l.jsx(g1,{__scopeToast:s,role:"status","aria-live":i==="foreground"?"assertive":"polite",children:K}),l.jsx(m1,{scope:s,onClose:ae,children:Zf.createPortal(l.jsx(rm.ItemSlot,{scope:s,children:l.jsx(xE,{asChild:!0,onEscapeKeyDown:Ge(h,()=>{S.isFocusedToastEscapeKeyDownRef.current||ae(),S.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(Ve.li,{tabIndex:0,"data-state":d?"open":"closed","data-swipe-direction":S.swipeDirection,...j,ref:R,style:{userSelect:"none",touchAction:"none",...o.style},onKeyDown:Ge(o.onKeyDown,se=>{se.key==="Escape"&&(h?.(se.nativeEvent),se.nativeEvent.defaultPrevented||(S.isFocusedToastEscapeKeyDownRef.current=!0,ae()))}),onPointerDown:Ge(o.onPointerDown,se=>{se.button===0&&(T.current={x:se.clientX,y:se.clientY})}),onPointerMove:Ge(o.onPointerMove,se=>{if(!T.current)return;const oe=se.clientX-T.current.x,M=se.clientY-T.current.y,H=!!A.current,ee=["left","right"].includes(S.swipeDirection),ue=["left","up"].includes(S.swipeDirection)?Math.min:Math.max,pe=ee?ue(0,oe):0,k=ee?0:ue(0,M),C=se.pointerType==="touch"?10:2,P={x:pe,y:k},W={originalEvent:se,delta:P};H?(A.current=P,ml(u1,b,W,{discrete:!1})):g0(P,S.swipeDirection,C)?(A.current=P,ml(c1,y,W,{discrete:!1}),se.target.setPointerCapture(se.pointerId)):(Math.abs(oe)>C||Math.abs(M)>C)&&(T.current=null)}),onPointerUp:Ge(o.onPointerUp,se=>{const oe=A.current,M=se.target;if(M.hasPointerCapture(se.pointerId)&&M.releasePointerCapture(se.pointerId),A.current=null,T.current=null,oe){const H=se.currentTarget,ee={originalEvent:se,delta:oe};g0(oe,S.swipeDirection,S.swipeThreshold)?ml(f1,E,ee,{discrete:!0}):ml(d1,N,ee,{discrete:!0}),H.addEventListener("click",ue=>ue.preventDefault(),{once:!0})}})})})}),S.viewport)})]}):null}),g1=o=>{const{__scopeToast:a,children:s,...i}=o,c=Kl(Ki,a),[d,m]=x.useState(!1),[h,p]=x.useState(!1);return v1(()=>m(!0)),x.useEffect(()=>{const g=window.setTimeout(()=>p(!0),1e3);return()=>window.clearTimeout(g)},[]),h?null:l.jsx(cy,{asChild:!0,children:l.jsx(am,{...i,children:d&&l.jsxs(l.Fragment,{children:[c.label," ",s]})})})},b1="ToastTitle",Zy=x.forwardRef((o,a)=>{const{__scopeToast:s,...i}=o;return l.jsx(Ve.div,{...i,ref:a})});Zy.displayName=b1;var y1="ToastDescription",Jy=x.forwardRef((o,a)=>{const{__scopeToast:s,...i}=o;return l.jsx(Ve.div,{...i,ref:a})});Jy.displayName=y1;var ev="ToastAction",tv=x.forwardRef((o,a)=>{const{altText:s,...i}=o;return s.trim()?l.jsx(av,{altText:s,asChild:!0,children:l.jsx(im,{...i,ref:a})}):(console.error(`Invalid prop \`altText\` supplied to \`${ev}\`. Expected non-empty \`string\`.`),null)});tv.displayName=ev;var nv="ToastClose",im=x.forwardRef((o,a)=>{const{__scopeToast:s,...i}=o,c=h1(nv,s);return l.jsx(av,{asChild:!0,children:l.jsx(Ve.button,{type:"button",...i,ref:a,onClick:Ge(o.onClick,c.onClose)})})});im.displayName=nv;var av=x.forwardRef((o,a)=>{const{__scopeToast:s,altText:i,...c}=o;return l.jsx(Ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...c,ref:a})});function sv(o){const a=[];return Array.from(o.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&a.push(i.textContent),x1(i)){const c=i.ariaHidden||i.hidden||i.style.display==="none",d=i.dataset.radixToastAnnounceExclude==="";if(!c)if(d){const m=i.dataset.radixToastAnnounceAlt;m&&a.push(m)}else a.push(...sv(i))}}),a}function ml(o,a,s,{discrete:i}){const c=s.originalEvent.currentTarget,d=new CustomEvent(o,{bubbles:!0,cancelable:!0,detail:s});a&&c.addEventListener(o,a,{once:!0}),i?SE(c,d):c.dispatchEvent(d)}var g0=(o,a,s=0)=>{const i=Math.abs(o.x),c=Math.abs(o.y),d=i>c;return a==="left"||a==="right"?d&&i>s:!d&&c>s};function v1(o=()=>{}){const a=An(o);Zn(()=>{let s=0,i=0;return s=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(a)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(i)}},[a])}function x1(o){return o.nodeType===o.ELEMENT_NODE}function S1(o){const a=[],s=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const c=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||c?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)a.push(s.currentNode);return a}function gd(o){const a=document.activeElement;return o.some(s=>s===a?!0:(s.focus(),document.activeElement!==a))}var N1=Fy,rv=Qy,iv=Wy,ov=Zy,lv=Jy,cv=tv,uv=im;const b0=o=>typeof o=="boolean"?`${o}`:o===0?"0":o,y0=Dy,Wl=(o,a)=>s=>{var i;if(a?.variants==null)return y0(o,s?.class,s?.className);const{variants:c,defaultVariants:d}=a,m=Object.keys(c).map(g=>{const y=s?.[g],b=d?.[g];if(y===null)return null;const N=b0(y)||b0(b);return c[g][N]}),h=s&&Object.entries(s).reduce((g,y)=>{let[b,N]=y;return N===void 0||(g[b]=N),g},{}),p=a==null||(i=a.compoundVariants)===null||i===void 0?void 0:i.reduce((g,y)=>{let{class:b,className:N,...E}=y;return Object.entries(E).every(j=>{let[S,_]=j;return Array.isArray(_)?_.includes({...d,...h}[S]):{...d,...h}[S]===_})?[...g,b,N]:g},[]);return y0(o,m,p,s?.class,s?.className)};function ye(...o){return KE(Dy(o))}const E1=N1,dv=x.forwardRef(({className:o,...a},s)=>l.jsx(rv,{ref:s,className:ye("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",o),...a}));dv.displayName=rv.displayName;const w1=Wl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),fv=x.forwardRef(({className:o,variant:a,...s},i)=>l.jsx(iv,{ref:i,className:ye(w1({variant:a}),o),...s}));fv.displayName=iv.displayName;const T1=x.forwardRef(({className:o,...a},s)=>l.jsx(cv,{ref:s,className:ye("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-xs font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",o),...a}));T1.displayName=cv.displayName;const mv=x.forwardRef(({className:o,...a},s)=>l.jsx(uv,{ref:s,className:ye("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",o),"toast-close":"",...a,children:l.jsx(My,{className:"h-4 w-4"})}));mv.displayName=uv.displayName;const hv=x.forwardRef(({className:o,...a},s)=>l.jsx(ov,{ref:s,className:ye("text-sm font-semibold",o),...a}));hv.displayName=ov.displayName;const pv=x.forwardRef(({className:o,...a},s)=>l.jsx(lv,{ref:s,className:ye("text-sm opacity-90",o),...a}));pv.displayName=lv.displayName;const j1=1,R1=1e6;let bd=0;function C1(){return bd=(bd+1)%Number.MAX_SAFE_INTEGER,bd.toString()}const yd=new Map,v0=o=>{if(yd.has(o))return;const a=setTimeout(()=>{yd.delete(o),Gi({type:"REMOVE_TOAST",toastId:o})},R1);yd.set(o,a)},_1=(o,a)=>{switch(a.type){case"ADD_TOAST":return{...o,toasts:[a.toast,...o.toasts].slice(0,j1)};case"UPDATE_TOAST":return{...o,toasts:o.toasts.map(s=>s.id===a.toast.id?{...s,...a.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=a;return s?v0(s):o.toasts.forEach(i=>{v0(i.id)}),{...o,toasts:o.toasts.map(i=>i.id===s||s===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return a.toastId===void 0?{...o,toasts:[]}:{...o,toasts:o.toasts.filter(s=>s.id!==a.toastId)}}},jl=[];let Rl={toasts:[]};function Gi(o){Rl=_1(Rl,o),jl.forEach(a=>{a(Rl)})}function hl({...o}){const a=C1(),s=c=>Gi({type:"UPDATE_TOAST",toast:{...c,id:a}}),i=()=>Gi({type:"DISMISS_TOAST",toastId:a});return Gi({type:"ADD_TOAST",toast:{...o,id:a,open:!0,onOpenChange:c=>{c||i()}}}),{id:a,dismiss:i,update:s}}function Wa(){const[o,a]=x.useState(Rl);return x.useEffect(()=>(jl.push(a),()=>{const s=jl.indexOf(a);s>-1&&jl.splice(s,1)}),[o]),{...o,toast:Object.assign(hl,{success:(s,i)=>hl({title:s,description:i,variant:"default"}),error:(s,i)=>hl({title:s,description:i,variant:"destructive"}),info:(s,i)=>hl({title:s,description:i,variant:"default"})}),dismiss:s=>Gi({type:"DISMISS_TOAST",toastId:s})}}function gv(){const{toasts:o}=Wa();return l.jsxs(E1,{children:[o.map(function({id:a,title:s,description:i,action:c,...d}){return l.jsxs(fv,{...d,children:[l.jsxs("div",{className:"grid gap-1",children:[s&&l.jsx(hv,{children:s}),i&&l.jsx(pv,{children:i})]}),c,l.jsx(mv,{})]},a)}),l.jsx(dv,{})]})}const A1={light:{palette:{background:{default:"#0f0e1f",raised:"rgba(21, 20, 43, 0.88)",brand:"#1d1a38",inverse:"#f6f5ff"},surface:{base:"rgba(30, 28, 58, 0.82)",overlay:"rgba(44, 41, 79, 0.74)",glass:"rgba(90, 83, 180, 0.12)",sunken:"rgba(12, 11, 24, 0.88)"},text:{primary:"#f8f7ff",secondary:"rgba(232, 229, 255, 0.72)",muted:"rgba(196, 192, 232, 0.56)",inverse:"#120d2d"},border:{subtle:"rgba(255, 255, 255, 0.08)",strong:"rgba(130, 120, 225, 0.28)",accent:"#8b7bff"},primary:{50:"#f5f2ff",100:"#e7e0ff",200:"#d0c0ff",300:"#b29aff",400:"#9473ff",500:"#7650ff",600:"#5c38e6",700:"#4528be",800:"#301b8f",900:"#1c115d"},secondary:{50:"#f3f7ff",100:"#dae4ff",200:"#b6c9ff",300:"#8fa8ff",400:"#6587ff",500:"#3f69ff",600:"#2c52db",700:"#1e3fae",800:"#132a7a",900:"#09184c"},accent:{50:"#fff3fc",100:"#ffd6f5",200:"#ffafea",300:"#ff86da",400:"#ff5ac5",500:"#ff3aac",600:"#ed228f",700:"#c21672",800:"#911052",900:"#5b0b33"},neutral:{50:"#f3f4f7",100:"#e1e3eb",200:"#c6c8d5",300:"#a8abc0",400:"#898dad",500:"#6c7096",600:"#545679",700:"#3d3f5b",800:"#292b3f",900:"#191a29"},success:{50:"#ecfef5",100:"#c1f7da",200:"#8fecc0",300:"#5ddfa4",400:"#33cf88",500:"#15b86f",600:"#0f9559",700:"#0a7344",800:"#06502d",900:"#032f1a"},warning:{50:"#fff8eb",100:"#ffe0b5",200:"#ffc17b",300:"#ffa247",400:"#ff8720",500:"#f76e08",600:"#d45703",700:"#a94302",800:"#7a3001",900:"#4c1d00"},danger:{50:"#fff1f1",100:"#ffd0d4",200:"#ffa0aa",300:"#ff6f82",400:"#ff4864",500:"#f32d4c",600:"#d11f3c",700:"#a41730",800:"#750f22",900:"#450815"},info:{50:"#edf6ff",100:"#c8e4ff",200:"#9fcfff",300:"#78b8ff",400:"#55a1ff",500:"#3589ff",600:"#256cd8",700:"#1a52ad",800:"#123a7a",900:"#0a244d"}}},dark:{palette:{background:{default:"#06060f",raised:"rgba(18, 18, 35, 0.88)",brand:"#0b0b1d",inverse:"#f5f4ff"},surface:{base:"rgba(20, 20, 40, 0.84)",overlay:"rgba(32, 32, 68, 0.74)",glass:"rgba(118, 104, 220, 0.14)",sunken:"rgba(8, 8, 16, 0.88)"},text:{primary:"#f5f4ff",secondary:"rgba(223, 219, 255, 0.72)",muted:"rgba(178, 174, 219, 0.5)",inverse:"#0c091d"},border:{subtle:"rgba(255, 255, 255, 0.06)",strong:"rgba(121, 108, 215, 0.28)",accent:"#7c6cf5"},primary:{50:"#efe9ff",100:"#d8caff",200:"#bfa3ff",300:"#a07bff",400:"#8458ff",500:"#6a3cff",600:"#5229d8",700:"#3b1ca8",800:"#271374",900:"#160a44"},secondary:{50:"#edf2ff",100:"#cddbff",200:"#a8c1ff",300:"#7da1ff",400:"#5683ff",500:"#3767ff",600:"#2550d8",700:"#183ca8",800:"#0f2872",900:"#091846"},accent:{50:"#ffeafd",100:"#ffcbf5",200:"#ffa2e8",300:"#ff78d8",400:"#ff51c3",500:"#f731aa",600:"#d61d8c",700:"#aa146b",800:"#7a0d4a",900:"#4d0630"},neutral:{50:"#f2f3f7",100:"#d9dce6",200:"#b9bfd1",300:"#959bb8",400:"#747aa1",500:"#5a6184",600:"#444a67",700:"#2f344a",800:"#1d2133",900:"#111320"},success:{50:"#e8fdf0",100:"#b9f5d2",200:"#80e8b2",300:"#4ddc95",400:"#23cf7a",500:"#12b563",600:"#0c904d",700:"#086d39",800:"#054824",900:"#022813"},warning:{50:"#fff6ea",100:"#ffddb2",200:"#ffbe76",300:"#ff9d3f",400:"#ff851b",500:"#f26c06",600:"#cf5603",700:"#a24402",800:"#733001",900:"#451c00"},danger:{50:"#ffecee",100:"#ffc8d0",200:"#ff95a8",300:"#ff647f",400:"#ff3e61",500:"#ec2047",600:"#c71339",700:"#990e2c",800:"#69091e",900:"#3d0512"},info:{50:"#e9f4ff",100:"#c2e0ff",200:"#97c8ff",300:"#6dafff",400:"#4996ff",500:"#2f7df2",600:"#215fcc",700:"#16459d",800:"#0d2d6c",900:"#051a40"}}},highContrast:{palette:{background:{default:"#000000",raised:"#080808",brand:"#0b001f",inverse:"#ffffff"},surface:{base:"#141414",overlay:"#1f1f28",glass:"rgba(120, 104, 255, 0.25)",sunken:"#050505"},text:{primary:"#ffffff",secondary:"#dbdbff",muted:"#9fa4ff",inverse:"#000000"},border:{subtle:"#2e2e3f",strong:"#6161ff",accent:"#9f9fff"},primary:{50:"#ffffff",100:"#dcd9ff",200:"#b7b0ff",300:"#9488ff",400:"#6f60ff",500:"#5141ff",600:"#341fff",700:"#2400e0",800:"#1700a8",900:"#0d006d"},secondary:{50:"#f5f8ff",100:"#cddcff",200:"#9ebdff",300:"#6f9dff",400:"#437eff",500:"#2b64ff",600:"#134aff",700:"#0032cc",800:"#002199",900:"#00135c"},accent:{50:"#fff4fd",100:"#ffc6f0",200:"#ff95de",300:"#ff5fc9",400:"#ff2cb5",500:"#ff00a3",600:"#d6008a",700:"#a5006a",800:"#700049",900:"#3d0028"},neutral:{50:"#f4f4f8",100:"#dedfeb",200:"#b7b9cf",300:"#8f92b2",400:"#6a6d94",500:"#515379",600:"#3b3d59",700:"#282a3f",800:"#191b29",900:"#0c0d15"},success:{50:"#ebfff3",100:"#bcffd5",200:"#85ffb4",300:"#4bff90",400:"#1df370",500:"#00d758",600:"#00a746",700:"#007634",800:"#004f23",900:"#002a13"},warning:{50:"#fff7e8",100:"#ffd9a0",200:"#ffb95b",300:"#ff9420",400:"#ff7600",500:"#e05f00",600:"#b34900",700:"#843500",800:"#582200",900:"#2d1100"},danger:{50:"#ffeff2",100:"#ffc2cd",200:"#ff8aa5",300:"#ff517c",400:"#ff205c",500:"#e00041",600:"#b50032",700:"#880025",800:"#5a0017",900:"#2e000b"},info:{50:"#eaf4ff",100:"#bcdeff",200:"#8ac5ff",300:"#5babff",400:"#2d93ff",500:"#037af5",600:"#005ed1",700:"#0045a3",800:"#002f73",900:"#001a44"}}}},O1={families:{sans:"'Pretendard Variable', 'Inter', 'Segoe UI', 'Noto Sans KR', sans-serif",display:"'Space Grotesk', 'Montserrat', 'Noto Sans KR', sans-serif",mono:"'Fira Code', 'Menlo', 'Monaco', monospace"},sizes:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem"},lineHeights:{tight:"110%",snug:"120%",normal:"140%",relaxed:"160%"},letterSpacing:{tight:"-0.02em",normal:"0em",wide:"0.08em"},weights:{regular:400,medium:500,semibold:600,bold:700,extrabold:800}},D1={0:"0rem",1:"0.25rem",2:"0.5rem",3:"0.75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",56:"14rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem",px:"1px","0.5":"0.125rem","1.5":"0.375rem","2.5":"0.625rem","3.5":"0.875rem"},M1={none:"0px",xs:"4px",sm:"8px",md:"12px",lg:"16px",xl:"24px",pill:"999px",full:"9999px"},I1={xs:"0 1px 2px rgba(11, 9, 31, 0.4)",sm:"0 4px 8px rgba(11, 9, 31, 0.35)",md:"0 12px 24px rgba(15, 12, 38, 0.32)",lg:"0 18px 40px rgba(11, 9, 31, 0.28)",xl:"0 28px 64px rgba(12, 9, 44, 0.4)",glowPrimary:"0 0 32px rgba(118, 80, 255, 0.55)",glowAccent:"0 0 40px rgba(255, 58, 172, 0.45)",focus:"0 0 0 3px rgba(118, 80, 255, 0.5)"},k1={none:"0px",xs:"6px",sm:"10px",md:"18px",lg:"28px",xl:"48px"},L1={disabled:.38,muted:.64,overlay:.8,backdrop:.65,pressed:.9},U1={duration:{instant:80,fast:160,base:280,slow:420,deliberate:600},easing:{standard:"cubic-bezier(0.4, 0, 0.2, 1)",accelerate:"cubic-bezier(0.42, 0, 1, 1)",decelerate:"cubic-bezier(0, 0, 0.58, 1)",bounce:"cubic-bezier(0.36, 1.22, 0.32, 1)"},spring:{stiffness:180,damping:22,mass:1}},G1={background:0,content:10,overlay:100,modal:200,toast:300,popover:310,tooltip:320,max:999},H1={xs:"480px",sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px","3xl":"1760px"},z1={primary:"linear-gradient(135deg, #7650ff 0%, #ff3aac 100%)",secondary:"linear-gradient(135deg, rgba(63,105,255,0.9) 0%, rgba(23,17,143,0.6) 95%)",accent:"linear-gradient(135deg, rgba(255,58,172,0.8) 0%, rgba(255,118,64,0.6) 84%)",glass:"linear-gradient(135deg, rgba(118, 80, 255, 0.22) 0%, rgba(255, 58, 172, 0.18) 100%)"},P1={base:{shadow:"var(--stellive-shadow-sm)",backdrop:"rgba(20, 18, 40, 0.45)"},raised:{shadow:"var(--stellive-shadow-md)",backdrop:"rgba(20, 18, 40, 0.6)"},overlay:{shadow:"var(--stellive-shadow-lg)",backdrop:"rgba(11, 9, 28, 0.75)"},highest:{shadow:"var(--stellive-shadow-xl)",backdrop:"rgba(4, 3, 12, 0.82)"}},V1={button:{radius:"pill",paddingY:"0.75rem",paddingX:"1.5rem",fontWeight:"600"},card:{radius:"xl",backdropFilter:"blur(18px)",border:"1px solid rgba(255,255,255,0.08)",shadow:"md"},input:{radius:"md",border:"1px solid rgba(255,255,255,0.1)",focusShadow:"focus"},overlay:{backdropBlur:"xl",border:"1px solid rgba(118, 80, 255, 0.4)",shadow:"xl"}},bv={themes:A1,typography:O1,spacing:D1,radii:M1,shadows:I1,blurs:k1,opacity:L1,motion:U1,zIndex:G1,breakpoints:H1,gradients:z1,elevation:P1,componentDefaults:V1},Xt=bv,B1=Object.freeze(Object.keys(bv.themes));function q1(o){return!o||!B1.includes(o)?"light":o}const Y1=new Set(["duration"]);function $1(o,a){return typeof o=="number"&&a.some(s=>Y1.has(s))?`${o}ms`:typeof o=="number"?o.toString():String(o)}function Wt(o,a,s,i){if(s==null)return;if(typeof s=="object"&&!Array.isArray(s)){for(const[d,m]of Object.entries(s))Wt(o,[...a,d],m,i);return}const c=`--${a.join("-")}`;if(i.reducedMotion&&c.includes("-motion-duration-")){o[c]="0ms";return}o[c]=$1(s,a)}function F1({theme:o="light",prefix:a="stellive",reducedMotion:s=!1}={}){const i=q1(o),c=Xt.themes[i]??Xt.themes.light,d={},m=D=>[a,...D];Wt(d,m(["theme","name"]),i,{reducedMotion:s});const{themes:h,typography:p,spacing:g,radii:y,shadows:b,blurs:N,opacity:E,motion:j,zIndex:S,breakpoints:_,gradients:L,elevation:R,componentDefaults:T}=Xt;Wt(d,m(["color"]),h[i].palette,{reducedMotion:s}),Wt(d,m(["typography"]),p,{reducedMotion:s}),Wt(d,m(["spacing"]),g,{reducedMotion:s}),Wt(d,m(["radius"]),y,{reducedMotion:s}),Wt(d,m(["shadow"]),b,{reducedMotion:s}),Wt(d,m(["blur"]),N,{reducedMotion:s}),Wt(d,m(["opacity"]),E,{reducedMotion:s}),Wt(d,m(["motion"]),j,{reducedMotion:s}),Wt(d,m(["z-index"]),S,{reducedMotion:s}),Wt(d,m(["breakpoint"]),_,{reducedMotion:s}),Wt(d,m(["gradient"]),L,{reducedMotion:s}),Wt(d,m(["elevation"]),R,{reducedMotion:s}),Wt(d,m(["component"]),T,{reducedMotion:s});const A={"--background":c.palette.background.default,"--background-raised":c.palette.background.raised,"--surface":c.palette.surface.base,"--surface-overlay":c.palette.surface.overlay,"--surface-glass":c.palette.surface.glass,"--surface-sunken":c.palette.surface.sunken,"--foreground":c.palette.text.primary,"--foreground-muted":c.palette.text.muted,"--foreground-secondary":c.palette.text.secondary,"--foreground-inverse":c.palette.text.inverse,"--border":c.palette.border.subtle,"--border-strong":c.palette.border.strong,"--border-accent":c.palette.border.accent,"--input":c.palette.border.subtle,"--ring":c.palette.primary[400],"--primary":c.palette.primary[500],"--primary-foreground":c.palette.text.inverse,"--secondary":c.palette.secondary[500],"--secondary-foreground":c.palette.text.inverse,"--accent":c.palette.accent[500],"--accent-foreground":c.palette.text.inverse,"--muted":c.palette.neutral[700],"--muted-foreground":c.palette.text.muted,"--card":c.palette.surface.base,"--card-foreground":c.palette.text.primary,"--popover":c.palette.surface.overlay,"--popover-foreground":c.palette.text.primary,"--destructive":c.palette.danger[500],"--destructive-foreground":c.palette.text.inverse,"--success":c.palette.success[500],"--success-foreground":c.palette.text.inverse,"--warning":c.palette.warning[500],"--warning-foreground":c.palette.text.inverse,"--info":c.palette.info[500],"--info-foreground":c.palette.text.inverse,"--radius":Xt.radii.lg,"--radius-card":Xt.radii.xl,"--radius-pill":Xt.radii.pill,"--shadow-card":Xt.shadows.md,"--shadow-card-strong":Xt.shadows.lg,"--font-family-base":Xt.typography.families.sans,"--blur-card":Xt.blurs.md,"--blur-overlay":Xt.blurs.lg,"--gradient-primary":Xt.gradients.primary,"--gradient-accent":Xt.gradients.accent,"--gradient-secondary":Xt.gradients.secondary,"--gradient-glass":Xt.gradients.glass};for(const[D,Y]of Object.entries(A))Y&&(d[D]=String(Y));return d}var vd={exports:{}},Ii={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0;function X1(){if(x0)return Ii;x0=1;var o=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(i,c,d){var m=null;if(d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:o,type:i,key:m,ref:c!==void 0?c:null,props:d}}return Ii.Fragment=a,Ii.jsx=s,Ii.jsxs=s,Ii}var S0;function Q1(){return S0||(S0=1,vd.exports=X1()),vd.exports}var xd=Q1(),Sd={exports:{}},_e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0;function K1(){if(N0)return _e;N0=1;var o=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),m=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),N=Symbol.iterator;function E(k){return k===null||typeof k!="object"?null:(k=N&&k[N]||k["@@iterator"],typeof k=="function"?k:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function L(k,C,P){this.props=k,this.context=C,this.refs=_,this.updater=P||j}L.prototype.isReactComponent={},L.prototype.setState=function(k,C){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,C,"setState")},L.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function R(){}R.prototype=L.prototype;function T(k,C,P){this.props=k,this.context=C,this.refs=_,this.updater=P||j}var A=T.prototype=new R;A.constructor=T,S(A,L.prototype),A.isPureReactComponent=!0;var D=Array.isArray;function Y(){}var z={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function G(k,C,P){var W=P.ref;return{$$typeof:o,type:k,key:C,ref:W!==void 0?W:null,props:P}}function Q(k,C){return G(k.type,C,k.props)}function ae(k){return typeof k=="object"&&k!==null&&k.$$typeof===o}function le(k){var C={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(P){return C[P]})}var K=/\/+/g;function se(k,C){return typeof k=="object"&&k!==null&&k.key!=null?le(""+k.key):C.toString(36)}function oe(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(Y,Y):(k.status="pending",k.then(function(C){k.status==="pending"&&(k.status="fulfilled",k.value=C)},function(C){k.status==="pending"&&(k.status="rejected",k.reason=C)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function M(k,C,P,W,ne){var de=typeof k;(de==="undefined"||de==="boolean")&&(k=null);var re=!1;if(k===null)re=!0;else switch(de){case"bigint":case"string":case"number":re=!0;break;case"object":switch(k.$$typeof){case o:case a:re=!0;break;case y:return re=k._init,M(re(k._payload),C,P,W,ne)}}if(re)return ne=ne(k),re=W===""?"."+se(k,0):W,D(ne)?(P="",re!=null&&(P=re.replace(K,"$&/")+"/"),M(ne,C,P,"",function(Ne){return Ne})):ne!=null&&(ae(ne)&&(ne=Q(ne,P+(ne.key==null||k&&k.key===ne.key?"":(""+ne.key).replace(K,"$&/")+"/")+re)),C.push(ne)),1;re=0;var ce=W===""?".":W+":";if(D(k))for(var xe=0;xe<k.length;xe++)W=k[xe],de=ce+se(W,xe),re+=M(W,C,P,de,ne);else if(xe=E(k),typeof xe=="function")for(k=xe.call(k),xe=0;!(W=k.next()).done;)W=W.value,de=ce+se(W,xe++),re+=M(W,C,P,de,ne);else if(de==="object"){if(typeof k.then=="function")return M(oe(k),C,P,W,ne);throw C=String(k),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.")}return re}function H(k,C,P){if(k==null)return k;var W=[],ne=0;return M(k,W,"","",function(de){return C.call(P,de,ne++)}),W}function ee(k){if(k._status===-1){var C=k._result;C=C(),C.then(function(P){(k._status===0||k._status===-1)&&(k._status=1,k._result=P)},function(P){(k._status===0||k._status===-1)&&(k._status=2,k._result=P)}),k._status===-1&&(k._status=0,k._result=C)}if(k._status===1)return k._result.default;throw k._result}var ue=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var C=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(C))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},pe={map:H,forEach:function(k,C,P){H(k,function(){C.apply(this,arguments)},P)},count:function(k){var C=0;return H(k,function(){C++}),C},toArray:function(k){return H(k,function(C){return C})||[]},only:function(k){if(!ae(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return _e.Activity=b,_e.Children=pe,_e.Component=L,_e.Fragment=s,_e.Profiler=c,_e.PureComponent=T,_e.StrictMode=i,_e.Suspense=p,_e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,_e.__COMPILER_RUNTIME={__proto__:null,c:function(k){return z.H.useMemoCache(k)}},_e.cache=function(k){return function(){return k.apply(null,arguments)}},_e.cacheSignal=function(){return null},_e.cloneElement=function(k,C,P){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var W=S({},k.props),ne=k.key;if(C!=null)for(de in C.key!==void 0&&(ne=""+C.key),C)!I.call(C,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&C.ref===void 0||(W[de]=C[de]);var de=arguments.length-2;if(de===1)W.children=P;else if(1<de){for(var re=Array(de),ce=0;ce<de;ce++)re[ce]=arguments[ce+2];W.children=re}return G(k.type,ne,W)},_e.createContext=function(k){return k={$$typeof:m,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:d,_context:k},k},_e.createElement=function(k,C,P){var W,ne={},de=null;if(C!=null)for(W in C.key!==void 0&&(de=""+C.key),C)I.call(C,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ne[W]=C[W]);var re=arguments.length-2;if(re===1)ne.children=P;else if(1<re){for(var ce=Array(re),xe=0;xe<re;xe++)ce[xe]=arguments[xe+2];ne.children=ce}if(k&&k.defaultProps)for(W in re=k.defaultProps,re)ne[W]===void 0&&(ne[W]=re[W]);return G(k,de,ne)},_e.createRef=function(){return{current:null}},_e.forwardRef=function(k){return{$$typeof:h,render:k}},_e.isValidElement=ae,_e.lazy=function(k){return{$$typeof:y,_payload:{_status:-1,_result:k},_init:ee}},_e.memo=function(k,C){return{$$typeof:g,type:k,compare:C===void 0?null:C}},_e.startTransition=function(k){var C=z.T,P={};z.T=P;try{var W=k(),ne=z.S;ne!==null&&ne(P,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(Y,ue)}catch(de){ue(de)}finally{C!==null&&P.types!==null&&(C.types=P.types),z.T=C}},_e.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},_e.use=function(k){return z.H.use(k)},_e.useActionState=function(k,C,P){return z.H.useActionState(k,C,P)},_e.useCallback=function(k,C){return z.H.useCallback(k,C)},_e.useContext=function(k){return z.H.useContext(k)},_e.useDebugValue=function(){},_e.useDeferredValue=function(k,C){return z.H.useDeferredValue(k,C)},_e.useEffect=function(k,C){return z.H.useEffect(k,C)},_e.useEffectEvent=function(k){return z.H.useEffectEvent(k)},_e.useId=function(){return z.H.useId()},_e.useImperativeHandle=function(k,C,P){return z.H.useImperativeHandle(k,C,P)},_e.useInsertionEffect=function(k,C){return z.H.useInsertionEffect(k,C)},_e.useLayoutEffect=function(k,C){return z.H.useLayoutEffect(k,C)},_e.useMemo=function(k,C){return z.H.useMemo(k,C)},_e.useOptimistic=function(k,C){return z.H.useOptimistic(k,C)},_e.useReducer=function(k,C,P){return z.H.useReducer(k,C,P)},_e.useRef=function(k){return z.H.useRef(k)},_e.useState=function(k){return z.H.useState(k)},_e.useSyncExternalStore=function(k,C,P){return z.H.useSyncExternalStore(k,C,P)},_e.useTransition=function(){return z.H.useTransition()},_e.version="19.2.0",_e}var E0;function W1(){return E0||(E0=1,Sd.exports=K1()),Sd.exports}var Hl=W1();const Z1=typeof window<"u"?Hl.useLayoutEffect:Hl.useEffect;function J1(o,a){const s={...a??{}};for(const[i,c]of Object.entries(o))s[i]=c;return s}function eT(o,a){const s={};for(const[i,c]of Object.entries(a))s[i]=o.style.getPropertyValue(i),o.style.setProperty(i,c);return()=>{for(const[i,c]of Object.entries(s))c?o.style.setProperty(i,c):o.style.removeProperty(i)}}function tT({theme:o="light",prefix:a="stellive",reducedMotion:s=!1,as:i="div",className:c,style:d,children:m,attachToDocument:h=!1,target:p}){const g=Hl.useMemo(()=>F1({theme:o,prefix:a,reducedMotion:s}),[o,a,s]);if(Z1(()=>{if(!h)return;const b=p??(typeof document<"u"?document.documentElement:null);if(!b)return;const N=eT(b,g),E=b.getAttribute("data-stellive-theme");return b.setAttribute("data-stellive-theme",o),()=>{N(),E?b.setAttribute("data-stellive-theme",E):b.removeAttribute("data-stellive-theme")}},[h,p,g,o]),h)return xd.jsx(xd.Fragment,{children:m});const y=Hl.useMemo(()=>J1(g,d),[g,d]);return xd.jsx(i,{className:c,style:y,children:m})}const nT={theme:"system",setTheme:()=>null},yv=x.createContext(nT);function vv({children:o,defaultTheme:a="system",storageKey:s="vite-ui-theme",...i}){const[c,d]=x.useState(()=>localStorage.getItem(s)||a),[m,h]=x.useState("light"),[p,g]=x.useState(!1);x.useEffect(()=>{if(typeof window>"u")return;const b=window.matchMedia("(prefers-reduced-motion: reduce)"),N=()=>g(b.matches);return N(),b.addEventListener("change",N),()=>{b.removeEventListener("change",N)}},[]),x.useEffect(()=>{if(typeof window>"u")return;const b=window.document.documentElement,N=E=>{b.classList.remove("light","dark"),b.classList.add(E),h(E)};if(c==="system"){const E=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";N(E);return}N(c)},[c]),x.useEffect(()=>{if(typeof window>"u"||c!=="system")return;const b=window.document.documentElement,N=window.matchMedia("(prefers-color-scheme: dark)"),E=j=>{const S=j.matches?"dark":"light";b.classList.remove("light","dark"),b.classList.add(S),h(S)};return N.addEventListener("change",E),()=>N.removeEventListener("change",E)},[c]);const y={theme:c,setTheme:b=>{localStorage.setItem(s,b),d(b)}};return l.jsx(yv.Provider,{...i,value:y,children:l.jsx(tT,{theme:m,attachToDocument:!0,reducedMotion:p,children:o})})}const aT=Wl("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",vote:"bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white border border-blue-500 hover:border-blue-400 shadow-lg hover:shadow-xl transition-all duration-200 focus:ring-2 focus:ring-blue-400 focus:ring-offset-2",danger:"bg-red-600 hover:bg-red-700 active:bg-red-800 text-white border border-red-500 hover:border-red-400 shadow-lg hover:shadow-xl transition-all duration-200 focus:ring-2 focus:ring-red-400 focus:ring-offset-2",success:"bg-green-600 hover:bg-green-700 active:bg-green-800 text-white border border-green-500 hover:border-green-400 shadow-lg hover:shadow-xl transition-all duration-200 focus:ring-2 focus:ring-green-400 focus:ring-offset-2",game:"bg-purple-600 hover:bg-purple-700 active:bg-purple-800 text-white border border-purple-500 hover:border-purple-400 shadow-lg hover:shadow-xl transition-all duration-200 focus:ring-2 focus:ring-purple-400 focus:ring-offset-2",selected:"bg-orange-600 hover:bg-orange-700 active:bg-orange-800 text-white border border-orange-500 hover:border-orange-400 shadow-xl transform scale-105 transition-all duration-200 ring-2 ring-orange-400 ring-offset-2"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",xs:"h-7 rounded-md px-2.5 text-xs"}},defaultVariants:{variant:"default",size:"default"}}),ve=x.forwardRef(({className:o,variant:a,size:s,asChild:i=!1,...c},d)=>{const m=i?NE:"button";return l.jsx(m,{className:ye(aT({variant:a,size:s,className:o})),ref:d,...c})});ve.displayName="Button";const sT=()=>{const o=x.useContext(yv);if(o===void 0)throw new Error("useTheme must be used within a ThemeProvider");return o};function rT(){const{theme:o,setTheme:a}=sT(),s=()=>{a(o==="light"?"dark":o==="dark"?"system":"light")};return l.jsxs(ve,{variant:"ghost",size:"icon",onClick:s,className:"relative",children:[l.jsx(WE,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),l.jsx(ZE,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),l.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}const w0=o=>{let a;const s=new Set,i=(g,y)=>{const b=typeof g=="function"?g(a):g;if(!Object.is(b,a)){const N=a;a=y??(typeof b!="object"||b===null)?b:Object.assign({},a,b),s.forEach(E=>E(a,N))}},c=()=>a,h={setState:i,getState:c,getInitialState:()=>p,subscribe:g=>(s.add(g),()=>s.delete(g))},p=a=o(i,c,h);return h},iT=(o=>o?w0(o):w0),oT=o=>o;function lT(o,a=oT){const s=ie.useSyncExternalStore(o.subscribe,ie.useCallback(()=>a(o.getState()),[o,a]),ie.useCallback(()=>a(o.getInitialState()),[o,a]));return ie.useDebugValue(s),s}const T0=o=>{const a=iT(o),s=i=>lT(a,i);return Object.assign(s,a),s},Za=(o=>o?T0(o):T0),j0={BASE_URL:"/liargame/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},qi=new Map,pl=o=>{const a=qi.get(o);return a?Object.fromEntries(Object.entries(a.stores).map(([s,i])=>[s,i.getState()])):{}},cT=(o,a,s)=>{if(o===void 0)return{type:"untracked",connection:a.connect(s)};const i=qi.get(s.name);if(i)return{type:"tracked",store:o,...i};const c={connection:a.connect(s),stores:{}};return qi.set(s.name,c),{type:"tracked",store:o,...c}},uT=(o,a)=>{if(a===void 0)return;const s=qi.get(o);s&&(delete s.stores[a],Object.keys(s.stores).length===0&&qi.delete(o))},dT=o=>{var a,s;if(!o)return;const i=o.split(`
`),c=i.findIndex(m=>m.includes("api.setState"));if(c<0)return;const d=((a=i[c+1])==null?void 0:a.trim())||"";return(s=/.+ (.+) .+/.exec(d))==null?void 0:s[1]},fT=(o,a={})=>(s,i,c)=>{const{enabled:d,anonymousActionType:m,store:h,...p}=a;let g;try{g=(d??(j0?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!g)return o(s,i,c);const{connection:y,...b}=cT(h,g,p);let N=!0;c.setState=((S,_,L)=>{const R=s(S,_);if(!N)return R;const T=L===void 0?{type:m||dT(new Error().stack)||"anonymous"}:typeof L=="string"?{type:L}:L;return h===void 0?(y?.send(T,i()),R):(y?.send({...T,type:`${h}/${T.type}`},{...pl(p.name),[h]:c.getState()}),R)}),c.devtools={cleanup:()=>{y&&typeof y.unsubscribe=="function"&&y.unsubscribe(),uT(p.name,h)}};const E=(...S)=>{const _=N;N=!1,s(...S),N=_},j=o(c.setState,i,c);if(b.type==="untracked"?y?.init(j):(b.stores[b.store]=c,y?.init(Object.fromEntries(Object.entries(b.stores).map(([S,_])=>[S,S===b.store?j:_.getState()])))),c.dispatchFromDevtools&&typeof c.dispatch=="function"){let S=!1;const _=c.dispatch;c.dispatch=(...L)=>{(j0?"production":void 0)!=="production"&&L[0].type==="__setState"&&!S&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),S=!0),_(...L)}}return y.subscribe(S=>{var _;switch(S.type){case"ACTION":if(typeof S.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Nd(S.payload,L=>{if(L.type==="__setState"){if(h===void 0){E(L.state);return}Object.keys(L.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const R=L.state[h];if(R==null)return;JSON.stringify(c.getState())!==JSON.stringify(R)&&E(R);return}c.dispatchFromDevtools&&typeof c.dispatch=="function"&&c.dispatch(L)});case"DISPATCH":switch(S.payload.type){case"RESET":return E(j),h===void 0?y?.init(c.getState()):y?.init(pl(p.name));case"COMMIT":if(h===void 0){y?.init(c.getState());return}return y?.init(pl(p.name));case"ROLLBACK":return Nd(S.state,L=>{if(h===void 0){E(L),y?.init(c.getState());return}E(L[h]),y?.init(pl(p.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Nd(S.state,L=>{if(h===void 0){E(L);return}JSON.stringify(c.getState())!==JSON.stringify(L[h])&&E(L[h])});case"IMPORT_STATE":{const{nextLiftedState:L}=S.payload,R=(_=L.computedStates.slice(-1)[0])==null?void 0:_.state;if(!R)return;E(h===void 0?R:R[h]),y?.send(null,L);return}case"PAUSE_RECORDING":return N=!N}return}}),j},kr=fT,Nd=(o,a)=>{let s;try{s=JSON.parse(o)}catch(i){console.error("[zustand devtools middleware] Could not parse the received json",i)}s!==void 0&&a(s)};function mT(o,a){let s;try{s=o()}catch{return}return{getItem:c=>{var d;const m=p=>p===null?null:JSON.parse(p,void 0),h=(d=s.getItem(c))!=null?d:null;return h instanceof Promise?h.then(m):m(h)},setItem:(c,d)=>s.setItem(c,JSON.stringify(d,void 0)),removeItem:c=>s.removeItem(c)}}const kf=o=>a=>{try{const s=o(a);return s instanceof Promise?s:{then(i){return kf(i)(s)},catch(i){return this}}}catch(s){return{then(i){return this},catch(i){return kf(i)(s)}}}},hT=(o,a)=>(s,i,c)=>{let d={storage:mT(()=>localStorage),partialize:S=>S,version:0,merge:(S,_)=>({..._,...S}),...a},m=!1;const h=new Set,p=new Set;let g=d.storage;if(!g)return o((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),s(...S)},i,c);const y=()=>{const S=d.partialize({...i()});return g.setItem(d.name,{state:S,version:d.version})},b=c.setState;c.setState=(S,_)=>(b(S,_),y());const N=o((...S)=>(s(...S),y()),i,c);c.getInitialState=()=>N;let E;const j=()=>{var S,_;if(!g)return;m=!1,h.forEach(R=>{var T;return R((T=i())!=null?T:N)});const L=((_=d.onRehydrateStorage)==null?void 0:_.call(d,(S=i())!=null?S:N))||void 0;return kf(g.getItem.bind(g))(d.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==d.version){if(d.migrate){const T=d.migrate(R.state,R.version);return T instanceof Promise?T.then(A=>[!0,A]):[!0,T]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var T;const[A,D]=R;if(E=d.merge(D,(T=i())!=null?T:N),s(E,!0),A)return y()}).then(()=>{L?.(E,void 0),E=i(),m=!0,p.forEach(R=>R(E))}).catch(R=>{L?.(void 0,R)})};return c.persist={setOptions:S=>{d={...d,...S},S.storage&&(g=S.storage)},clearStorage:()=>{g?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>j(),hasHydrated:()=>m,onHydrate:S=>(h.add(S),()=>{h.delete(S)}),onFinishHydration:S=>(p.add(S),()=>{p.delete(S)})},d.skipHydration||j(),E||N},om=hT;function pT(o,a){o.terminate=function(){const s=()=>{};this.onerror=s,this.onmessage=s,this.onopen=s;const i=new Date,c=Math.random().toString().substring(2,8),d=this.onclose;this.onclose=m=>{const h=new Date().getTime()-i.getTime();a(`Discarded socket (#${c})  closed after ${h}ms, with code/reason: ${m.code}/${m.reason}`)},this.close(),d?.call(o,{code:4001,reason:`Quick discarding socket (#${c}) without waiting for the shutdown sequence.`,wasClean:!1})}}const Li={LF:`
`,NULL:"\0"};class $a{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(a){const{command:s,headers:i,body:c,binaryBody:d,escapeHeaderValues:m,skipContentLengthHeader:h}=a;this.command=s,this.headers=Object.assign({},i||{}),d?(this._binaryBody=d,this.isBinaryBody=!0):(this._body=c||"",this.isBinaryBody=!1),this.escapeHeaderValues=m||!1,this.skipContentLengthHeader=h||!1}static fromRawFrame(a,s){const i={},c=d=>d.replace(/^\s+|\s+$/g,"");for(const d of a.headers.reverse()){d.indexOf(":");const m=c(d[0]);let h=c(d[1]);s&&a.command!=="CONNECT"&&a.command!=="CONNECTED"&&(h=$a.hdrValueUnEscape(h)),i[m]=h}return new $a({command:a.command,headers:i,binaryBody:a.binaryBody,escapeHeaderValues:s})}toString(){return this.serializeCmdAndHeaders()}serialize(){const a=this.serializeCmdAndHeaders();return this.isBinaryBody?$a.toUnit8Array(a,this._binaryBody).buffer:a+this._body+Li.NULL}serializeCmdAndHeaders(){const a=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const s of Object.keys(this.headers||{})){const i=this.headers[s];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?a.push(`${s}:${$a.hdrValueEscape(`${i}`)}`):a.push(`${s}:${i}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&a.push(`content-length:${this.bodyLength()}`),a.join(Li.LF)+Li.LF+Li.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const a=this.binaryBody;return a?a.length:0}static sizeOfUTF8(a){return a?new TextEncoder().encode(a).length:0}static toUnit8Array(a,s){const i=new TextEncoder().encode(a),c=new Uint8Array([0]),d=new Uint8Array(i.length+s.length+c.length);return d.set(i),d.set(s,i.length),d.set(c,i.length+s.length),d}static marshall(a){return new $a(a).serialize()}static hdrValueEscape(a){return a.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(a){return a.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const R0=0,gl=10,bl=13,gT=58;class bT{constructor(a,s){this.onFrame=a,this.onIncomingPing=s,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(a,s=!1){let i;if(typeof a=="string"?i=this._encoder.encode(a):i=new Uint8Array(a),s&&i[i.length-1]!==0){const c=new Uint8Array(i.length+1);c.set(i,0),c[i.length]=0,i=c}for(let c=0;c<i.length;c++){const d=i[c];this._onByte(d)}}_collectFrame(a){if(a!==R0&&a!==bl){if(a===gl){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(a)}}_collectCommand(a){if(a!==bl){if(a===gl){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(a)}}_collectHeaders(a){if(a!==bl){if(a===gl){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(a)}}_reinjectByte(a){this._onByte(a)}_collectHeaderKey(a){if(a===gT){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(a)}_collectHeaderValue(a){if(a!==bl){if(a===gl){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(a)}}_setupCollectBody(){const a=this._results.headers.filter(s=>s[0]==="content-length")[0];a?(this._bodyBytesRemaining=parseInt(a[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(a){if(a===R0){this._retrievedBody();return}this._consumeByte(a)}_collectBodyFixedSize(a){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(a)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(a){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",a)}this._initState()}_consumeByte(a){this._token.push(a)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const a=new Uint8Array(this._token);return this._token=[],a}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var Fa;(function(o){o[o.CONNECTING=0]="CONNECTING",o[o.OPEN=1]="OPEN",o[o.CLOSING=2]="CLOSING",o[o.CLOSED=3]="CLOSED"})(Fa||(Fa={}));var Gn;(function(o){o[o.ACTIVE=0]="ACTIVE",o[o.DEACTIVATING=1]="DEACTIVATING",o[o.INACTIVE=2]="INACTIVE"})(Gn||(Gn={}));var zl;(function(o){o[o.LINEAR=0]="LINEAR",o[o.EXPONENTIAL=1]="EXPONENTIAL"})(zl||(zl={}));var Yi;(function(o){o.Interval="interval",o.Worker="worker"})(Yi||(Yi={}));class yT{constructor(a,s=Yi.Interval,i){this._interval=a,this._strategy=s,this._debug=i,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(a){this.stop(),this.shouldUseWorker()?this.runWorker(a):this.runInterval(a)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===Yi.Worker}runWorker(a){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=s=>a(s.data))}runInterval(a){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const s=Date.now();this._timer=setInterval(()=>{a(Date.now()-s)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class Jt{constructor(a){this.versions=a}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(a=>`v${a.replace(".","")}.stomp`)}}Jt.V1_0="1.0";Jt.V1_1="1.1";Jt.V1_2="1.2";Jt.default=new Jt([Jt.V1_2,Jt.V1_1,Jt.V1_0]);class vT{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(a,s,i){this._client=a,this._webSocket=s,this._connected=!1,this._serverFrameHandlers={CONNECTED:c=>{this.debug(`connected to server ${c.headers.server}`),this._connected=!0,this._connectedVersion=c.headers.version,this._connectedVersion===Jt.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(c.headers),this.onConnect(c)},MESSAGE:c=>{const d=c.headers.subscription,m=this._subscriptions[d]||this.onUnhandledMessage,h=c,p=this,g=this._connectedVersion===Jt.V1_2?h.headers.ack:h.headers["message-id"];h.ack=(y={})=>p.ack(g,d,y),h.nack=(y={})=>p.nack(g,d,y),m(h)},RECEIPT:c=>{const d=this._receiptWatchers[c.headers["receipt-id"]];d?(d(c),delete this._receiptWatchers[c.headers["receipt-id"]]):this.onUnhandledReceipt(c)},ERROR:c=>{this.onStompError(c)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=i.debug,this.stompVersions=i.stompVersions,this.connectHeaders=i.connectHeaders,this.disconnectHeaders=i.disconnectHeaders,this.heartbeatIncoming=i.heartbeatIncoming,this.heartbeatToleranceMultiplier=i.heartbeatGracePeriods,this.heartbeatOutgoing=i.heartbeatOutgoing,this.splitLargeFrames=i.splitLargeFrames,this.maxWebSocketChunkSize=i.maxWebSocketChunkSize,this.forceBinaryWSFrames=i.forceBinaryWSFrames,this.logRawCommunication=i.logRawCommunication,this.appendMissingNULLonIncoming=i.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=i.discardWebsocketOnCommFailure,this.onConnect=i.onConnect,this.onDisconnect=i.onDisconnect,this.onStompError=i.onStompError,this.onWebSocketClose=i.onWebSocketClose,this.onWebSocketError=i.onWebSocketError,this.onUnhandledMessage=i.onUnhandledMessage,this.onUnhandledReceipt=i.onUnhandledReceipt,this.onUnhandledFrame=i.onUnhandledFrame,this.onHeartbeatReceived=i.onHeartbeatReceived,this.onHeartbeatLost=i.onHeartbeatLost}start(){const a=new bT(s=>{const i=$a.fromRawFrame(s,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${i}`),(this._serverFrameHandlers[i.command]||this.onUnhandledFrame)(i)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=s=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const i=s.data instanceof ArrayBuffer?new TextDecoder().decode(s.data):s.data;this.debug(`<<< ${i}`)}a.parseChunk(s.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=s=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(s)},this._webSocket.onerror=s=>{this.onWebSocketError(s)},this._webSocket.onopen=()=>{const s=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),s["accept-version"]=this.stompVersions.supportedVersions(),s["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:s})}}_setupHeartbeat(a){if(a.version!==Jt.V1_1&&a.version!==Jt.V1_2||!a["heart-beat"])return;const[s,i]=a["heart-beat"].split(",").map(c=>parseInt(c,10));if(this.heartbeatOutgoing!==0&&i!==0){const c=Math.max(this.heartbeatOutgoing,i);this.debug(`send PING every ${c}ms`),this._pinger=new yT(c,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===Fa.OPEN&&(this._webSocket.send(Li.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&s!==0){const c=Math.max(this.heartbeatIncoming,s);this.debug(`check PONG every ${c}ms`),this._ponger=setInterval(()=>{const d=Date.now()-this._lastServerActivityTS;d>c*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${d}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},c)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===Fa.CONNECTING||this._webSocket.readyState===Fa.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&pT(this._webSocket,a=>this.debug(a)),this._webSocket.terminate()}_transmit(a){const{command:s,headers:i,body:c,binaryBody:d,skipContentLengthHeader:m}=a,h=new $a({command:s,headers:i,body:c,binaryBody:d,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:m});let p=h.serialize();if(this.logRawCommunication?this.debug(`>>> ${p}`):this.debug(`>>> ${h}`),this.forceBinaryWSFrames&&typeof p=="string"&&(p=new TextEncoder().encode(p)),typeof p!="string"||!this.splitLargeFrames)this._webSocket.send(p);else{let g=p;for(;g.length>0;){const y=g.substring(0,this.maxWebSocketChunkSize);g=g.substring(this.maxWebSocketChunkSize),this._webSocket.send(y),this.debug(`chunk sent = ${y.length}, remaining = ${g.length}`)}}}dispose(){if(this.connected)try{const a=Object.assign({},this.disconnectHeaders);a.receipt||(a.receipt=`close-${this._counter++}`),this.watchForReceipt(a.receipt,s=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(s)}),this._transmit({command:"DISCONNECT",headers:a})}catch(a){this.debug(`Ignoring error during disconnect ${a}`)}else(this._webSocket.readyState===Fa.CONNECTING||this._webSocket.readyState===Fa.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(a){const{destination:s,headers:i,body:c,binaryBody:d,skipContentLengthHeader:m}=a,h=Object.assign({destination:s},i);this._transmit({command:"SEND",headers:h,body:c,binaryBody:d,skipContentLengthHeader:m})}watchForReceipt(a,s){this._receiptWatchers[a]=s}subscribe(a,s,i={}){i=Object.assign({},i),i.id||(i.id=`sub-${this._counter++}`),i.destination=a,this._subscriptions[i.id]=s,this._transmit({command:"SUBSCRIBE",headers:i});const c=this;return{id:i.id,unsubscribe(d){return c.unsubscribe(i.id,d)}}}unsubscribe(a,s={}){s=Object.assign({},s),delete this._subscriptions[a],s.id=a,this._transmit({command:"UNSUBSCRIBE",headers:s})}begin(a){const s=a||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:s}});const i=this;return{id:s,commit(){i.commit(s)},abort(){i.abort(s)}}}commit(a){this._transmit({command:"COMMIT",headers:{transaction:a}})}abort(a){this._transmit({command:"ABORT",headers:{transaction:a}})}ack(a,s,i={}){i=Object.assign({},i),this._connectedVersion===Jt.V1_2?i.id=a:i["message-id"]=a,i.subscription=s,this._transmit({command:"ACK",headers:i})}nack(a,s,i={}){return i=Object.assign({},i),this._connectedVersion===Jt.V1_2?i.id=a:i["message-id"]=a,i.subscription=s,this._transmit({command:"NACK",headers:i})}}class xT{get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(a){this._disconnectHeaders=a,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===Gn.ACTIVE}_changeState(a){this.state=a,this.onChangeState(a)}constructor(a={}){this.stompVersions=Jt.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=900*1e3,this.reconnectTimeMode=zl.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=Yi.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=Gn.INACTIVE;const s=()=>{};this.debug=s,this.beforeConnect=s,this.onConnect=s,this.onDisconnect=s,this.onUnhandledMessage=s,this.onUnhandledReceipt=s,this.onUnhandledFrame=s,this.onHeartbeatReceived=s,this.onHeartbeatLost=s,this.onStompError=s,this.onWebSocketClose=s,this.onWebSocketError=s,this.logRawCommunication=!1,this.onChangeState=s,this.connectHeaders={},this._disconnectHeaders={},this.configure(a)}configure(a){Object.assign(this,a),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const a=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(Gn.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===Gn.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{a()})):a()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const a=this._createWebSocket();this._stompHandler=new vT(this,a,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:s=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(s)},onDisconnect:s=>{this.onDisconnect(s)},onStompError:s=>{this.onStompError(s)},onWebSocketClose:s=>{this._stompHandler=void 0,this.state===Gn.DEACTIVATING&&this._changeState(Gn.INACTIVE),this.onWebSocketClose(s),this.active&&this._schedule_reconnect()},onWebSocketError:s=>{this.onWebSocketError(s)},onUnhandledMessage:s=>{this.onUnhandledMessage(s)},onUnhandledReceipt:s=>{this.onUnhandledReceipt(s)},onUnhandledFrame:s=>{this.onUnhandledFrame(s)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()}_createWebSocket(){let a;if(this.webSocketFactory)a=this.webSocketFactory();else if(this.brokerURL)a=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return a.binaryType="arraybuffer",a}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===zl.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(a={}){const s=a.force||!1,i=this.active;let c;if(this.state===Gn.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(Gn.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==Fa.CLOSED){const d=this._stompHandler.onWebSocketClose;c=new Promise((m,h)=>{this._stompHandler.onWebSocketClose=p=>{d(p),m()}})}else return this._changeState(Gn.INACTIVE),Promise.resolve();return s?this._stompHandler?.discardWebsocket():i&&this._disposeStompHandler(),c}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(a){this._checkConnection(),this._stompHandler.publish(a)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(a,s){this._checkConnection(),this._stompHandler.watchForReceipt(a,s)}subscribe(a,s,i={}){return this._checkConnection(),this._stompHandler.subscribe(a,s,i)}unsubscribe(a,s={}){this._checkConnection(),this._stompHandler.unsubscribe(a,s)}begin(a){return this._checkConnection(),this._stompHandler.begin(a)}commit(a){this._checkConnection(),this._stompHandler.commit(a)}abort(a){this._checkConnection(),this._stompHandler.abort(a)}ack(a,s,i={}){this._checkConnection(),this._stompHandler.ack(a,s,i)}nack(a,s,i={}){this._checkConnection(),this._stompHandler.nack(a,s,i)}}var Ed={exports:{}},yl={},C0;function ST(){return C0||(C0=1,globalThis.crypto&&globalThis.crypto.getRandomValues?yl.randomBytes=function(o){var a=new Uint8Array(o);return globalThis.crypto.getRandomValues(a),a}:yl.randomBytes=function(o){for(var a=new Array(o),s=0;s<o;s++)a[s]=Math.floor(Math.random()*256);return a}),yl}var wd,_0;function Lr(){if(_0)return wd;_0=1;var o=ST(),a="abcdefghijklmnopqrstuvwxyz012345";return wd={string:function(s){for(var i=a.length,c=o.randomBytes(s),d=[],m=0;m<s;m++)d.push(a.substr(c[m]%i,1));return d.join("")},number:function(s){return Math.floor(Math.random()*s)},numberString:function(s){var i=(""+(s-1)).length,c=new Array(i+1).join("0");return(c+this.number(s)).slice(-i)}},wd}var A0;function Ja(){return A0||(A0=1,(function(o){var a=Lr(),s={},i=!1,c=globalThis.chrome&&globalThis.chrome.app&&globalThis.chrome.app.runtime;o.exports={attachEvent:function(m,h){typeof globalThis.addEventListener<"u"?globalThis.addEventListener(m,h,!1):globalThis.document&&globalThis.attachEvent&&(globalThis.document.attachEvent("on"+m,h),globalThis.attachEvent("on"+m,h))},detachEvent:function(m,h){typeof globalThis.addEventListener<"u"?globalThis.removeEventListener(m,h,!1):globalThis.document&&globalThis.detachEvent&&(globalThis.document.detachEvent("on"+m,h),globalThis.detachEvent("on"+m,h))},unloadAdd:function(m){if(c)return null;var h=a.string(8);return s[h]=m,i&&setTimeout(this.triggerUnloadCallbacks,0),h},unloadDel:function(m){m in s&&delete s[m]},triggerUnloadCallbacks:function(){for(var m in s)s[m](),delete s[m]}};var d=function(){i||(i=!0,o.exports.triggerUnloadCallbacks())};c||o.exports.attachEvent("unload",d)})(Ed)),Ed.exports}var Td,O0;function NT(){return O0||(O0=1,Td=function(a,s){if(s=s.split(":")[0],a=+a,!a)return!1;switch(s){case"http":case"ws":return a!==80;case"https":case"wss":return a!==443;case"ftp":return a!==21;case"gopher":return a!==70;case"file":return!1}return a!==0}),Td}var vl={},D0;function ET(){if(D0)return vl;D0=1;var o=Object.prototype.hasOwnProperty,a;function s(m){try{return decodeURIComponent(m.replace(/\+/g," "))}catch{return null}}function i(m){try{return encodeURIComponent(m)}catch{return null}}function c(m){for(var h=/([^=?#&]+)=?([^&]*)/g,p={},g;g=h.exec(m);){var y=s(g[1]),b=s(g[2]);y===null||b===null||y in p||(p[y]=b)}return p}function d(m,h){h=h||"";var p=[],g,y;typeof h!="string"&&(h="?");for(y in m)if(o.call(m,y)){if(g=m[y],!g&&(g===null||g===a||isNaN(g))&&(g=""),y=i(y),g=i(g),y===null||g===null)continue;p.push(y+"="+g)}return p.length?h+p.join("&"):""}return vl.stringify=d,vl.parse=c,vl}var jd,M0;function xv(){if(M0)return jd;M0=1;var o=NT(),a=ET(),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,c=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,d=/:\d+$/,m=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,h=/^[a-zA-Z]:/;function p(R){return(R||"").toString().replace(s,"")}var g=[["#","hash"],["?","query"],function(T,A){return N(A.protocol)?T.replace(/\\/g,"/"):T},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],y={hash:1,query:1};function b(R){var T;typeof window<"u"?T=window:typeof globalThis<"u"?T=globalThis:typeof self<"u"?T=self:T={};var A=T.location||{};R=R||A;var D={},Y=typeof R,z;if(R.protocol==="blob:")D=new S(unescape(R.pathname),{});else if(Y==="string"){D=new S(R,{});for(z in y)delete D[z]}else if(Y==="object"){for(z in R)z in y||(D[z]=R[z]);D.slashes===void 0&&(D.slashes=c.test(R.href))}return D}function N(R){return R==="file:"||R==="ftp:"||R==="http:"||R==="https:"||R==="ws:"||R==="wss:"}function E(R,T){R=p(R),R=R.replace(i,""),T=T||{};var A=m.exec(R),D=A[1]?A[1].toLowerCase():"",Y=!!A[2],z=!!A[3],I=0,G;return Y?z?(G=A[2]+A[3]+A[4],I=A[2].length+A[3].length):(G=A[2]+A[4],I=A[2].length):z?(G=A[3]+A[4],I=A[3].length):G=A[4],D==="file:"?I>=2&&(G=G.slice(2)):N(D)?G=A[4]:D?Y&&(G=G.slice(2)):I>=2&&N(T.protocol)&&(G=A[4]),{protocol:D,slashes:Y||N(D),slashesCount:I,rest:G}}function j(R,T){if(R==="")return T;for(var A=(T||"/").split("/").slice(0,-1).concat(R.split("/")),D=A.length,Y=A[D-1],z=!1,I=0;D--;)A[D]==="."?A.splice(D,1):A[D]===".."?(A.splice(D,1),I++):I&&(D===0&&(z=!0),A.splice(D,1),I--);return z&&A.unshift(""),(Y==="."||Y==="..")&&A.push(""),A.join("/")}function S(R,T,A){if(R=p(R),R=R.replace(i,""),!(this instanceof S))return new S(R,T,A);var D,Y,z,I,G,Q,ae=g.slice(),le=typeof T,K=this,se=0;for(le!=="object"&&le!=="string"&&(A=T,T=null),A&&typeof A!="function"&&(A=a.parse),T=b(T),Y=E(R||"",T),D=!Y.protocol&&!Y.slashes,K.slashes=Y.slashes||D&&T.slashes,K.protocol=Y.protocol||T.protocol||"",R=Y.rest,(Y.protocol==="file:"&&(Y.slashesCount!==2||h.test(R))||!Y.slashes&&(Y.protocol||Y.slashesCount<2||!N(K.protocol)))&&(ae[3]=[/(.*)/,"pathname"]);se<ae.length;se++){if(I=ae[se],typeof I=="function"){R=I(R,K);continue}z=I[0],Q=I[1],z!==z?K[Q]=R:typeof z=="string"?(G=z==="@"?R.lastIndexOf(z):R.indexOf(z),~G&&(typeof I[2]=="number"?(K[Q]=R.slice(0,G),R=R.slice(G+I[2])):(K[Q]=R.slice(G),R=R.slice(0,G)))):(G=z.exec(R))&&(K[Q]=G[1],R=R.slice(0,G.index)),K[Q]=K[Q]||D&&I[3]&&T[Q]||"",I[4]&&(K[Q]=K[Q].toLowerCase())}A&&(K.query=A(K.query)),D&&T.slashes&&K.pathname.charAt(0)!=="/"&&(K.pathname!==""||T.pathname!=="")&&(K.pathname=j(K.pathname,T.pathname)),K.pathname.charAt(0)!=="/"&&N(K.protocol)&&(K.pathname="/"+K.pathname),o(K.port,K.protocol)||(K.host=K.hostname,K.port=""),K.username=K.password="",K.auth&&(G=K.auth.indexOf(":"),~G?(K.username=K.auth.slice(0,G),K.username=encodeURIComponent(decodeURIComponent(K.username)),K.password=K.auth.slice(G+1),K.password=encodeURIComponent(decodeURIComponent(K.password))):K.username=encodeURIComponent(decodeURIComponent(K.auth)),K.auth=K.password?K.username+":"+K.password:K.username),K.origin=K.protocol!=="file:"&&N(K.protocol)&&K.host?K.protocol+"//"+K.host:"null",K.href=K.toString()}function _(R,T,A){var D=this;switch(R){case"query":typeof T=="string"&&T.length&&(T=(A||a.parse)(T)),D[R]=T;break;case"port":D[R]=T,o(T,D.protocol)?T&&(D.host=D.hostname+":"+T):(D.host=D.hostname,D[R]="");break;case"hostname":D[R]=T,D.port&&(T+=":"+D.port),D.host=T;break;case"host":D[R]=T,d.test(T)?(T=T.split(":"),D.port=T.pop(),D.hostname=T.join(":")):(D.hostname=T,D.port="");break;case"protocol":D.protocol=T.toLowerCase(),D.slashes=!A;break;case"pathname":case"hash":if(T){var Y=R==="pathname"?"/":"#";D[R]=T.charAt(0)!==Y?Y+T:T}else D[R]=T;break;case"username":case"password":D[R]=encodeURIComponent(T);break;case"auth":var z=T.indexOf(":");~z?(D.username=T.slice(0,z),D.username=encodeURIComponent(decodeURIComponent(D.username)),D.password=T.slice(z+1),D.password=encodeURIComponent(decodeURIComponent(D.password))):D.username=encodeURIComponent(decodeURIComponent(T))}for(var I=0;I<g.length;I++){var G=g[I];G[4]&&(D[G[1]]=D[G[1]].toLowerCase())}return D.auth=D.password?D.username+":"+D.password:D.username,D.origin=D.protocol!=="file:"&&N(D.protocol)&&D.host?D.protocol+"//"+D.host:"null",D.href=D.toString(),D}function L(R){(!R||typeof R!="function")&&(R=a.stringify);var T,A=this,D=A.host,Y=A.protocol;Y&&Y.charAt(Y.length-1)!==":"&&(Y+=":");var z=Y+(A.protocol&&A.slashes||N(A.protocol)?"//":"");return A.username?(z+=A.username,A.password&&(z+=":"+A.password),z+="@"):A.password?(z+=":"+A.password,z+="@"):A.protocol!=="file:"&&N(A.protocol)&&!D&&A.pathname!=="/"&&(z+="@"),(D[D.length-1]===":"||d.test(A.hostname)&&!A.port)&&(D+=":"),z+=D+A.pathname,T=typeof A.query=="object"?R(A.query):A.query,T&&(z+=T.charAt(0)!=="?"?"?"+T:T),A.hash&&(z+=A.hash),z}return S.prototype={set:_,toString:L},S.extractProtocol=E,S.location=b,S.trimLeft=p,S.qs=a,jd=S,jd}var Rd,I0;function On(){if(I0)return Rd;I0=1;var o=xv();return Rd={getOrigin:function(a){if(!a)return null;var s=new o(a);if(s.protocol==="file:")return null;var i=s.port;return i||(i=s.protocol==="https:"?"443":"80"),s.protocol+"//"+s.hostname+":"+i},isOriginEqual:function(a,s){var i=this.getOrigin(a)===this.getOrigin(s);return i},isSchemeEqual:function(a,s){return a.split(":")[0]===s.split(":")[0]},addPath:function(a,s){var i=a.split("?");return i[0]+s+(i[1]?"?"+i[1]:"")},addQuery:function(a,s){return a+(a.indexOf("?")===-1?"?"+s:"&"+s)},isLoopbackAddr:function(a){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(a)||/^\[::1\]$/.test(a)}},Rd}var xl={exports:{}},k0;function $e(){return k0||(k0=1,typeof Object.create=="function"?xl.exports=function(a,s){s&&(a.super_=s,a.prototype=Object.create(s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:xl.exports=function(a,s){if(s){a.super_=s;var i=function(){};i.prototype=s.prototype,a.prototype=new i,a.prototype.constructor=a}}),xl.exports}var Cd={},_d,L0;function Sv(){if(L0)return _d;L0=1;function o(){this._listeners={}}return o.prototype.addEventListener=function(a,s){a in this._listeners||(this._listeners[a]=[]);var i=this._listeners[a];i.indexOf(s)===-1&&(i=i.concat([s])),this._listeners[a]=i},o.prototype.removeEventListener=function(a,s){var i=this._listeners[a];if(i){var c=i.indexOf(s);if(c!==-1){i.length>1?this._listeners[a]=i.slice(0,c).concat(i.slice(c+1)):delete this._listeners[a];return}}},o.prototype.dispatchEvent=function(){var a=arguments[0],s=a.type,i=arguments.length===1?[a]:Array.apply(null,arguments);if(this["on"+s]&&this["on"+s].apply(this,i),s in this._listeners)for(var c=this._listeners[s],d=0;d<c.length;d++)c[d].apply(this,i)},_d=o,_d}var U0;function en(){if(U0)return Cd;U0=1;var o=$e(),a=Sv();function s(){a.call(this)}return o(s,a),s.prototype.removeAllListeners=function(i){i?delete this._listeners[i]:this._listeners={}},s.prototype.once=function(i,c){var d=this,m=!1;function h(){d.removeListener(i,h),m||(m=!0,c.apply(this,arguments))}this.on(i,h)},s.prototype.emit=function(){var i=arguments[0],c=this._listeners[i];if(c){for(var d=arguments.length,m=new Array(d-1),h=1;h<d;h++)m[h-1]=arguments[h];for(var p=0;p<c.length;p++)c[p].apply(this,m)}},s.prototype.on=s.prototype.addListener=a.prototype.addEventListener,s.prototype.removeListener=a.prototype.removeEventListener,Cd.EventEmitter=s,Cd}var Sl={exports:{}},G0;function wT(){if(G0)return Sl.exports;G0=1;var o=globalThis.WebSocket||globalThis.MozWebSocket;return o?Sl.exports=function(s){return new o(s)}:Sl.exports=void 0,Sl.exports}var Ad,H0;function TT(){if(H0)return Ad;H0=1;var o=Ja(),a=On(),s=$e(),i=en().EventEmitter,c=wT(),d=function(){};function m(h,p,g){if(!m.enabled())throw new Error("Transport created when disabled");i.call(this);var y=this,b=a.addPath(h,"/websocket");b.slice(0,5)==="https"?b="wss"+b.slice(5):b="ws"+b.slice(4),this.url=b,this.ws=new c(this.url,[],g),this.ws.onmessage=function(N){d("message event",N.data),y.emit("message",N.data)},this.unloadRef=o.unloadAdd(function(){y.ws.close()}),this.ws.onclose=function(N){d("close event",N.code,N.reason),y.emit("close",N.code,N.reason),y._cleanup()},this.ws.onerror=function(N){y.emit("close",1006,"WebSocket connection broken"),y._cleanup()}}return s(m,i),m.prototype.send=function(h){var p="["+h+"]";this.ws.send(p)},m.prototype.close=function(){var h=this.ws;this._cleanup(),h&&h.close()},m.prototype._cleanup=function(){var h=this.ws;h&&(h.onmessage=h.onclose=h.onerror=null),o.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},m.enabled=function(){return!!c},m.transportName="websocket",m.roundTrips=2,Ad=m,Ad}var Od,z0;function jT(){if(z0)return Od;z0=1;var o=$e(),a=en().EventEmitter,s=function(){};function i(c,d){a.call(this),this.sendBuffer=[],this.sender=d,this.url=c}return o(i,a),i.prototype.send=function(c){this.sendBuffer.push(c),this.sendStop||this.sendSchedule()},i.prototype.sendScheduleWait=function(){var c=this,d;this.sendStop=function(){c.sendStop=null,clearTimeout(d)},d=setTimeout(function(){c.sendStop=null,c.sendSchedule()},25)},i.prototype.sendSchedule=function(){s("sendSchedule",this.sendBuffer.length);var c=this;if(this.sendBuffer.length>0){var d="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,d,function(m){c.sendStop=null,m?(c.emit("close",m.code||1006,"Sending error: "+m),c.close()):c.sendScheduleWait()}),this.sendBuffer=[]}},i.prototype._cleanup=function(){this.removeAllListeners()},i.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},Od=i,Od}var Dd,P0;function RT(){if(P0)return Dd;P0=1;var o=$e(),a=en().EventEmitter,s=function(){};function i(c,d,m){a.call(this),this.Receiver=c,this.receiveUrl=d,this.AjaxObject=m,this._scheduleReceiver()}return o(i,a),i.prototype._scheduleReceiver=function(){var c=this,d=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);d.on("message",function(m){c.emit("message",m)}),d.once("close",function(m,h){s("close",m,h,c.pollIsClosing),c.poll=d=null,c.pollIsClosing||(h==="network"?c._scheduleReceiver():(c.emit("close",m||1006,h),c.removeAllListeners()))})},i.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},Dd=i,Dd}var Md,V0;function Nv(){if(V0)return Md;V0=1;var o=$e(),a=On(),s=jT(),i=RT();function c(d,m,h,p,g){var y=a.addPath(d,m),b=this;s.call(this,d,h),this.poll=new i(p,y,g),this.poll.on("message",function(N){b.emit("message",N)}),this.poll.once("close",function(N,E){b.poll=null,b.emit("close",N,E),b.close()})}return o(c,s),c.prototype.close=function(){s.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},Md=c,Md}var Id,B0;function Ur(){if(B0)return Id;B0=1;var o=$e(),a=On(),s=Nv();function i(d){return function(m,h,p){var g={};typeof h=="string"&&(g.headers={"Content-type":"text/plain"});var y=a.addPath(m,"/xhr_send"),b=new d("POST",y,h,g);return b.once("finish",function(N){if(b=null,N!==200&&N!==204)return p(new Error("http status "+N));p()}),function(){b.close(),b=null;var N=new Error("Aborted");N.code=1e3,p(N)}}}function c(d,m,h,p){s.call(this,d,m,i(p),h,p)}return o(c,s),Id=c,Id}var kd,q0;function Zl(){if(q0)return kd;q0=1;var o=$e(),a=en().EventEmitter;function s(i,c){a.call(this);var d=this;this.bufferPosition=0,this.xo=new c("POST",i,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(m,h){d._chunkHandler(m,h),d.xo=null;var p=m===200?"network":"permanent";d.emit("close",null,p),d._cleanup()})}return o(s,a),s.prototype._chunkHandler=function(i,c){if(!(i!==200||!c))for(var d=-1;;this.bufferPosition+=d+1){var m=c.slice(this.bufferPosition);if(d=m.indexOf(`
`),d===-1)break;var h=m.slice(0,d);h&&this.emit("message",h)}},s.prototype._cleanup=function(){this.removeAllListeners()},s.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},kd=s,kd}var Ld,Y0;function Ev(){if(Y0)return Ld;Y0=1;var o=en().EventEmitter,a=$e(),s=Ja(),i=On(),c=globalThis.XMLHttpRequest,d=function(){};function m(g,y,b,N){var E=this;o.call(this),setTimeout(function(){E._start(g,y,b,N)},0)}a(m,o),m.prototype._start=function(g,y,b,N){var E=this;try{this.xhr=new c}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}y=i.addQuery(y,"t="+ +new Date),this.unloadRef=s.unloadAdd(function(){E._cleanup(!0)});try{this.xhr.open(g,y,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){d("xhr timeout"),E.emit("finish",0,""),E._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!N||!N.noCredentials)&&m.supportsCORS&&(this.xhr.withCredentials=!0),N&&N.headers)for(var j in N.headers)this.xhr.setRequestHeader(j,N.headers[j]);this.xhr.onreadystatechange=function(){if(E.xhr){var S=E.xhr,_,L;switch(d("readyState",S.readyState),S.readyState){case 3:try{L=S.status,_=S.responseText}catch{}L===1223&&(L=204),L===200&&_&&_.length>0&&E.emit("chunk",L,_);break;case 4:L=S.status,L===1223&&(L=204),(L===12005||L===12029)&&(L=0),d("finish",L,S.responseText),E.emit("finish",L,S.responseText),E._cleanup(!1);break}}};try{E.xhr.send(b)}catch{E.emit("finish",0,""),E._cleanup(!1)}},m.prototype._cleanup=function(g){if(this.xhr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),g)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},m.prototype.close=function(){this._cleanup(!0)},m.enabled=!!c;var h=["Active"].concat("Object").join("X");!m.enabled&&h in globalThis&&(c=function(){try{return new globalThis[h]("Microsoft.XMLHTTP")}catch{return null}},m.enabled=!!new c);var p=!1;try{p="withCredentials"in new c}catch{}return m.supportsCORS=p,Ld=m,Ld}var Ud,$0;function Jl(){if($0)return Ud;$0=1;var o=$e(),a=Ev();function s(i,c,d,m){a.call(this,i,c,d,m)}return o(s,a),s.enabled=a.enabled&&a.supportsCORS,Ud=s,Ud}var Gd,F0;function Wi(){if(F0)return Gd;F0=1;var o=$e(),a=Ev();function s(i,c,d){a.call(this,i,c,d,{noCredentials:!0})}return o(s,a),s.enabled=a.enabled,Gd=s,Gd}var Hd,X0;function Zi(){return X0||(X0=1,Hd={isOpera:function(){return globalThis.navigator&&/opera/i.test(globalThis.navigator.userAgent)},isKonqueror:function(){return globalThis.navigator&&/konqueror/i.test(globalThis.navigator.userAgent)},hasDomain:function(){if(!globalThis.document)return!0;try{return!!globalThis.document.domain}catch{return!1}}}),Hd}var zd,Q0;function CT(){if(Q0)return zd;Q0=1;var o=$e(),a=Ur(),s=Zl(),i=Jl(),c=Wi(),d=Zi();function m(h){if(!c.enabled&&!i.enabled)throw new Error("Transport created when disabled");a.call(this,h,"/xhr_streaming",s,i)}return o(m,a),m.enabled=function(h){return h.nullOrigin||d.isOpera()?!1:i.enabled},m.transportName="xhr-streaming",m.roundTrips=2,m.needBody=!!globalThis.document,zd=m,zd}var Pd,K0;function lm(){if(K0)return Pd;K0=1;var o=en().EventEmitter,a=$e(),s=Ja(),i=Zi(),c=On(),d=function(){};function m(h,p,g){var y=this;o.call(this),setTimeout(function(){y._start(h,p,g)},0)}return a(m,o),m.prototype._start=function(h,p,g){var y=this,b=new globalThis.XDomainRequest;p=c.addQuery(p,"t="+ +new Date),b.onerror=function(){y._error()},b.ontimeout=function(){y._error()},b.onprogress=function(){d("progress",b.responseText),y.emit("chunk",200,b.responseText)},b.onload=function(){y.emit("finish",200,b.responseText),y._cleanup(!1)},this.xdr=b,this.unloadRef=s.unloadAdd(function(){y._cleanup(!0)});try{this.xdr.open(h,p),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(g)}catch{this._error()}},m.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},m.prototype._cleanup=function(h){if(this.xdr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,h)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},m.prototype.close=function(){this._cleanup(!0)},m.enabled=!!(globalThis.XDomainRequest&&i.hasDomain()),Pd=m,Pd}var Vd,W0;function wv(){if(W0)return Vd;W0=1;var o=$e(),a=Ur(),s=Zl(),i=lm();function c(d){if(!i.enabled)throw new Error("Transport created when disabled");a.call(this,d,"/xhr_streaming",s,i)}return o(c,a),c.enabled=function(d){return d.cookie_needed||d.nullOrigin?!1:i.enabled&&d.sameScheme},c.transportName="xdr-streaming",c.roundTrips=2,Vd=c,Vd}var Bd,Z0;function Tv(){return Z0||(Z0=1,Bd=globalThis.EventSource),Bd}var qd,J0;function _T(){if(J0)return qd;J0=1;var o=$e(),a=en().EventEmitter,s=Tv(),i=function(){};function c(d){a.call(this);var m=this,h=this.es=new s(d);h.onmessage=function(p){i("message",p.data),m.emit("message",decodeURI(p.data))},h.onerror=function(p){i("error",h.readyState);var g=h.readyState!==2?"network":"permanent";m._cleanup(),m._close(g)}}return o(c,a),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){var d=this.es;d&&(d.onmessage=d.onerror=null,d.close(),this.es=null)},c.prototype._close=function(d){var m=this;setTimeout(function(){m.emit("close",null,d),m.removeAllListeners()},200)},qd=c,qd}var Yd,eb;function tb(){if(eb)return Yd;eb=1;var o=$e(),a=Ur(),s=_T(),i=Jl(),c=Tv();function d(m){if(!d.enabled())throw new Error("Transport created when disabled");a.call(this,m,"/eventsource",s,i)}return o(d,a),d.enabled=function(){return!!c},d.transportName="eventsource",d.roundTrips=2,Yd=d,Yd}var $d,nb;function jv(){return nb||(nb=1,$d="1.6.1"),$d}var Fd={exports:{}},ab;function Ji(){return ab||(ab=1,(function(o){var a=Ja(),s=Zi();o.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){o.exports.WPrefix in globalThis||(globalThis[o.exports.WPrefix]={})},postMessage:function(i,c){globalThis.parent!==globalThis&&globalThis.parent.postMessage(JSON.stringify({windowId:o.exports.currentWindowId,type:i,data:c||""}),"*")},createIframe:function(i,c){var d=globalThis.document.createElement("iframe"),m,h,p=function(){clearTimeout(m);try{d.onload=null}catch{}d.onerror=null},g=function(){d&&(p(),setTimeout(function(){d&&d.parentNode.removeChild(d),d=null},0),a.unloadDel(h))},y=function(N){d&&(g(),c(N))},b=function(N,E){setTimeout(function(){try{d&&d.contentWindow&&d.contentWindow.postMessage(N,E)}catch{}},0)};return d.src=i,d.style.display="none",d.style.position="absolute",d.onerror=function(){y("onerror")},d.onload=function(){clearTimeout(m),m=setTimeout(function(){y("onload timeout")},2e3)},globalThis.document.body.appendChild(d),m=setTimeout(function(){y("timeout")},15e3),h=a.unloadAdd(g),{post:b,cleanup:g,loaded:p}},createHtmlfile:function(i,c){var d=["Active"].concat("Object").join("X"),m=new globalThis[d]("htmlfile"),h,p,g,y=function(){clearTimeout(h),g.onerror=null},b=function(){m&&(y(),a.unloadDel(p),g.parentNode.removeChild(g),g=m=null,CollectGarbage())},N=function(S){m&&(b(),c(S))},E=function(S,_){try{setTimeout(function(){g&&g.contentWindow&&g.contentWindow.postMessage(S,_)},0)}catch{}};m.open(),m.write('<html><script>document.domain="'+globalThis.document.domain+'";<\/script></html>'),m.close(),m.parentWindow[o.exports.WPrefix]=globalThis[o.exports.WPrefix];var j=m.createElement("div");return m.body.appendChild(j),g=m.createElement("iframe"),j.appendChild(g),g.src=i,g.onerror=function(){N("onerror")},h=setTimeout(function(){N("timeout")},15e3),p=a.unloadAdd(b),{post:E,cleanup:b,loaded:y}}},o.exports.iframeEnabled=!1,globalThis.document&&(o.exports.iframeEnabled=(typeof globalThis.postMessage=="function"||typeof globalThis.postMessage=="object")&&!s.isKonqueror())})(Fd)),Fd.exports}var Xd,sb;function Rv(){if(sb)return Xd;sb=1;var o=$e(),a=en().EventEmitter,s=jv(),i=On(),c=Ji(),d=Ja(),m=Lr(),h=function(){};function p(g,y,b){if(!p.enabled())throw new Error("Transport created when disabled");a.call(this);var N=this;this.origin=i.getOrigin(b),this.baseUrl=b,this.transUrl=y,this.transport=g,this.windowId=m.string(8);var E=i.addPath(b,"/iframe.html")+"#"+this.windowId;this.iframeObj=c.createIframe(E,function(j){N.emit("close",1006,"Unable to load an iframe ("+j+")"),N.close()}),this.onmessageCallback=this._message.bind(this),d.attachEvent("message",this.onmessageCallback)}return o(p,a),p.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){d.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},p.prototype._message=function(g){if(h("message",g.data),!i.isOriginEqual(g.origin,this.origin)){h("not same origin",g.origin,this.origin);return}var y;try{y=JSON.parse(g.data)}catch{h("bad json",g.data);return}if(y.windowId!==this.windowId){h("mismatched window id",y.windowId,this.windowId);return}switch(y.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([s,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",y.data);break;case"c":var b;try{b=JSON.parse(y.data)}catch{h("bad json",y.data);return}this.emit("close",b[0],b[1]),this.close();break}},p.prototype.postMessage=function(g,y){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:g,data:y||""}),this.origin)},p.prototype.send=function(g){this.postMessage("m",g)},p.enabled=function(){return c.iframeEnabled},p.transportName="iframe",p.roundTrips=2,Xd=p,Xd}var Qd,rb;function cm(){return rb||(rb=1,Qd={isObject:function(o){var a=typeof o;return a==="function"||a==="object"&&!!o},extend:function(o){if(!this.isObject(o))return o;for(var a,s,i=1,c=arguments.length;i<c;i++){a=arguments[i];for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])}return o}}),Qd}var Kd,ib;function Wd(){if(ib)return Kd;ib=1;var o=$e(),a=Rv(),s=cm();return Kd=function(i){function c(d,m){a.call(this,i.transportName,d,m)}return o(c,a),c.enabled=function(d,m){if(!globalThis.document)return!1;var h=s.extend({},m);return h.sameOrigin=!0,i.enabled(h)&&a.enabled()},c.transportName="iframe-"+i.transportName,c.needBody=!0,c.roundTrips=a.roundTrips+i.roundTrips-1,c.facadeTransport=i,c},Kd}var Zd,ob;function AT(){if(ob)return Zd;ob=1;var o=$e(),a=Ji(),s=On(),i=en().EventEmitter,c=Lr(),d=function(){};function m(p){i.call(this);var g=this;a.polluteGlobalNamespace(),this.id="a"+c.string(6),p=s.addQuery(p,"c="+decodeURIComponent(a.WPrefix+"."+this.id)),d("using htmlfile",m.htmlfileEnabled);var y=m.htmlfileEnabled?a.createHtmlfile:a.createIframe;globalThis[a.WPrefix][this.id]={start:function(){g.iframeObj.loaded()},message:function(b){g.emit("message",b)},stop:function(){g._cleanup(),g._close("network")}},this.iframeObj=y(p,function(){g._cleanup(),g._close("permanent")})}o(m,i),m.prototype.abort=function(){this._cleanup(),this._close("user")},m.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete globalThis[a.WPrefix][this.id]},m.prototype._close=function(p){this.emit("close",null,p),this.removeAllListeners()},m.htmlfileEnabled=!1;var h=["Active"].concat("Object").join("X");if(h in globalThis)try{m.htmlfileEnabled=!!new globalThis[h]("htmlfile")}catch{}return m.enabled=m.htmlfileEnabled||a.iframeEnabled,Zd=m,Zd}var Jd,lb;function cb(){if(lb)return Jd;lb=1;var o=$e(),a=AT(),s=Wi(),i=Ur();function c(d){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,d,"/htmlfile",a,s)}return o(c,i),c.enabled=function(d){return a.enabled&&d.sameOrigin},c.transportName="htmlfile",c.roundTrips=2,Jd=c,Jd}var ef,ub;function db(){if(ub)return ef;ub=1;var o=$e(),a=Ur(),s=Zl(),i=Jl(),c=Wi();function d(m){if(!c.enabled&&!i.enabled)throw new Error("Transport created when disabled");a.call(this,m,"/xhr",s,i)}return o(d,a),d.enabled=function(m){return m.nullOrigin?!1:c.enabled&&m.sameOrigin?!0:i.enabled},d.transportName="xhr-polling",d.roundTrips=2,ef=d,ef}var tf,fb;function OT(){if(fb)return tf;fb=1;var o=$e(),a=Ur(),s=wv(),i=Zl(),c=lm();function d(m){if(!c.enabled)throw new Error("Transport created when disabled");a.call(this,m,"/xhr",i,c)}return o(d,a),d.enabled=s.enabled,d.transportName="xdr-polling",d.roundTrips=2,tf=d,tf}var nf,mb;function DT(){if(mb)return nf;mb=1;var o=Ji(),a=Lr(),s=Zi(),i=On(),c=$e(),d=en().EventEmitter,m=function(){};function h(p){var g=this;d.call(this),o.polluteGlobalNamespace(),this.id="a"+a.string(6);var y=i.addQuery(p,"c="+encodeURIComponent(o.WPrefix+"."+this.id));globalThis[o.WPrefix][this.id]=this._callback.bind(this),this._createScript(y),this.timeoutId=setTimeout(function(){g._abort(new Error("JSONP script loaded abnormally (timeout)"))},h.timeout)}return c(h,d),h.prototype.abort=function(){if(globalThis[o.WPrefix][this.id]){var p=new Error("JSONP user aborted read");p.code=1e3,this._abort(p)}},h.timeout=35e3,h.scriptErrorTimeout=1e3,h.prototype._callback=function(p){this._cleanup(),!this.aborting&&(p&&this.emit("message",p),this.emit("close",null,"network"),this.removeAllListeners())},h.prototype._abort=function(p){this._cleanup(),this.aborting=!0,this.emit("close",p.code,p.message),this.removeAllListeners()},h.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var p=this.script;p.parentNode.removeChild(p),p.onreadystatechange=p.onerror=p.onload=p.onclick=null,this.script=null}delete globalThis[o.WPrefix][this.id]},h.prototype._scriptError=function(){var p=this;this.errorTimer||(this.errorTimer=setTimeout(function(){p.loadedOkay||p._abort(new Error("JSONP script loaded abnormally (onerror)"))},h.scriptErrorTimeout))},h.prototype._createScript=function(p){var g=this,y=this.script=globalThis.document.createElement("script"),b;if(y.id="a"+a.string(8),y.src=p,y.type="text/javascript",y.charset="UTF-8",y.onerror=this._scriptError.bind(this),y.onload=function(){g._abort(new Error("JSONP script loaded abnormally (onload)"))},y.onreadystatechange=function(){if(m("onreadystatechange",y.readyState),/loaded|closed/.test(y.readyState)){if(y&&y.htmlFor&&y.onclick){g.loadedOkay=!0;try{y.onclick()}catch{}}y&&g._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof y.async>"u"&&globalThis.document.attachEvent)if(s.isOpera())b=this.script2=globalThis.document.createElement("script"),b.text="try{var a = document.getElementById('"+y.id+"'); if(a)a.onerror();}catch(x){};",y.async=b.async=!1;else{try{y.htmlFor=y.id,y.event="onclick"}catch{}y.async=!0}typeof y.async<"u"&&(y.async=!0);var N=globalThis.document.getElementsByTagName("head")[0];N.insertBefore(y,N.firstChild),b&&N.insertBefore(b,N.firstChild)},nf=h,nf}var af,hb;function MT(){if(hb)return af;hb=1;var o=Lr(),a=On(),s=function(){},i,c;function d(h){try{return globalThis.document.createElement('<iframe name="'+h+'">')}catch{var p=globalThis.document.createElement("iframe");return p.name=h,p}}function m(){i=globalThis.document.createElement("form"),i.style.display="none",i.style.position="absolute",i.method="POST",i.enctype="application/x-www-form-urlencoded",i.acceptCharset="UTF-8",c=globalThis.document.createElement("textarea"),c.name="d",i.appendChild(c),globalThis.document.body.appendChild(i)}return af=function(h,p,g){i||m();var y="a"+o.string(8);i.target=y,i.action=a.addQuery(a.addPath(h,"/jsonp_send"),"i="+y);var b=d(y);b.id=y,b.style.display="none",i.appendChild(b);try{c.value=p}catch{}i.submit();var N=function(E){b.onerror&&(b.onreadystatechange=b.onerror=b.onload=null,setTimeout(function(){b.parentNode.removeChild(b),b=null},500),c.value="",g(E))};return b.onerror=function(){N()},b.onload=function(){N()},b.onreadystatechange=function(E){s("onreadystatechange",y,b.readyState),b.readyState==="complete"&&N()},function(){N(new Error("Aborted"))}},af}var sf,pb;function IT(){if(pb)return sf;pb=1;var o=$e(),a=Nv(),s=DT(),i=MT();function c(d){if(!c.enabled())throw new Error("Transport created when disabled");a.call(this,d,"/jsonp",i,s)}return o(c,a),c.enabled=function(){return!!globalThis.document},c.transportName="jsonp-polling",c.roundTrips=1,c.needBody=!0,sf=c,sf}var rf,gb;function kT(){return gb||(gb=1,rf=[TT(),CT(),wv(),tb(),Wd()(tb()),cb(),Wd()(cb()),db(),OT(),Wd()(db()),IT()]),rf}var bb={},yb;function LT(){if(yb)return bb;yb=1;var o=Array.prototype,a=Object.prototype,s=Function.prototype,i=String.prototype,c=o.slice,d=a.toString,m=function(z){return a.toString.call(z)==="[object Function]"},h=function(I){return d.call(I)==="[object Array]"},p=function(I){return d.call(I)==="[object String]"},g=Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})(),y;g?y=function(z,I,G,Q){!Q&&I in z||Object.defineProperty(z,I,{configurable:!0,enumerable:!1,writable:!0,value:G})}:y=function(z,I,G,Q){!Q&&I in z||(z[I]=G)};var b=function(z,I,G){for(var Q in I)a.hasOwnProperty.call(I,Q)&&y(z,Q,I[Q],G)},N=function(z){if(z==null)throw new TypeError("can't convert "+z+" to object");return Object(z)};function E(z){var I=+z;return I!==I?I=0:I!==0&&I!==1/0&&I!==-1/0&&(I=(I>0||-1)*Math.floor(Math.abs(I))),I}function j(z){return z>>>0}function S(){}b(s,{bind:function(I){var G=this;if(!m(G))throw new TypeError("Function.prototype.bind called on incompatible "+G);for(var Q=c.call(arguments,1),ae=function(){if(this instanceof oe){var M=G.apply(this,Q.concat(c.call(arguments)));return Object(M)===M?M:this}else return G.apply(I,Q.concat(c.call(arguments)))},le=Math.max(0,G.length-Q.length),K=[],se=0;se<le;se++)K.push("$"+se);var oe=Function("binder","return function ("+K.join(",")+"){ return binder.apply(this, arguments); }")(ae);return G.prototype&&(S.prototype=G.prototype,oe.prototype=new S,S.prototype=null),oe}}),b(Array,{isArray:h});var _=Object("a"),L=_[0]!=="a"||!(0 in _),R=function(I){var G=!0,Q=!0;return I&&(I.call("foo",function(ae,le,K){typeof K!="object"&&(G=!1)}),I.call([1],function(){Q=typeof this=="string"},"x")),!!I&&G&&Q};b(o,{forEach:function(I){var G=N(this),Q=L&&p(this)?this.split(""):G,ae=arguments[1],le=-1,K=Q.length>>>0;if(!m(I))throw new TypeError;for(;++le<K;)le in Q&&I.call(ae,Q[le],le,G)}},!R(o.forEach));var T=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;b(o,{indexOf:function(I){var G=L&&p(this)?this.split(""):N(this),Q=G.length>>>0;if(!Q)return-1;var ae=0;for(arguments.length>1&&(ae=E(arguments[1])),ae=ae>=0?ae:Math.max(0,Q+ae);ae<Q;ae++)if(ae in G&&G[ae]===I)return ae;return-1}},T);var A=i.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?(function(){var z=/()??/.exec("")[1]===void 0;i.split=function(I,G){var Q=this;if(I===void 0&&G===0)return[];if(d.call(I)!=="[object RegExp]")return A.call(this,I,G);var ae=[],le=(I.ignoreCase?"i":"")+(I.multiline?"m":"")+(I.extended?"x":"")+(I.sticky?"y":""),K=0,se,oe,M,H;for(I=new RegExp(I.source,le+"g"),Q+="",z||(se=new RegExp("^"+I.source+"$(?!\\s)",le)),G=G===void 0?-1>>>0:j(G);(oe=I.exec(Q))&&(M=oe.index+oe[0].length,!(M>K&&(ae.push(Q.slice(K,oe.index)),!z&&oe.length>1&&oe[0].replace(se,function(){for(var ee=1;ee<arguments.length-2;ee++)arguments[ee]===void 0&&(oe[ee]=void 0)}),oe.length>1&&oe.index<Q.length&&o.push.apply(ae,oe.slice(1)),H=oe[0].length,K=M,ae.length>=G)));)I.lastIndex===oe.index&&I.lastIndex++;return K===Q.length?(H||!I.test(""))&&ae.push(""):ae.push(Q.slice(K)),ae.length>G?ae.slice(0,G):ae}})():"0".split(void 0,0).length&&(i.split=function(I,G){return I===void 0&&G===0?[]:A.call(this,I,G)});var D=i.substr,Y="".substr&&"0b".substr(-1)!=="b";return b(i,{substr:function(I,G){return D.call(this,I<0&&(I=this.length+I)<0?0:I,G)}},Y),bb}var of,vb;function UT(){if(vb)return of;vb=1;var o=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,a,s=function(i){var c,d={},m=[];for(c=0;c<65536;c++)m.push(String.fromCharCode(c));return i.lastIndex=0,m.join("").replace(i,function(h){return d[h]="\\u"+("0000"+h.charCodeAt(0).toString(16)).slice(-4),""}),i.lastIndex=0,d};return of={quote:function(i){var c=JSON.stringify(i);return o.lastIndex=0,o.test(c)?(a||(a=s(o)),c.replace(o,function(d){return a[d]})):c}},of}var lf,xb;function GT(){if(xb)return lf;xb=1;var o=function(){};return lf=function(a){return{filterToEnabled:function(s,i){var c={main:[],facade:[]};return s?typeof s=="string"&&(s=[s]):s=[],a.forEach(function(d){if(d&&!(d.transportName==="websocket"&&i.websocket===!1)){if(s.length&&s.indexOf(d.transportName)===-1){o("not in whitelist",d.transportName);return}d.enabled(i)?(o("enabled",d.transportName),c.main.push(d),d.facadeTransport&&c.facade.push(d.facadeTransport)):o("disabled",d.transportName)}}),c}}},lf}var cf,Sb;function HT(){if(Sb)return cf;Sb=1;var o={};return["log","debug","warn"].forEach(function(a){var s;try{s=globalThis.console&&globalThis.console[a]&&globalThis.console[a].apply}catch{}o[a]=s?function(){return globalThis.console[a].apply(globalThis.console,arguments)}:a==="log"?function(){}:o.log}),cf=o,cf}var uf,Nb;function um(){if(Nb)return uf;Nb=1;function o(a){this.type=a}return o.prototype.initEvent=function(a,s,i){return this.type=a,this.bubbles=s,this.cancelable=i,this.timeStamp=+new Date,this},o.prototype.stopPropagation=function(){},o.prototype.preventDefault=function(){},o.CAPTURING_PHASE=1,o.AT_TARGET=2,o.BUBBLING_PHASE=3,uf=o,uf}var df,Eb;function Cv(){return Eb||(Eb=1,df=globalThis.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}),df}var ff,wb;function zT(){if(wb)return ff;wb=1;var o=$e(),a=um();function s(){a.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}return o(s,a),ff=s,ff}var mf,Tb;function PT(){if(Tb)return mf;Tb=1;var o=$e(),a=um();function s(i){a.call(this),this.initEvent("message",!1,!1),this.data=i}return o(s,a),mf=s,mf}var hf,jb;function VT(){if(jb)return hf;jb=1;var o=en().EventEmitter,a=$e();function s(){var i=this;o.call(this),this.to=setTimeout(function(){i.emit("finish",200,"{}")},s.timeout)}return a(s,o),s.prototype.close=function(){clearTimeout(this.to)},s.timeout=2e3,hf=s,hf}var pf,Rb;function _v(){if(Rb)return pf;Rb=1;var o=en().EventEmitter,a=$e(),s=cm();function i(c,d){o.call(this);var m=this,h=+new Date;this.xo=new d("GET",c),this.xo.once("finish",function(p,g){var y,b;if(p===200){if(b=+new Date-h,g)try{y=JSON.parse(g)}catch{}s.isObject(y)||(y={})}m.emit("finish",y,b),m.removeAllListeners()})}return a(i,o),i.prototype.close=function(){this.removeAllListeners(),this.xo.close()},pf=i,pf}var gf,Cb;function Av(){if(Cb)return gf;Cb=1;var o=$e(),a=en().EventEmitter,s=Wi(),i=_v();function c(d){var m=this;a.call(this),this.ir=new i(d,s),this.ir.once("finish",function(h,p){m.ir=null,m.emit("message",JSON.stringify([h,p]))})}return o(c,a),c.transportName="iframe-info-receiver",c.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},gf=c,gf}var bf,_b;function BT(){if(_b)return bf;_b=1;var o=en().EventEmitter,a=$e(),s=Ja(),i=Rv(),c=Av();function d(m,h){var p=this;o.call(this);var g=function(){var y=p.ifr=new i(c.transportName,h,m);y.once("message",function(b){if(b){var N;try{N=JSON.parse(b)}catch{p.emit("finish"),p.close();return}var E=N[0],j=N[1];p.emit("finish",E,j)}p.close()}),y.once("close",function(){p.emit("finish"),p.close()})};globalThis.document.body?g():s.attachEvent("load",g)}return a(d,o),d.enabled=function(){return i.enabled()},d.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},bf=d,bf}var yf,Ab;function qT(){if(Ab)return yf;Ab=1;var o=en().EventEmitter,a=$e(),s=On(),i=lm(),c=Jl(),d=Wi(),m=VT(),h=BT(),p=_v();function g(y,b){var N=this;o.call(this),setTimeout(function(){N.doXhr(y,b)},0)}return a(g,o),g._getReceiver=function(y,b,N){return N.sameOrigin?new p(b,d):c.enabled?new p(b,c):i.enabled&&N.sameScheme?new p(b,i):h.enabled()?new h(y,b):new p(b,m)},g.prototype.doXhr=function(y,b){var N=this,E=s.addPath(y,"/info");this.xo=g._getReceiver(y,E,b),this.timeoutRef=setTimeout(function(){N._cleanup(!1),N.emit("finish")},g.timeout),this.xo.once("finish",function(j,S){N._cleanup(!0),N.emit("finish",j,S)})},g.prototype._cleanup=function(y){clearTimeout(this.timeoutRef),this.timeoutRef=null,!y&&this.xo&&this.xo.close(),this.xo=null},g.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},g.timeout=8e3,yf=g,yf}var vf,Ob;function YT(){if(Ob)return vf;Ob=1;var o=Ji();function a(s){this._transport=s,s.on("message",this._transportMessage.bind(this)),s.on("close",this._transportClose.bind(this))}return a.prototype._transportClose=function(s,i){o.postMessage("c",JSON.stringify([s,i]))},a.prototype._transportMessage=function(s){o.postMessage("t",s)},a.prototype._send=function(s){this._transport.send(s)},a.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},vf=a,vf}var xf,Db;function $T(){if(Db)return xf;Db=1;var o=On(),a=Ja(),s=YT(),i=Av(),c=Ji(),d=Cv(),m=function(){};return xf=function(h,p){var g={};p.forEach(function(b){b.facadeTransport&&(g[b.facadeTransport.transportName]=b.facadeTransport)}),g[i.transportName]=i;var y;h.bootstrap_iframe=function(){var b;c.currentWindowId=d.hash.slice(1);var N=function(E){if(E.source===parent&&(typeof y>"u"&&(y=E.origin),E.origin===y)){var j;try{j=JSON.parse(E.data)}catch{m("bad json",E.data);return}if(j.windowId===c.currentWindowId)switch(j.type){case"s":var S;try{S=JSON.parse(j.data)}catch{m("bad json",j.data);break}var _=S[0],L=S[1],R=S[2],T=S[3];if(_!==h.version)throw new Error('Incompatible SockJS! Main site uses: "'+_+'", the iframe: "'+h.version+'".');if(!o.isOriginEqual(R,d.href)||!o.isOriginEqual(T,d.href))throw new Error("Can't connect to different domain from within an iframe. ("+d.href+", "+R+", "+T+")");b=new s(new g[L](R,T));break;case"m":b._send(j.data);break;case"c":b&&b._close(),b=null;break}}};a.attachEvent("message",N),c.postMessage("s")}},xf}var Sf,Mb;function FT(){if(Mb)return Sf;Mb=1,LT();var o=xv(),a=$e(),s=Lr(),i=UT(),c=On(),d=Ja(),m=GT(),h=cm(),p=Zi(),g=HT(),y=um(),b=Sv(),N=Cv(),E=zT(),j=PT(),S=qT(),_=function(){},L;function R(A,D,Y){if(!(this instanceof R))return new R(A,D,Y);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");b.call(this),this.readyState=R.CONNECTING,this.extensions="",this.protocol="",Y=Y||{},Y.protocols_whitelist&&g.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=Y.transports,this._transportOptions=Y.transportOptions||{},this._timeout=Y.timeout||0;var z=Y.sessionId||8;if(typeof z=="function")this._generateSessionId=z;else if(typeof z=="number")this._generateSessionId=function(){return s.string(z)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=Y.server||s.numberString(1e3);var I=new o(A);if(!I.host||!I.protocol)throw new SyntaxError("The URL '"+A+"' is invalid");if(I.hash)throw new SyntaxError("The URL must not contain a fragment");if(I.protocol!=="http:"&&I.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+I.protocol+"' is not allowed.");var G=I.protocol==="https:";if(N.protocol==="https:"&&!G&&!c.isLoopbackAddr(I.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");D?Array.isArray(D)||(D=[D]):D=[];var Q=D.sort();Q.forEach(function(le,K){if(!le)throw new SyntaxError("The protocols entry '"+le+"' is invalid.");if(K<Q.length-1&&le===Q[K+1])throw new SyntaxError("The protocols entry '"+le+"' is duplicated.")});var ae=c.getOrigin(N.href);this._origin=ae?ae.toLowerCase():null,I.set("pathname",I.pathname.replace(/\/+$/,"")),this.url=I.href,_("using url",this.url),this._urlInfo={nullOrigin:!p.hasDomain(),sameOrigin:c.isOriginEqual(this.url,N.href),sameScheme:c.isSchemeEqual(this.url,N.href)},this._ir=new S(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}a(R,b);function T(A){return A===1e3||A>=3e3&&A<=4999}return R.prototype.close=function(A,D){if(A&&!T(A))throw new Error("InvalidAccessError: Invalid code");if(D&&D.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===R.CLOSING||this.readyState===R.CLOSED)){var Y=!0;this._close(A||1e3,D||"Normal closure",Y)}},R.prototype.send=function(A){if(typeof A!="string"&&(A=""+A),this.readyState===R.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===R.OPEN&&this._transport.send(i.quote(A))},R.version=jv(),R.CONNECTING=0,R.OPEN=1,R.CLOSING=2,R.CLOSED=3,R.prototype._receiveInfo=function(A,D){if(this._ir=null,!A){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(D),this._transUrl=A.base_url?A.base_url:this.url,A=h.extend(A,this._urlInfo);var Y=L.filterToEnabled(this._transportsWhitelist,A);this._transports=Y.main,_(this._transports.length+" enabled transports"),this._connect()},R.prototype._connect=function(){for(var A=this._transports.shift();A;A=this._transports.shift()){if(_("attempt",A.transportName),A.needBody&&(!globalThis.document.body||typeof globalThis.document.readyState<"u"&&globalThis.document.readyState!=="complete"&&globalThis.document.readyState!=="interactive")){this._transports.unshift(A),d.attachEvent("load",this._connect.bind(this));return}var D=Math.max(this._timeout,this._rto*A.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),D);var Y=c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),z=this._transportOptions[A.transportName],I=new A(Y,this._transUrl,z);I.on("message",this._transportMessage.bind(this)),I.once("close",this._transportClose.bind(this)),I.transportName=A.transportName,this._transport=I;return}this._close(2e3,"All transports failed",!1)},R.prototype._transportTimeout=function(){this.readyState===R.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},R.prototype._transportMessage=function(A){var D=this,Y=A.slice(0,1),z=A.slice(1),I;switch(Y){case"o":this._open();return;case"h":this.dispatchEvent(new y("heartbeat")),_("heartbeat",this.transport);return}if(z)try{I=JSON.parse(z)}catch{}if(!(typeof I>"u"))switch(Y){case"a":Array.isArray(I)&&I.forEach(function(G){_("message",D.transport),D.dispatchEvent(new j(G))});break;case"m":_("message",this.transport),this.dispatchEvent(new j(I));break;case"c":Array.isArray(I)&&I.length===2&&this._close(I[0],I[1],!0);break}},R.prototype._transportClose=function(A,D){if(_("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!T(A)&&A!==2e3&&this.readyState===R.CONNECTING){this._connect();return}this._close(A,D)},R.prototype._open=function(){_("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===R.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=R.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new y("open")),_("connected",this.transport)):this._close(1006,"Server lost session")},R.prototype._close=function(A,D,Y){_("_close",this.transport,A,D,Y,this.readyState);var z=!1;if(this._ir&&(z=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===R.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=R.CLOSING,setTimeout(function(){this.readyState=R.CLOSED,z&&this.dispatchEvent(new y("error"));var I=new E("close");I.wasClean=Y||!1,I.code=A||1e3,I.reason=D,this.dispatchEvent(I),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},R.prototype.countRTO=function(A){return A>100?4*A:300+A},Sf=function(A){return L=m(A),$T()(R,A),R},Sf}var Nf,Ib;function XT(){if(Ib)return Nf;Ib=1;var o=kT();return Nf=FT()(o),"_sockjs_onload"in globalThis&&setTimeout(globalThis._sockjs_onload,1),Nf}var QT=XT();const KT=XE(QT),Pl="liargame:",Es={authToken:"auth-token",authStore:"auth-storage",websocketSession:`${Pl}websocket-session-id`,websocketLegacy:"websocket-session-id",schemaVersion:`${Pl}schemaVersion`},eo=typeof window<"u";function Xa(o){if(eo)try{window.localStorage.removeItem(o)}catch(a){console.warn("[sessionCleanup] Failed to remove localStorage key",o,a)}}function WT(o){if(eo)try{const a=[];for(let s=0;s<window.localStorage.length;s+=1){const i=window.localStorage.key(s);i&&i.startsWith(o)&&a.push(i)}a.forEach(Xa)}catch(a){console.warn("[sessionCleanup] Failed to inspect localStorage",a)}}function ZT(o){if(eo)try{const a=[];for(let s=0;s<window.sessionStorage.length;s+=1){const i=window.sessionStorage.key(s);i&&i.startsWith(o)&&a.push(i)}a.forEach(s=>{try{window.sessionStorage.removeItem(s)}catch(i){console.warn("[sessionCleanup] Failed to remove sessionStorage key",s,i)}})}catch(a){console.warn("[sessionCleanup] Failed to inspect sessionStorage",a)}}async function Ov(o={}){if(!eo)return;const{reason:a="manual",disconnectWebsocket:s=!0,broadcastEvent:i=!0}=o;if(Xa(Es.authToken),Xa(Es.authStore),Xa(Es.websocketLegacy),Xa(Es.websocketSession),Xa(Es.schemaVersion),WT(Pl),ZT(Pl),s)try{const{websocketService:c}=await _r(async()=>{const{websocketService:d}=await Promise.resolve().then(()=>Cl);return{websocketService:d}},void 0);c.disconnect()}catch(c){console.warn("[sessionCleanup] Failed to disconnect websocketService",c)}i&&window.dispatchEvent(new CustomEvent("auth-session-expired",{detail:{reason:a}}))}function Dv(){eo&&(Xa(Es.websocketLegacy),Xa(Es.websocketSession))}class JT{constructor(){Oe(this,"client",null);Oe(this,"isConnected",!1);Oe(this,"reconnectAttempts",0);Oe(this,"maxReconnectAttempts",10);Oe(this,"baseReconnectDelay",1e3);Oe(this,"maxReconnectDelay",3e4);Oe(this,"connectionTimeout",15e3);Oe(this,"heartbeatInterval",null);Oe(this,"currentGameId",null);Oe(this,"lastSubscriptionUserId",null);Oe(this,"eventCallbacks",new Map);Oe(this,"chatCallbacks",[]);Oe(this,"connectionCallbacks",[]);Oe(this,"lobbyCallbacks",[]);Oe(this,"lobbySubscriptionKey","lobby");Oe(this,"subscriptions",new Map);Oe(this,"messageQueue",[]);Oe(this,"maxQueue",100);Oe(this,"maxMessageAttempts",3);Oe(this,"outboundListeners",[]);Oe(this,"rawListeners",[]);Oe(this,"pingInterval",null);Oe(this,"lastHeartbeatAck",Date.now());Oe(this,"pendingGameSubscriptions",new Map);Oe(this,"lobbySubscriptionPending",!1);Oe(this,"pendingSubscriptionFlushTimer",null);Oe(this,"maxSubscriptionAttempts",5);Oe(this,"connectionState","disconnected");Oe(this,"userConnectionKey","user-connection");Oe(this,"userHeartbeatKey","user-heartbeat");Oe(this,"storageKeys",{session:"liargame:websocket-session-id",legacy:"websocket-session-id"});Oe(this,"connectionNoticeIds",new Set);this.setupClient()}connect(){return new Promise((a,s)=>{if(this.connectionState==="connected"){a();return}if(this.client?.connected){this.connectionState="connected",this.isConnected=!0,a();return}if(this.connectionState==="connecting"){const d=()=>{this.connectionState==="connected"?a():this.connectionState==="disconnected"?s(new Error("Connection failed")):setTimeout(d,100)};d();return}this.connectionState="connecting";const i=setTimeout(()=>{this.connectionState==="connecting"&&(this.connectionState="disconnected",s(new Error("Connection timeout")))},this.connectionTimeout),c=d=>{clearTimeout(i),this.removeConnectionCallback(c),d?a():s(new Error("Connection failed"))};this.addConnectionCallback(c);try{this.ensureClient().activate()}catch(d){this.connectionState="disconnected",s(d instanceof Error?d:new Error("Failed to initialize WebSocket client"));return}})}disconnect(){if(this.connectionState="disconnected",this.clearStoredSessionId(),this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.subscriptions.forEach((a,s)=>{try{a.unsubscribe()}catch(i){console.warn(`Error unsubscribing from ${s}:`,i)}}),this.subscriptions.clear(),this.client)try{this.client.deactivate()}catch(a){console.warn("Error deactivating WebSocket client:",a)}this.isConnected=!1,this.currentGameId=null,this.reconnectAttempts=0,this.messageQueue=[],this.pendingGameSubscriptions.clear(),this.lobbySubscriptionPending=!1,this.pendingSubscriptionFlushTimer&&(clearTimeout(this.pendingSubscriptionFlushTimer),this.pendingSubscriptionFlushTimer=null),console.log("WebSocket service disconnected and cleaned up"),this.clearConnectionNotices()}onRoomDeleted(a){return this.onGameEvent("ROOM_DELETED",a)}subscribeToGame(a,s){this.currentGameId=a,s!==void 0&&(this.lastSubscriptionUserId=s);const i=this.pendingGameSubscriptions.get(a);if(i?(i.userId=s??i.userId,i.attempts=0,this.pendingGameSubscriptions.set(a,i)):this.pendingGameSubscriptions.set(a,{userId:s,attempts:0}),!this.client||!this.isConnected||!this.client.connected){console.warn("Cannot subscribe - WebSocket not connected; deferring subscription",{gameId:a}),this.requestPendingSubscriptionFlush();return}try{this.performGameSubscription(a,s),this.pendingGameSubscriptions.delete(a)}catch(c){if(this.isStompConnectionError(c)){console.warn("STOMP connection not ready, retrying game subscription soon",{gameId:a}),this.requestPendingSubscriptionFlush();return}throw c}}unsubscribeFromGame(a,s){const i=s??this.lastSubscriptionUserId??void 0;this.pendingGameSubscriptions.delete(a);const c=this.subscriptions.get(`game-state-${a}`);c&&(c.unsubscribe(),this.subscriptions.delete(`game-state-${a}`));const d=this.subscriptions.get(`game-events-${a}`);d&&(d.unsubscribe(),this.subscriptions.delete(`game-events-${a}`));const m=this.subscriptions.get(`player-status-${a}`);m&&(m.unsubscribe(),this.subscriptions.delete(`player-status-${a}`));const h=this.subscriptions.get(`game-status-${a}`);h&&(h.unsubscribe(),this.subscriptions.delete(`game-status-${a}`));const p=this.subscriptions.get(`chat-${a}`);p&&(p.unsubscribe(),this.subscriptions.delete(`chat-${a}`));const g=this.subscriptions.get(`chat-legacy-${a}`);if(g&&(g.unsubscribe(),this.subscriptions.delete(`chat-legacy-${a}`)),i){const y=this.subscriptions.get(`notifications-${i}`);y&&(y.unsubscribe(),this.subscriptions.delete(`notifications-${i}`))}this.currentGameId===a&&(this.currentGameId=null),(!i||this.lastSubscriptionUserId===i)&&(this.lastSubscriptionUserId=null),console.log(`Unsubscribed from game: ${a}`)}onLobbyUpdate(a){return this.lobbyCallbacks.push(a),this.isConnected?this.subscribeToLobby():(this.lobbySubscriptionPending=!0,this.requestPendingSubscriptionFlush()),()=>{if(this.lobbyCallbacks=this.lobbyCallbacks.filter(s=>s!==a),this.lobbyCallbacks.length===0){const s=this.subscriptions.get(this.lobbySubscriptionKey);if(s){try{s.unsubscribe()}catch(i){console.warn("Error unsubscribing from lobby updates:",i)}this.subscriptions.delete(this.lobbySubscriptionKey)}this.lobbySubscriptionPending=!1}}}onGameEvent(a,s){return this.eventCallbacks.has(a)||this.eventCallbacks.set(a,[]),this.eventCallbacks.get(a).push(s),()=>{const i=this.eventCallbacks.get(a);if(i){const c=i.indexOf(s);c>-1&&i.splice(c,1)}}}onChatMessage(a){return this.chatCallbacks.push(a),()=>{const s=this.chatCallbacks.indexOf(a);s>-1&&this.chatCallbacks.splice(s,1)}}ensureLobbySubscription(){this.isConnected?this.subscribeToLobby():this.lobbyCallbacks.length>0&&(this.lobbySubscriptionPending=!0,this.requestPendingSubscriptionFlush())}addConnectionCallback(a){this.connectionCallbacks.push(a)}removeConnectionCallback(a){const s=this.connectionCallbacks.indexOf(a);s>-1&&this.connectionCallbacks.splice(s,1)}registerRawListener(a){return this.rawListeners.push(a),()=>{this.rawListeners=this.rawListeners.filter(s=>s!==a)}}processQueue(){this.flushQueue()}safePublish(a,s){if(!this.client||!this.client.connected||!this.isConnected)return this.queueMessage(a,s);try{this.client.publish({destination:a,body:JSON.stringify(s)}),this.outboundListeners.forEach(i=>i({destination:a,body:s,sentAt:Date.now()}));return}catch(i){return console.warn("Failed to publish immediately, queueing message",{destination:a,error:i}),this.queueMessage(a,s)}}sendChatMessage(a,s,i){const c=i?.type??"DISCUSSION",d={gameNumber:Number(a),content:s,type:c};i?.nickname&&(d.playerNickname=i.nickname);const m=this.client;if(!m||!m.connected||!this.isConnected){this.safePublish("/app/chat.send",d)&&(this.showConnectionNotice("chat"),this.ensureConnectionAttempt());return}try{m.publish({destination:"/app/chat.send",body:JSON.stringify(d)})}catch(h){console.warn("Falling back to queued send for chat message",{gameId:a,error:h}),this.safePublish("/app/chat.send",d)&&(this.showConnectionNotice("chat"),this.ensureConnectionAttempt())}}sendGameAction(a,s,i={}){const c=this.client;if(!c||!c.connected||!this.isConnected){this.safePublish(`/app/game/${a}/${s}`,i)&&(this.showConnectionNotice("action"),this.ensureConnectionAttempt());return}try{c.publish({destination:`/app/game/${a}/${s}`,body:JSON.stringify(i)})}catch(d){console.warn("Falling back to queued send for game action",{gameId:a,action:s,error:d}),this.safePublish(`/app/game/${a}/${s}`,i)&&(this.showConnectionNotice("action"),this.ensureConnectionAttempt())}}sendTopicGuess(a,s){this.sendGameAction(a,"guess-topic",{guess:s})}getConnectionState(){return this.connectionState}sendHint(a,s){this.sendGameAction(a,"hint",{hint:s})}sendVote(a,s){this.sendGameAction(a,"vote",{targetUserId:s})}sendDefense(a,s){this.sendGameAction(a,"defense",{defenseText:s})}sendFinalVote(a,s){this.sendGameAction(a,"final-vote",{voteForExecution:s})}sendWordGuess(a,s){this.sendGameAction(a,"guess",{guess:s})}getQueuedMessageCount(){return this.messageQueue.length}sendEndDefense(a){this.sendGameAction(a,"end-defense",{})}sendEndRound(a){this.sendGameAction(a,"end-round",{})}onHintProvided(a){return this.onGameEvent("HINT_PROVIDED",a)}onVoteCast(a){return this.onGameEvent("VOTE_CAST",a)}onDefenseSubmitted(a){return this.onGameEvent("DEFENSE_SUBMITTED",a)}onPhaseChanged(a){return this.onGameEvent("PHASE_CHANGED",a)}onTimerUpdate(a){return this.onGameEvent("TIMER_UPDATE",a)}onGameStateUpdate(a){return this.onGameEvent("GAME_STATE_UPDATED",a)}onRoundEnded(a){return this.onGameEvent("ROUND_ENDED",a)}onGameEnded(a){return this.onGameEvent("GAME_ENDED",a)}getConnectionStatus(){return this.isConnected}clearMessageQueue(){this.messageQueue=[],console.log("Message queue cleared")}getCurrentGameId(){return this.currentGameId}getReconnectAttempts(){return this.reconnectAttempts}performGameSubscription(a,s){const i=this.client;if(!i)throw new Error("WebSocket client not ready");[`game-state-${a}`,`game-events-${a}`,`player-status-${a}`,`game-status-${a}`,`chat-${a}`,`chat-legacy-${a}`].forEach(E=>{const j=this.subscriptions.get(E);if(j){try{j.unsubscribe()}catch(S){console.warn(`Error unsubscribing stale listener ${E}:`,S)}this.subscriptions.delete(E)}});const d=i.subscribe(`/topic/game/${a}/state`,this.handleGameEvent.bind(this));this.subscriptions.set(`game-state-${a}`,d);const m=i.subscribe(`/topic/game/${a}/events`,this.handleGameEvent.bind(this));this.subscriptions.set(`game-events-${a}`,m);const h=i.subscribe(`/topic/game/${a}/player-status`,this.handleGameEvent.bind(this));this.subscriptions.set(`player-status-${a}`,h);const p=i.subscribe(`/topic/game/${a}/game-status`,this.handleGameEvent.bind(this));this.subscriptions.set(`game-status-${a}`,p);const g=`/topic/chat.${a}`,y=i.subscribe(g,this.handleChatMessage.bind(this));this.subscriptions.set(`chat-${a}`,y);const b=`/topic/game/${a}/chat`,N=i.subscribe(b,this.handleChatMessage.bind(this));if(this.subscriptions.set(`chat-legacy-${a}`,N),s){const E=`notifications-${s}`,j=this.subscriptions.get(E);if(j){try{j.unsubscribe()}catch(_){console.warn(`Error unsubscribing stale listener ${E}:`,_)}this.subscriptions.delete(E)}const S=i.subscribe(`/topic/user/${s}/notifications`,this.handlePersonalNotification.bind(this));this.subscriptions.set(E,S)}console.log(`Subscribed to game: ${a}`)}notifyRawListeners(a){if(this.rawListeners.length)for(const s of this.rawListeners)try{s(a)}catch(i){console.error("Raw listener error:",i)}}subscribeToLobby(){if(this.lobbyCallbacks.length===0){this.lobbySubscriptionPending=!1;return}if(!this.client||!this.isConnected||!this.client.connected){this.lobbySubscriptionPending=!0,this.requestPendingSubscriptionFlush();return}try{this.performLobbySubscription(),this.lobbySubscriptionPending=!1}catch(a){if(this.isStompConnectionError(a)){console.warn("STOMP connection not ready for lobby subscription, retrying shortly",a),this.lobbySubscriptionPending=!0,this.requestPendingSubscriptionFlush();return}throw a}}performLobbySubscription(){const a=this.client;if(!a)throw new Error("WebSocket client not ready");const s=this.subscriptions.get(this.lobbySubscriptionKey);if(s){try{s.unsubscribe()}catch(c){console.warn("Error unsubscribing existing lobby listener:",c)}this.subscriptions.delete(this.lobbySubscriptionKey)}const i=a.subscribe("/topic/lobby",this.handleLobbyMessage.bind(this));this.subscriptions.set(this.lobbySubscriptionKey,i),console.log("Subscribed to lobby updates")}requestPendingSubscriptionFlush(a=200){this.pendingSubscriptionFlushTimer&&clearTimeout(this.pendingSubscriptionFlushTimer),this.pendingSubscriptionFlushTimer=setTimeout(()=>{this.pendingSubscriptionFlushTimer=null,this.flushPendingSubscriptions()},a)}flushPendingSubscriptions(){if(!this.client||!this.isConnected||!this.client.connected){(this.pendingGameSubscriptions.size>0||this.lobbySubscriptionPending)&&this.requestPendingSubscriptionFlush();return}if(this.lobbySubscriptionPending)try{this.performLobbySubscription(),this.lobbySubscriptionPending=!1}catch(a){this.isStompConnectionError(a)?this.requestPendingSubscriptionFlush():(console.error("Failed to subscribe to lobby updates:",a),this.lobbySubscriptionPending=!1)}if(this.pendingGameSubscriptions.size>0)for(const[a,s]of[...this.pendingGameSubscriptions.entries()])try{this.performGameSubscription(a,s.userId),this.pendingGameSubscriptions.delete(a)}catch(i){this.isStompConnectionError(i)?(s.attempts+=1,s.attempts>=this.maxSubscriptionAttempts?(console.error("Giving up on game subscription after repeated failures",{gameId:a,error:i}),this.pendingGameSubscriptions.delete(a)):(this.pendingGameSubscriptions.set(a,s),this.requestPendingSubscriptionFlush(Math.min(1e3,200*s.attempts)))):(console.error("Unexpected error subscribing to game channel",{gameId:a,error:i}),this.pendingGameSubscriptions.delete(a))}}isStompConnectionError(a){if(!a)return!1;const s=a instanceof Error?a.message:String(a);return s.includes("There is no underlying STOMP connection")||s.includes("Underlying connection is not open")||s.includes("Lost connection")||s.includes("not connected")}forceDisconnectClient(a){if(!(!this.client||!(this.client.active||this.client.connected)))try{this.client.forceDisconnect(),this.clearStoredSessionId()}catch(i){console.warn("Failed to force STOMP disconnect",{reason:a,error:i})}}flushQueue(){if(!this.isConnected||!this.client||!this.client.connected||this.messageQueue.length===0)return;console.log(`Flushing ${this.messageQueue.length} queued messages`);const a=[];for(;this.messageQueue.length>0;){const s=this.messageQueue.shift();s.attempts++;try{this.client.publish({destination:s.destination,body:JSON.stringify(s.body)}),this.outboundListeners.forEach(i=>i({destination:s.destination,body:s.body,sentAt:Date.now()})),console.log(`Successfully sent queued message ${s.id}`)}catch(i){console.error(`Failed to send queued message ${s.id}, attempt ${s.attempts}:`,i),s.attempts<this.maxMessageAttempts?a.push(s):console.error(`Dropping message ${s.id} after ${s.attempts} failed attempts`)}}this.messageQueue=a,a.length>0&&console.log(`Re-queued ${a.length} messages for retry`)}queueMessage(a,s){if(this.messageQueue.length>=this.maxQueue){const c=this.messageQueue.shift();console.warn("Message queue full, removed oldest message:",c?.id)}const i=`${Date.now()}-${Math.random().toString(36).slice(2)}`;return this.messageQueue.push({id:i,destination:a,body:s,attempts:0,timestamp:Date.now()}),console.log(`Queued message ${i} to ${a}`),i}showConnectionNotice(a){const s=a==="chat"?"realtime-queue-chat":"realtime-queue-action";if(this.connectionNoticeIds.has(s))return;const i=a==="chat"?"   .    .":"   .   .";Fe.info(i,{id:s,duration:4e3}),this.connectionNoticeIds.add(s)}clearConnectionNotices(){if(this.connectionNoticeIds.size){for(const a of this.connectionNoticeIds)Fe.dismiss(a);this.connectionNoticeIds.clear()}}ensureConnectionAttempt(){this.connectionState==="connected"||this.connectionState==="connecting"||this.connectionState==="reconnecting"||this.connect().catch(a=>{console.error("Automatic websocket reconnect failed after queuing message",a)})}subscribeToUserQueues(){if(!this.client)return;const a=this.subscriptions.get(this.userConnectionKey);if(a){try{a.unsubscribe()}catch(d){console.warn("Error unsubscribing existing user connection listener:",d)}this.subscriptions.delete(this.userConnectionKey)}const s=this.client.subscribe("/user/queue/connection",this.handleConnectionQueue.bind(this));this.subscriptions.set(this.userConnectionKey,s);const i=this.subscriptions.get(this.userHeartbeatKey);if(i){try{i.unsubscribe()}catch(d){console.warn("Error unsubscribing existing user heartbeat listener:",d)}this.subscriptions.delete(this.userHeartbeatKey)}const c=this.client.subscribe("/user/queue/heartbeat",this.handleHeartbeatQueue.bind(this));this.subscriptions.set(this.userHeartbeatKey,c)}getStoredSessionId(){if(typeof window>"u")return null;try{const a=window.localStorage.getItem(this.storageKeys.session);return a||window.localStorage.getItem(this.storageKeys.legacy)}catch(a){return console.warn("Failed to read stored WebSocket session id",a),null}}storeSessionId(a){if(!(typeof window>"u"))try{window.localStorage.setItem(this.storageKeys.session,a),window.localStorage.removeItem(this.storageKeys.legacy)}catch(s){console.warn("Failed to persist WebSocket session id",s)}}clearStoredSessionId(){if(!(typeof window>"u"))try{window.localStorage.removeItem(this.storageKeys.session),window.localStorage.removeItem(this.storageKeys.legacy)}catch(a){console.warn("Failed to clear WebSocket session id",a)}}stopHeartbeat(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}startHeartbeat(){this.stopHeartbeat(),this.pingInterval=setInterval(()=>{if(this.isConnected&&this.client?.connected)try{this.client.publish({destination:"/app/heartbeat",body:JSON.stringify({timestamp:Date.now()})})}catch(a){console.error("Failed to send ping:",a),this.isConnected=!1,this.connectionState="reconnecting",this.ensureConnectionAttempt()}else!this.client?.connected&&this.connectionState!=="connecting"&&(this.isConnected=!1,this.ensureConnectionAttempt())},15e3),this.heartbeatInterval=setInterval(()=>{Date.now()-this.lastHeartbeatAck>6e4&&(console.warn("No heartbeat acknowledgement for 60 seconds, forcing disconnect"),this.client&&this.client.forceDisconnect())},3e4)}resolveWebSocketUrl(){const a=d=>{if(!d)return null;const m=d.trim();if(!m.length)return null;let h=m;if(/^ws(s)?:\/\//i.test(h)?h=h.replace(/^ws(s)?:\/\//i,(p,g)=>g?"https://":"http://"):/^\/\//.test(h)&&(h=`http:${h}`),!/^https?:\/\//i.test(h)&&!h.startsWith("/")&&(h=`http://${h}`),h.startsWith("/")){const p=h.replace(/\/+$/,"");return p.length?p.endsWith("/ws")?p:`${p}/ws`:"/ws"}try{const p=new URL(h),g=p.pathname?.trim()??"",y=g.length>0&&g!=="/"?g.replace(/\/+$/,""):"";return p.pathname=y.endsWith("/ws")?y:`${y}/ws`.replace(/^\/?/,"/"),p.search="",p.hash="",p.toString()}catch{return null}},s=[a(void 0),a(void 0)].filter(d=>!!d);for(const d of s)if(d)return d;const i=a(void 0);if(i)return i;if(typeof window<"u"){const{protocol:d,hostname:m,port:h}=window.location,g={5173:"20021",3e3:"8080"}[h];if(g){const y=`${d==="https:"?"https":"http"}://${m}:${g}`,b=a(y);if(b)return b}}const c=[a("http://218.150.3.77:20021"),a("http://218.150.3.77:8080")].filter(d=>!!d);for(const d of c)if(d)return d;if(typeof window<"u"){const d=a(window.location.origin);if(d)return d}return"/ws"}setupClient(){const a=this.resolveWebSocketUrl(),s={withCredentials:!0,transports:["websocket","xhr-streaming","xhr-polling"],transportOptions:{websocket:{withCredentials:!0},"xhr-streaming":{withCredentials:!0},"xhr-polling":{withCredentials:!0}}},i=()=>new KT(a,void 0,s),c={},d=this.getStoredSessionId();d&&(c["x-old-session-id"]=d);const m={webSocketFactory:i,connectHeaders:c,debug:h=>{},onConnect:this.onConnect.bind(this),onDisconnect:this.onDisconnect.bind(this),onStompError:this.onError.bind(this),heartbeatIncoming:4e3,heartbeatOutgoing:4e3,reconnectDelay:0};this.client=new xT(m)}ensureClient(){if(this.client||this.setupClient(),!this.client)throw new Error("WebSocket client  .");return this.client}onDisconnect(){console.log("WebSocket disconnected"),this.isConnected=!1,this.clearStoredSessionId(),this.stopHeartbeat(),this.connectionState!=="reconnecting"&&(this.connectionState="disconnected"),this.connectionCallbacks.forEach(a=>{try{a(!1)}catch(s){console.error("Error in disconnection callback:",s)}}),this.subscriptions.forEach((a,s)=>{try{a.unsubscribe()}catch(i){console.warn(`Error unsubscribing from ${s} on disconnect:`,i)}}),this.connectionState!=="disconnected"&&(this.attemptReconnection(),Fe.error("  .  ."))}onError(a){console.error("STOMP Error:",a),Fe.error("   ")}attemptReconnection(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached"),this.connectionState="disconnected",Fe.error(" .  .");return}if(this.connectionState==="reconnecting")return;this.connectionState="reconnecting",this.reconnectAttempts++;const a=this.baseReconnectDelay*Math.pow(2,this.reconnectAttempts-1),s=Math.random()*1e3,i=Math.min(a+s,this.maxReconnectDelay);console.log(`Attempting reconnection ${this.reconnectAttempts}/${this.maxReconnectAttempts} in ${Math.round(i)}ms`),Fe.info(`  ... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{if(this.connectionState==="reconnecting")try{this.setupClient(),this.client&&this.client.activate()}catch(c){console.error("Error during reconnection setup:",c),this.connectionState="disconnected",setTimeout(()=>this.attemptReconnection(),1e3)}},i)}handleLobbyMessage(a){try{const s=JSON.parse(a.body??"{}")??{},i=s.gameNumber??s.gameId??s.id,c=typeof i=="number"?i:typeof i=="string"?Number.parseInt(i,10):void 0,d=typeof c=="number"&&Number.isFinite(c)?c:i,m={...s,type:typeof s.type=="string"?s.type:"UNKNOWN",gameNumber:d,currentPlayers:typeof s.currentPlayers=="number"?s.currentPlayers:void 0,maxPlayers:typeof s.maxPlayers=="number"?s.maxPlayers:void 0},h=typeof s.nickname=="string"?s.nickname:void 0;h&&(m.nickname=h),typeof s.playerName=="string"?m.playerName=s.playerName:h&&(m.playerName=h);const p=typeof s.userId=="number"?s.userId:typeof s.userId=="string"?Number.parseInt(s.userId,10):void 0;typeof p=="number"&&Number.isFinite(p)&&(m.userId=p),this.notifyRawListeners({type:"lobby",data:m,receivedAt:Date.now(),destination:a.headers?.destination}),this.lobbyCallbacks.forEach(g=>{try{g(m)}catch(y){console.error("Error in lobby callback:",y)}})}catch(s){console.error("Error parsing lobby message:",s)}}onConnect(a){console.log("WebSocket connected",a),this.isConnected=!0,this.connectionState="connected",this.reconnectAttempts=0,this.lastHeartbeatAck=Date.now();const s=a.headers?.session;if(s&&(this.storeSessionId(s),console.log("Stored WebSocket session ID:",s)),this.startHeartbeat(),this.subscribeToLobby(),this.subscribeToUserQueues(),this.flushPendingSubscriptions(),this.connectionCallbacks.forEach(i=>{try{i(!0)}catch(c){console.error("Error in connection callback:",c)}}),this.currentGameId){const i=this.currentGameId,c=this.lastSubscriptionUserId??void 0;console.log("Re-subscribing to game:",i),setTimeout(()=>{this.currentGameId===i&&this.subscribeToGame(i,c)},100)}this.flushQueue(),this.clearConnectionNotices(),this.reconnectAttempts>0&&Fe.success(" !")}handleConnectionQueue(a){try{const s=JSON.parse(a.body??"{}"),i=typeof s.type=="string"?s.type:"CONNECTION_EVENT";this.notifyRawListeners({type:"system",data:s,receivedAt:Date.now(),destination:a.headers?.destination}),i==="RECONNECTION_REQUIRED"?(this.connectionState="reconnecting",this.isConnected=!1,this.connectionCallbacks.forEach(c=>{try{c(!1)}catch(d){console.error("Error in connection callback:",d)}}),this.forceDisconnectClient("server requested reconnection")):i==="CONNECTION_CLOSED"&&(this.connectionState="disconnected",this.isConnected=!1,this.connectionCallbacks.forEach(c=>{try{c(!1)}catch(d){console.error("Error in connection callback:",d)}}),this.forceDisconnectClient("server closed connection")),(i==="CONNECTION_ESTABLISHED"||i==="RECONNECTION_SUCCESS")&&(this.connectionState="connected",this.connectionCallbacks.forEach(c=>{try{c(!0)}catch(d){console.error("Error in connection callback:",d)}})),i==="RECONNECTION_REQUIRED"?Fe.error(s.message??" .  ."):i==="CONNECTION_ESTABLISHED"&&this.reconnectAttempts===0&&Fe.success(s.message??"  ")}catch(s){console.error("Error handling connection queue message:",s)}}handleHeartbeatQueue(a){try{const s=JSON.parse(a.body??"{}");this.lastHeartbeatAck=Date.now(),this.notifyRawListeners({type:"system",data:s,receivedAt:this.lastHeartbeatAck,destination:a.headers?.destination})}catch(s){console.error("Error handling heartbeat queue message:",s)}}normalizeGameEvent(a,s){const i=s.headers?.destination??"",c=E=>E==null?null:typeof E=="string"&&E.trim().length>0?E:typeof E=="number"&&Number.isFinite(E)?E.toString():null,d=()=>{const E=typeof a=="object"&&a!==null?a:null,j=E?c(E.gameId):null,S=E?c(E.gameNumber):null;return j??S??c(this.currentGameId)??""},m=E=>{const j=E?.timestamp??E?.sentAt??E?.createdAt??E?.time;if(typeof j=="number"&&Number.isFinite(j))return j;if(typeof j=="string"){const S=Date.parse(j);if(!Number.isNaN(S))return S}return Date.now()};if(a==null)return null;const h=m(a);if(typeof a=="string")return i.includes("/state")?{type:"GAME_STATE_UPDATED",gameId:d(),payload:{state:a},timestamp:h}:null;if(typeof a!="object")return{type:"GAME_STATE_UPDATED",gameId:d(),payload:{state:a},timestamp:h};const p=a,g=p.type??p.eventType??p.event_type,y=typeof g=="string"?g.toUpperCase():null,b=()=>{if(p.payload!==void 0)return p.payload;if(p.data!==void 0)return p.data;const E={...p};return delete E.type,delete E.eventType,delete E.event_type,delete E.gameNumber,delete E.gameId,delete E.timestamp,delete E.payload,delete E.data,E};if(y){const E=y==="GAME_STATE_UPDATE"||y==="STATE"?"GAME_STATE_UPDATED":y,j=b();return{type:E,gameId:d(),payload:j,timestamp:h}}const N=p.payload??p;return i.includes("/state")?{type:"GAME_STATE_UPDATED",gameId:d(),payload:{gameState:N},timestamp:h}:{type:"GAME_STATE_UPDATED",gameId:d(),payload:{gameState:N},timestamp:h}}handleGameEvent(a){try{const s=a.body?JSON.parse(a.body):null,i=this.normalizeGameEvent(s,a);if(!i)return;this.notifyRawListeners({type:"event",data:i,receivedAt:Date.now(),destination:a.headers?.destination}),(this.eventCallbacks.get(i.type)||[]).forEach(m=>m(i)),(this.eventCallbacks.get("*")||[]).forEach(m=>m(i))}catch(s){console.error("Error parsing game event:",s)}}handleChatMessage(a){try{const s=JSON.parse(a.body),c=s.playerNicknameSnapshot??s.playerNickname??s.playerName??s.nickname??"SYSTEM",d=typeof s.userId=="number"?s.userId:typeof s.playerUserId=="number"?s.playerUserId:void 0,m={id:String(s.id??`${s.gameNumber}-${s.timestamp}`),gameNumber:s.gameNumber??(s.gameId?Number(s.gameId):0),playerId:s.playerId?String(s.playerId):void 0,userId:d,playerNickname:c,nickname:s.nickname??void 0,playerName:s.playerName??s.playerNickname??s.playerNicknameSnapshot??void 0,content:s.content??s.message??"",message:s.message??s.content??void 0,gameId:s.gameId!=null?String(s.gameId):void 0,roomId:s.roomId!=null?String(s.roomId):void 0,timestamp:typeof s.timestamp=="string"?Date.parse(s.timestamp):Number(s.timestamp??Date.now()),type:s.type||"DISCUSSION"};console.log("Received chat message:",m),this.notifyRawListeners({type:"chat",data:m,receivedAt:Date.now(),destination:a.headers?.destination}),this.chatCallbacks.forEach(h=>h(m))}catch(s){console.error("Error parsing chat message:",s)}}handlePersonalNotification(a){try{const s=JSON.parse(a.body);console.log("Received personal notification:",s);const i={type:"PERSONAL_NOTIFICATION",gameId:this.currentGameId||"",payload:s,timestamp:Date.now()};this.notifyRawListeners({type:"notification",data:s,receivedAt:Date.now(),destination:a.headers?.destination}),(this.eventCallbacks.get("PERSONAL_NOTIFICATION")||[]).forEach(m=>m(i)),(this.eventCallbacks.get("*")||[]).forEach(m=>m(i))}catch(s){console.error("Error parsing personal notification:",s)}}}const Lf=globalThis;Lf.__liarGameWebSocketService||(Lf.__liarGameWebSocketService=new JT);const He=Lf.__liarGameWebSocketService,Cl=Object.freeze(Object.defineProperty({__proto__:null,websocketService:He},Symbol.toStringTag,{value:"Module"})),ej="http://localhost:20021",tj="/ws";function nj(o,a){return a}function aj(o,a){return`${a.replace(/\/$/,"").replace(/^http/,"ws")}${tj}`}const Mv=nj(void 0,ej),sj=aj(void 0,Mv),Ya={BASE_URL:Mv,WS_URL:sj,ENDPOINTS:{AUTH:{LOGIN:"/api/v1/auth/login",LOGOUT:"/api/v1/auth/logout",REFRESH:"/api/v1/auth/refresh-session",CHECK:"/api/v1/auth/check"},GAME:{CREATE:"/api/v1/game/create",JOIN:"/api/v1/game/join",LEAVE:"/api/v1/game/leave",START:"/api/v1/game/start",ROOMS:"/api/v1/game/rooms",STATE:"/api/v1/game",RESULT:"/api/v1/game/result",RECOVER_STATE:"/api/v1/game/recover-state",HINT:"/api/v1/game/hint",VOTE:"/api/v1/game/vote",FINAL_VOTE:"/api/v1/game/vote/final",CAST_VOTE:"/api/v1/game/cast-vote",GUESS_WORD:"/api/v1/game/guess-word",END_ROUND:"/api/v1/game/end-of-round",SUBMIT_DEFENSE:"/api/v1/game/submit-defense",END_DEFENSE:"/api/v1/game/defense/end",SUBMIT_LIAR_GUESS:"/api/v1/game/submit-liar-guess",KICK_OWNER:"/api/v1/game",EXTEND_TIME:"/api/v1/game",CLEANUP_USER_DATA:"/api/v1/game/cleanup/user-data"},CHAT:{SEND:"/api/v1/chat/send",HISTORY:"/api/v1/chat/history",POST_ROUND:"/api/v1/chat/post-round",SPEECH_COMPLETE:"/api/v1/chat/speech/complete"},SUBJECT:{LIST:"/api/v1/subjects/listsubj",CREATE:"/api/v1/subjects/applysubj",DELETE:"/api/v1/subjects/delsubj",APPROVE_PENDING:"/api/v1/subjects/approve-pending"},WORD:{LIST:"/api/v1/words/wlist",CREATE:"/api/v1/words/applyw",DELETE:"/api/v1/words/delw",APPROVE_PENDING:"/api/v1/words/approve-pending"},USER:{ADD:"/api/v1/user/add",STATS:"/api/v1/user/stats"},ADMIN:{LOGIN:"/api/v1/admin/login",KICK_PLAYER:"/api/v1/admin/games",TERMINATE_ROOM:"/api/v1/admin/terminate-room",GRANT_ROLE:"/api/v1/admin/grant-role",STATISTICS:"/api/v1/admin/statistics",GAMES:"/api/v1/admin/games",PLAYERS:"/api/v1/admin/players",CONTENT_PENDING:"/api/v1/admin/content/pending",CONTENT_APPROVE_ALL:"/api/v1/admin/content/approve-all",CLEANUP_STALE:"/api/v1/admin/cleanup/stale-games",CLEANUP_DISCONNECTED:"/api/v1/admin/cleanup/disconnected-players",CLEANUP_EMPTY:"/api/v1/admin/cleanup/empty-games",PROFANITY_REQUESTS:"/api/v1/admin/profanity/requests",PROFANITY_APPROVE:"/api/v1/admin/profanity/approve",PROFANITY_REJECT:"/api/v1/admin/profanity/reject"},PROFANITY:{SUGGEST:"/api/v1/profanity/suggest"},NEMONEMO:{PUZZLES:"/api/nemonemo/v1/puzzles",PUZZLE_DETAIL:o=>`/api/nemonemo/v1/puzzles/${o}`,SESSIONS:"/api/nemonemo/v1/sessions",SESSION_DETAIL:o=>`/api/nemonemo/v1/sessions/${o}`,SESSION_ACTIONS:o=>`/api/nemonemo/v1/sessions/${o}/actions`,LEADERBOARD_WEEKLY:"/api/nemonemo/v1/leaderboards/weekly"}},WEBSOCKET:{SEND:{CHAT:"/app/chat.send",VOTE:"/app/game/{gameNumber}/vote",GUESS_TOPIC:"/app/game/{gameNumber}/guess-topic",HEARTBEAT:"/app/heartbeat"},SUBSCRIBE:{GAME_EVENTS:"/topic/game/{gameNumber}",CHAT_MESSAGES:"/topic/chat.{gameNumber}",GAME_STATE:"/topic/game/{gameNumber}/state",USER_EVENTS:"/topic/user/{userId}"}}};class rj{constructor(a=Ya.BASE_URL){Oe(this,"baseURL");Oe(this,"isRefreshing",!1);Oe(this,"refreshPromise",null);this.baseURL=a}async get(a){return this.request(a,{method:"GET"})}async post(a,s,i={}){const c={...i,method:"POST"};return s!==void 0&&(c.body=JSON.stringify(s)),this.request(a,c)}async put(a,s,i={}){const c={...i,method:"PUT"};return s!==void 0&&(c.body=JSON.stringify(s)),this.request(a,c)}async delete(a){return this.request(a,{method:"DELETE"})}async request(a,s={},i=!0){const c=`${this.baseURL}${a}`,m={headers:{...{"Content-Type":"application/json"},...s.headers},credentials:"include",...s};console.log("API Request:",{method:m.method||"GET",url:c,headers:m.headers,body:m.body,credentials:m.credentials});try{const h=await fetch(c,m);if(console.log("API Response:",{status:h.status,statusText:h.statusText,headers:Object.fromEntries(h.headers.entries()),ok:h.ok}),(h.status===401||h.status===403)&&i&&!a.includes("/auth/"))return console.log("Unauthorized response, attempting session refresh..."),this.refreshPromise?await this.refreshPromise:this.isRefreshing||await this.refreshSession(),this.request(a,s,!1);if(!h.ok){let g={};const y=h.headers.get("content-type");if(y&&y.includes("application/json"))try{g=await h.json()}catch(N){console.error("Failed to parse error response as JSON:",N)}else try{g.text=await h.text()}catch(N){console.error("Failed to read error response as text:",N)}console.error("API Error Response:",g);const b=typeof g.message=="string"?g.message:typeof g.error=="string"?g.error:typeof g.text=="string"?g.text:`HTTP ${h.status}: ${h.statusText}`;throw new Error(b)}const p=await h.json();return console.log("API Response Data:",p),p}catch(h){throw console.error("API Request failed:",h),h}}async refreshSession(){return this.isRefreshing&&this.refreshPromise?this.refreshPromise:(this.isRefreshing=!0,this.refreshPromise=(async()=>{try{console.log("Attempting to refresh session...");const a=await fetch(`${this.baseURL}${Ya.ENDPOINTS.AUTH.REFRESH}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(a.ok){const s=await a.json();console.log("Session refresh successful:",s)}else throw console.error("Session refresh failed:",a.status,a.statusText),this.clearAuthState(),new Error("Session refresh failed")}catch(a){throw console.error("Session refresh error:",a),this.clearAuthState(),a}finally{this.isRefreshing=!1,this.refreshPromise=null}})(),this.refreshPromise)}clearAuthState(){typeof window>"u"||Ov({reason:"session-expired"})}}const he=new rj;class ij{async get(a){return he.get(a)}async post(a,s){return he.post(a,s)}async put(a,s){return he.put(a,s)}async delete(a){return he.delete(a)}async apiGet(a){return this.get(a)}async apiPost(a,s){return this.post(a,s)}async apiPut(a,s){return this.put(a,s)}async apiDelete(a){return this.delete(a)}}const yn=new ij,Ef={AUTH:{LOGIN:"/api/v1/auth/login",LOGOUT:"/api/v1/auth/logout",REFRESH:"/api/v1/auth/refresh-session",CHECK:"/api/v1/auth/check"},GAME:{CREATE:"/api/v1/game/create",JOIN:"/api/v1/game/join",LEAVE:"/api/v1/game/leave",START:"/api/v1/game/start",ROOMS:"/api/v1/game/rooms",STATE:"/api/v1/game",RESULT:"/api/v1/game/result",RECOVER_STATE:"/api/v1/game/recover-state"},GAME_PLAY:{HINT:"/api/v1/game/hint",VOTE:"/api/v1/game/vote",FINAL_VOTE:"/api/v1/game/vote/final",CAST_VOTE:"/api/v1/game/cast-vote",DEFENSE:"/api/v1/game/submit-defense",END_DEFENSE:"/api/v1/game/defense/end",GUESS_WORD:"/api/v1/game/guess-word",LIAR_GUESS:"/api/v1/game/submit-liar-guess",END_ROUND:"/api/v1/game/end-of-round",KICK_OWNER:"/api/v1/game",EXTEND_TIME:"/api/v1/game"},CHAT:{SEND:"/api/v1/chat/send",HISTORY:"/api/v1/chat/history",POST_ROUND:"/api/v1/chat/post-round",SPEECH_COMPLETE:"/api/v1/chat/speech/complete"},SUBJECT:{LIST:"/api/v1/subjects/listsubj",CREATE:"/api/v1/subjects/applysubj",DELETE:"/api/v1/subjects/delsubj",APPROVE_PENDING:"/api/v1/subjects/approve-pending"},WORD:{LIST:"/api/v1/words/wlist",CREATE:"/api/v1/words/applyw",DELETE:"/api/v1/words/delw",APPROVE_PENDING:"/api/v1/words/approve-pending"},USER:{ADD:"/api/v1/user/add",STATS:"/api/v1/user/stats"},ADMIN:{LOGIN:"/api/v1/admin/login",KICK_PLAYER:"/api/v1/admin/games",TERMINATE_ROOM:"/api/v1/admin/terminate-room",GRANT_ROLE:"/api/v1/admin/grant-role",STATISTICS:"/api/v1/admin/statistics",GAMES:"/api/v1/admin/games",PLAYERS:"/api/v1/admin/players",CONTENT_PENDING:"/api/v1/admin/content/pending",CONTENT_APPROVE_ALL:"/api/v1/admin/content/approve-all",CLEANUP_STALE:"/api/v1/admin/cleanup/stale-games",CLEANUP_DISCONNECTED:"/api/v1/admin/cleanup/disconnected-players",CLEANUP_EMPTY:"/api/v1/admin/cleanup/empty-games",PROFANITY_REQUESTS:"/api/v1/admin/profanity/requests",PROFANITY_APPROVE:"/api/v1/admin/profanity/approve",PROFANITY_REJECT:"/api/v1/admin/profanity/reject"},PROFANITY:{SUGGEST:"/api/v1/profanity/suggest"}};class oj{async login(a){try{const s={nickname:a.nickname,password:""},i=await yn.post(Ef.AUTH.LOGIN,s);return i.success&&console.log("Login successful:",i.nickname),i}catch(s){throw console.error("Login failed:",s),s}}async logout(){try{await yn.post(Ef.AUTH.LOGOUT),console.log("Logout successful")}catch(a){console.error("Logout failed:",a)}}async refreshSession(){try{console.log("Attempting session refresh...");const a=await yn.post(Ef.AUTH.REFRESH);return a.success?console.log("Session refresh successful:",a.nickname):console.warn("Session refresh returned unsuccessful response:",a),a}catch(a){return console.error("Session refresh failed:",a),{success:!1,message:a instanceof Error?a.message:"Session refresh failed"}}}async checkAuthStatus(){return(await this.refreshSession()).success}}const wf=new oj,Re=class Re{static getInstance(){return Re.instance||(Re.instance=new Re),Re.instance}static isRecord(a){return typeof a=="object"&&a!==null}static toNumber(a,s=0){if(typeof a=="number"&&Number.isFinite(a))return a;if(typeof a=="string"){const i=Number.parseInt(a,10);if(!Number.isNaN(i))return i}return s}static toBoolean(a,s=!1){if(typeof a=="boolean")return a;if(typeof a=="number")return a!==0;if(typeof a=="string"){const i=a.trim().toLowerCase();if(i==="true"||i==="1")return!0;if(i==="false"||i==="0")return!1}return s}static toString(a,s=""){if(typeof a=="string"){const i=a.trim();return i.length>0?i:s}return typeof a=="number"||typeof a=="boolean"?String(a):s}static toOptionalString(a){if(typeof a=="string"){const s=a.trim();return s.length>0?s:null}return null}static toOptionalNumber(a){if(typeof a=="number"&&Number.isFinite(a))return a;if(typeof a=="string"){const s=Number.parseInt(a,10);if(!Number.isNaN(s))return s}return null}static toStringArray(a){return Array.isArray(a)?a.map(s=>Re.toString(s,"").trim()).filter(s=>s.length>0):[]}static normalizePlayers(a){return Array.isArray(a)?a.filter(Re.isRecord).map(s=>{const i=Re.toNumber(s.id??s.playerId),c=Re.toNumber(s.userId??s.userID??s.id,i),d=Re.toString(s.nickname??s.playerName,""),m=Re.toString(s.state,"WAITING_FOR_HINT"),h=Re.toOptionalString(s.hint),p=Re.toOptionalString(s.defense),g=Re.toOptionalNumber(s.votesReceived),y=Re.toOptionalString(s.lastActiveAt??s.lastActive),b=Re.toBoolean(s.isOnline,!0),N={id:i,userId:c,nickname:d,isAlive:Re.toBoolean(s.isAlive,!0),isOnline:b,lastActiveAt:y,state:m,hasVoted:Re.toBoolean(s.hasVoted,!1)};return h!==null&&(N.hint=h),p!==null&&(N.defense=p),g!==null&&(N.votesReceived=g),N}).filter(s=>s.nickname.length>0):[]}static normalizeRoom(a){const s=a.gameNumber??a.gameId??a.id,i=Re.toNumber(s),c=i>0?`Game #${i}`:"Game",d=Re.toString(a.title??a.gameName,c),m=Re.toString(a.host??a.gameOwner,"Unknown"),h=Re.toNumber(a.currentPlayers??a.gameParticipants??a.participants),p=Re.toNumber(a.maxPlayers??a.gameMaxPlayers??a.capacity),g=Re.toBoolean(a.hasPassword??a.isPrivate),y=Re.toString(a.state??a.gameState,"WAITING"),b=Re.toStringArray(a.subjects),N=Re.toOptionalString(a.subject??a.citizenSubject),E=Re.normalizePlayers(a.players),j=a.gameMode??a.mode,S=typeof j=="string"?j:void 0;return{gameNumber:i,title:d,host:m,currentPlayers:h,maxPlayers:p,hasPassword:g,state:y,subjects:b,subject:N,players:E,gameName:Re.toString(a.gameName,d),gameOwner:Re.toString(a.gameOwner,m),gameParticipants:Re.toNumber(a.gameParticipants??h),gameMaxPlayers:Re.toNumber(a.gameMaxPlayers??p),isPrivate:Re.toBoolean(a.isPrivate??g),gameState:y,gameMode:S}}static extractRooms(a){if(!Re.isRecord(a))return[];const s=a,i=["gameRooms","games","data"];for(const d of i){const m=s[d];if(Array.isArray(m))return m.filter(Re.isRecord)}const c=s.data;if(Re.isRecord(c)){const d=Re.extractRooms(c);if(d.length>0)return d}return[]}static isGameListResponse(a){if(!Re.isRecord(a))return!1;const s=a;return typeof s.success=="boolean"&&Array.isArray(s.gameRooms)}async getGameList(a=0,s=10){const i=await he.get(`/api/v1/game/rooms?page=${a}&size=${s}`),c=Re.extractRooms(i);if(c.length>0){const d=c.map(h=>Re.normalizeRoom(h)),m={success:!0,data:d,gameRooms:d,games:d,timestamp:Date.now()};if(Re.isRecord(i)){const h=i.pagination;Re.isRecord(h)&&(m.pagination=h)}return m}return Re.isGameListResponse(i)?i:{success:!0,data:[],gameRooms:[],games:[],timestamp:Date.now()}}async createGame(a){const s={...a,gamePassword:a.gamePassword??null,subjectIds:a.subjectIds&&a.subjectIds.length>0?a.subjectIds:void 0,useRandomSubjects:a.useRandomSubjects??a.subjectIds==null,randomSubjectCount:a.randomSubjectCount??(a.useRandomSubjects?1:void 0)};return await he.post("/api/v1/game/create",s)}async joinGame(a){const s={gameNumber:a.gameNumber,gamePassword:a.gamePassword??a.password??void 0,nickname:a.nickname};return await he.post("/api/v1/game/join",s)}async leaveGame(a){return await he.post("/api/v1/game/leave",{gameNumber:a})}async getGameState(a){return await he.get(`/api/v1/game/${a}`)}async startGame(){return await he.post("/api/v1/game/start")}async toggleReady(a){return await he.post(`/api/v1/game/${a}/ready`)}async getGameModes(){return await he.get("/api/v1/game/modes")}async getAvailableGameModes(){return this.getGameModes()}async getReadyStatus(a){return await he.get(`/api/v1/game/${a}/ready-status`)}async getCountdownStatus(a){return await he.get(`/api/v1/game/${a}/countdown/status`)}async getConnectionStatus(a){return await he.get(`/api/v1/game/${a}/connection-status`)}async getVotingStatus(a){return await he.get(`/api/v1/game/${a}/voting-status`)}async startCountdown(a,s=10){return await he.post(`/api/v1/game/${a}/countdown/start`,{durationSeconds:s})}async cancelCountdown(a){return await he.post(`/api/v1/game/${a}/countdown/cancel`)}async getGameInfo(a){return await he.get(`/api/v1/game/${a}/info`)}async setReady(a,s){return await he.post(`/api/v1/game/${a}/ready`,{ready:s})}async vote(a,s){return await he.post("/api/v1/game/cast-vote",{gameNumber:a,targetUserId:s.targetUserId})}async getRoundResults(a){return await he.get(`/api/v1/game/${a}/round-results`)}async getGameStatus(a){return this.getGameState(parseInt(a))}async login(a){return await he.post("/api/v1/auth/login",a)}async submitAnswer(a,s){return await he.post(`/api/v1/game/${a}/submit-answer`,{answer:s})}async getChatHistory(a,s=0,i=50){const c=new URLSearchParams({gameNumber:String(a),limit:String(i)});return s>0&&c.append("page",String(s)),(await he.get(`/api/v1/chat/history?${c.toString()}`)).map(m=>{const h=m.content??m.message??"",p=m.playerNickname??m.nickname??"SYSTEM",g=typeof m.timestamp=="string"?Date.parse(m.timestamp):Number(m.timestamp??Date.now());return{id:String(m.id??`${m.gameNumber??0}-${g}`),gameNumber:Number(m.gameNumber??0),playerNickname:p,nickname:p,content:h,message:h,timestamp:g,type:m.type||"DISCUSSION"}})}async sendChatMessage(a,s,i="DISCUSSION"){return await he.post("/api/v1/chat/send",{gameNumber:a,content:s,type:i})}async submitHintOld(a,s){const i=parseInt(a);await this.submitHint(i,s)}async submitDefenseOld(a,s){const i=parseInt(a);return this.submitDefense(i,s)}async guessWord(a,s){return await he.post("/api/v1/game/guess-word",{gameNumber:a,guess:s})}async submitHint(a,s){return await he.post("/api/v1/game/hint",{gameNumber:a,hint:s})}async castVote(a,s){return await he.post("/api/v1/game/cast-vote",{gameNumber:a,targetUserId:s})}async submitDefense(a,s){return await he.post("/api/v1/game/submit-defense",{gameNumber:a,defenseText:s})}async endDefense(a){return await he.post("/api/v1/game/defense/end",{gameNumber:a})}async submitFinalVote(a,s){return await he.post("/api/v1/game/vote/final",{gameNumber:a,voteForExecution:s})}async submitLiarGuess(a,s){return await he.post("/api/v1/game/submit-liar-guess",{gameNumber:a,guess:s})}async endRound(a){return await he.post("/api/v1/game/end-of-round",{gameNumber:a})}async recoverGameState(a){return await he.get(`/api/v1/game/recover-state/${a}`)}async getGameResult(a){return await he.get(`/api/v1/game/result/${a}`)}async cleanupUserGameData(){return await he.post("/api/v1/game/cleanup/user-data")}};Oe(Re,"instance");let Uf=Re;const Zt=Uf.getInstance(),Rs=class Rs{static getInstance(){return Rs.instance||(Rs.instance=new Rs),Rs.instance}async getWords(){try{const a=await he.get("/api/v1/words/wlist"),s=Array.isArray(a)?a.map(i=>({id:i.id,content:i.content,subjectId:i.subjectId,subjectName:i.subjectContent,status:i.status})):[];return{words:s,totalCount:s.length}}catch(a){throw console.error("Failed to fetch words:",a),a}}async getWordsBySubject(a){try{const i=(await this.getWords()).words.filter(c=>c.subjectId===a);return{words:i,totalCount:i.length}}catch(s){throw console.error("Failed to fetch words by subject:",s),s}}async createWord(a){try{const s={subjectId:a.subjectId,word:a.content};console.log("=== Word Creation Request ==="),console.log("Original payload:",a),console.log("Backend payload:",s),console.log("SubjectId type:",typeof s.subjectId),console.log("Word type:",typeof s.word),console.log("Request URL: /api/v1/words/applyw"),console.log("=============================");const i=await he.post("/api/v1/words/applyw",s);return console.log("Word creation successful:",i),{id:i.id,content:i.content,subjectId:i.subjectId,subjectName:i.subjectContent,status:i.status}}catch(s){throw console.error("Failed to create word:",s),s instanceof Error&&(console.error("Error message:",s.message),console.error("Error stack:",s.stack)),s instanceof TypeError&&s.message.includes("fetch")&&console.error("Network error detected - check server connection"),new Error(s instanceof Error?s.message:"    .")}}async deleteWord(a){try{await he.delete(`/api/v1/words/delw/${a}`)}catch(s){throw console.error("Failed to delete word:",s),s}}};Oe(Rs,"instance");let Gf=Rs;const Hf=Gf.getInstance(),Cs=class Cs{static getInstance(){return Cs.instance||(Cs.instance=new Cs),Cs.instance}async getSubjects(){try{const a=await he.get("/api/v1/subjects/listsubj"),s=Array.isArray(a)?a.map(i=>({...i,title:i.name,wordCount:i.wordIds?.length||0})):[];return{subjects:s,totalCount:s.length}}catch(a){throw console.error("Failed to fetch subjects:",a),a}}async createSubject(a){try{const s=await he.post("/api/v1/subjects/applysubj",a);return{id:s.id,name:s.name,title:s.name,wordIds:[],wordCount:0}}catch(s){throw console.error("Failed to create subject:",s),s}}async deleteSubject(a){try{await he.delete(`/api/v1/subjects/delsubj/${a}`)}catch(s){throw console.error("Failed to delete subject:",s),s}}};Oe(Cs,"instance");let zf=Cs;const Or=zf.getInstance(),lj=Or;class _n{static success(a){return{success:!0,data:a,timestamp:Date.now()}}static error(a,s="UNKNOWN_ERROR"){let i;return a instanceof Error?i={code:s,message:a.message,details:a.stack}:typeof a=="string"?i={code:s,message:a}:a&&typeof a=="object"&&"message"in a?i={code:s,message:a.message??"Unknown error occurred",details:a}:i={code:s,message:"An unexpected error occurred",details:a},{success:!1,error:i,timestamp:Date.now()}}static async handleResponse(a,s){try{const i=await a;return this.success(i)}catch(i){return console.error("API Response Error:",i),this.error(i,s)}}static validateResponse(a,s){try{return a&&typeof a=="object"&&"success"in a?a:s&&!s(a)?this.error("Invalid response format","VALIDATION_ERROR"):this.success(a)}catch(i){return this.error(i,"VALIDATION_ERROR")}}static unwrap(a){if(!a.success)throw new Error(a.error?.message||"API request failed");return a.data}static isSuccess(a){return a.success}static isError(a){return!a.success}static map(a,s){if(!a.success)return{success:!1,error:a.error,timestamp:a.timestamp};try{const i=s(a.data);return this.success(i)}catch(i){return this.error(i,"TRANSFORMATION_ERROR")}}static chain(a,s){return a.success?s(a.data):{success:!1,error:a.error,timestamp:a.timestamp}}static all(a){const s=[],i=[];for(const c of a)c.success?i.push(c.data):c.error&&s.push(c.error);return s.length>0?this.error({message:`${s.length} API requests failed`,details:s},"MULTIPLE_ERRORS"):this.success(i)}static withTimeout(a,s=1e4){const i=new Promise((c,d)=>{setTimeout(()=>d(new Error("Request timeout")),s)});return this.handleResponse(Promise.race([a(),i]),"TIMEOUT_ERROR")}static async withRetry(a,s=3,i=1e3){let c;for(let d=1;d<=s;d++){try{const m=await a();if(m.success||(c=m,m.error?.code==="VALIDATION_ERROR"||m.error?.code==="AUTHENTICATION_ERROR"))return m}catch(m){c=this.error(m,"RETRY_ERROR")}d<s&&await new Promise(m=>setTimeout(m,i*d))}return c}}const Qt={success:_n.success,error:_n.error,handle:_n.handleResponse,validate:_n.validateResponse,unwrap:_n.unwrap,isSuccess:_n.isSuccess,isError:_n.isError,map:_n.map,chain:_n.chain,all:_n.all,withTimeout:_n.withTimeout,withRetry:_n.withRetry};class cj{constructor(){Oe(this,"baseUrl","/api/v1/admin")}async login(a){return Qt.handle(he.post(`${this.baseUrl}/login`,a),"ADMIN_LOGIN_ERROR")}async kickPlayer(a,s){return Qt.handle(he.post(`${this.baseUrl}/games/${a}/kick`,{userId:s}),"KICK_PLAYER_ERROR")}async terminateRoom(a){return Qt.handle(he.post(`${this.baseUrl}/terminate-room`,{gameNumber:a}),"TERMINATE_ROOM_ERROR")}async getGameStatistics(){return Qt.handle(he.get(`${this.baseUrl}/statistics`),"GET_STATISTICS_ERROR")}async getAllActiveGames(){return Qt.handle(he.get(`${this.baseUrl}/games`),"GET_ACTIVE_GAMES_ERROR")}async getAllPlayers(){return Qt.handle(he.get(`${this.baseUrl}/players`),"GET_PLAYERS_ERROR")}async getPendingProfanityRequests(){return Qt.handle(he.get(`${this.baseUrl}/profanity/requests`),"GET_PROFANITY_REQUESTS_ERROR")}async approveProfanityRequest(a){return Qt.handle(he.post(`${this.baseUrl}/profanity/approve/${a}`),"APPROVE_PROFANITY_ERROR")}async rejectProfanityRequest(a){return Qt.handle(he.post(`${this.baseUrl}/profanity/reject/${a}`),"REJECT_PROFANITY_ERROR")}async grantAdminRole(a){return Qt.handle(he.post(`${this.baseUrl}/grant-role/${a}`),"GRANT_ADMIN_ROLE_ERROR")}async getPendingContents(){return Qt.handle(he.get(`${this.baseUrl}/content/pending`),"GET_PENDING_CONTENTS_ERROR")}async approveAllPendingContents(){return Qt.handle(he.post(`${this.baseUrl}/content/approve-all`),"APPROVE_ALL_CONTENTS_ERROR")}async cleanupStaleGames(){return Qt.handle(he.post(`${this.baseUrl}/cleanup/stale-games`),"CLEANUP_STALE_GAMES_ERROR")}async cleanupDisconnectedPlayers(){return Qt.handle(he.post(`${this.baseUrl}/cleanup/disconnected-players`),"CLEANUP_DISCONNECTED_PLAYERS_ERROR")}async cleanupEmptyGames(){return Qt.handle(he.post(`${this.baseUrl}/cleanup/empty-games`),"CLEANUP_EMPTY_GAMES_ERROR")}}const Kt=new cj,qa="/api/v1/game",kb="/api/v1/chat",Lb=o=>{switch(o){case"HINT":return"HINT";case"DEFENSE":return"DEFENSE";case"SYSTEM":return"SYSTEM";default:return"DISCUSSION"}};class Iv{async submitHint(a,s){return yn.post(`${qa}/hint`,{gameNumber:a,hint:s})}async castVoteForLiar(a,s){return yn.post(`${qa}/cast-vote`,{gameNumber:a,targetUserId:s})}async submitDefense(a,s){return yn.post(`${qa}/submit-defense`,{gameNumber:a,defenseText:s})}async endDefensePhase(a){return yn.post(`${qa}/defense/end`,{gameNumber:a})}async castFinalVote(a,s){return yn.post(`${qa}/vote/final`,{gameNumber:a,voteForExecution:s})}async guessWord(a,s){return yn.post(`${qa}/guess-word`,{gameNumber:a,guess:s})}async endRound(a){return yn.post(`${qa}/end-of-round`,{gameNumber:a})}async getGameResult(a){return yn.get(`${qa}/result/${a}`)}async sendChatMessage(a,s,i="GENERAL"){await yn.post(`${kb}/send`,{gameNumber:a,content:s,type:Lb(i)})}async getChatHistory(a,s=50,i){const c=new URLSearchParams({gameNumber:String(a),limit:String(s)}),d=i&&i!=="GENERAL"?Lb(i):void 0;return d&&c.append("type",d),(await yn.get(`${kb}/history?${c.toString()}`)).map(h=>{const p=typeof h.gameNumber=="number"?h.gameNumber:Number.parseInt(String(h.gameNumber??0),10),g=typeof h.timestamp=="string"?Date.parse(h.timestamp):Number(h.timestamp??Date.now()),y=h.playerNickname??h.playerNicknameSnapshot??h.nickname??"SYSTEM",b=h.content??h.message??"",N=typeof h.playerUserId=="number"?h.playerUserId:void 0,E=typeof h.userId=="number"?h.userId:N;return{id:String(h.id??`${p}-${g}`),gameNumber:Number.isNaN(p)?0:p,playerId:h.playerId!=null?String(h.playerId):void 0,userId:E,playerNickname:y,nickname:h.nickname??void 0,playerName:h.playerName??h.playerNicknameSnapshot??void 0,content:b,message:b,gameId:h.gameId!=null?String(h.gameId):void 0,roomId:h.roomId!=null?String(h.roomId):void 0,timestamp:g,type:h.type||"DISCUSSION"}})}}const Un=new Iv,uj=Object.freeze(Object.defineProperty({__proto__:null,GameFlowService:Iv,gameFlowService:Un},Symbol.toStringTag,{value:"Module"}));let Pf=null;async function dj(){if(!(typeof window>"u"))try{const{useGameStore:o}=await _r(async()=>{const{useGameStore:i}=await Promise.resolve().then(()=>IR);return{useGameStore:i}},void 0),{leaveGame:a,resetGame:s}=o.getState();typeof a=="function"?await a():typeof s=="function"&&s()}catch(o){console.warn("[authStore] Failed to leave active game during logout",o)}}const fj=()=>{Pf&&(console.log("Session expired event received, clearing auth state"),Pf.logout({reason:"session-expired",skipApi:!0}))};typeof window<"u"&&window.addEventListener("auth-session-expired",fj);const zn=Za()(om((o,a)=>{const s=async(i={})=>{const{reason:c="logout",skipApi:d=!1}=i;try{await dj(),d||await wf.logout()}catch(m){console.error("Logout error:",m)}finally{o({isAuthenticated:!1,userId:null,nickname:null,isRefreshing:!1}),await Ov({reason:c,broadcastEvent:!1})}};return Pf={logout:s},{isAuthenticated:!1,userId:null,nickname:null,isRefreshing:!1,login:async i=>{try{const c=await wf.login({nickname:i});if(c.success)o({isAuthenticated:!0,userId:c.userId??null,nickname:c.nickname??null,isRefreshing:!1}),console.log("Auth state updated:",c.nickname);else throw new Error("Login failed")}catch(c){throw o({isAuthenticated:!1,userId:null,nickname:null,isRefreshing:!1}),c}},logout:async()=>{await s({reason:"logout"})},checkAuth:async()=>{if(!a()?.isRefreshing){o({isRefreshing:!0});try{const c=await wf.refreshSession();c.success?(o({isAuthenticated:!0,userId:c.userId??null,nickname:c.nickname??null,isRefreshing:!1}),console.log("Auth state updated after refresh:",c.nickname)):(console.log("Auth refresh unsuccessful:",c.message),await s({reason:"session-expired",skipApi:!0}))}catch(c){console.error("Unexpected auth check error:",c),await s({reason:"session-expired",skipApi:!0})}}}}},{name:"auth-storage",partialize:o=>({isAuthenticated:o.isAuthenticated,userId:o.userId,nickname:o.nickname})}));function mj({className:o}={}){const a=Jf(),s=Ir(),{nickname:i,logout:c}=zn(),d=()=>{c(),s("/")};return l.jsx("header",{className:ye("border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",o),children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsxs("div",{className:"flex h-16 items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs(Ml,{to:"/lobby",className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary flex items-center justify-center",children:l.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:"LG"})}),l.jsx("span",{className:"font-bold text-lg",children:"Liar Game"})]}),l.jsx("nav",{className:"hidden md:flex items-center gap-2 text-sm text-muted-foreground",children:a.pathname!=="/lobby"&&a.pathname!=="/"&&l.jsxs(l.Fragment,{children:[l.jsx(Ml,{to:"/lobby",className:"hover:text-foreground transition-colors",children:l.jsx(Pi,{className:"h-4 w-4"})}),l.jsx("span",{children:"/"})]})})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[i&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Il,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm font-medium",children:i})]}),l.jsx(rT,{}),i&&l.jsxs(ve,{variant:"ghost",size:"sm",onClick:d,className:"gap-2",children:[l.jsx(Iy,{className:"h-4 w-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})})}function hj({className:o}={}){return l.jsx("footer",{className:ye("border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",o),children:l.jsx("div",{className:"container mx-auto px-4 py-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[l.jsx("span",{children:" 2024 Liar Game"}),l.jsx("span",{children:""}),l.jsx("span",{children:"Built with React & TypeScript"})]}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[l.jsx("span",{children:"Version 1.0.0"}),l.jsx("span",{children:""}),l.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-foreground transition-colors",children:"Source Code"})]})]})})})}function pj(){const o=x.useRef(null),a=x.useRef(null),s=x.useRef(null),[i,c]=x.useState({headerHeight:0,footerHeight:0,contentPadding:0});x.useLayoutEffect(()=>{if(typeof window>"u")return;let m=0;const h=()=>{m=0;const y=o.current?.offsetHeight??0,b=a.current?.offsetHeight??0,N=(()=>{if(!s.current)return 0;const E=window.getComputedStyle(s.current),j=parseFloat(E.paddingTop)||0,S=parseFloat(E.paddingBottom)||0;return j+S})();c(E=>E.headerHeight===y&&E.footerHeight===b&&E.contentPadding===N?E:{headerHeight:y,footerHeight:b,contentPadding:N})},p=()=>{m||(m=window.requestAnimationFrame(h))};h(),window.addEventListener("resize",p);const g=[];if(typeof ResizeObserver<"u"){if(o.current){const y=new ResizeObserver(p);y.observe(o.current),g.push(y)}if(a.current){const y=new ResizeObserver(p);y.observe(a.current),g.push(y)}if(s.current){const y=new ResizeObserver(p);y.observe(s.current),g.push(y)}}return()=>{window.removeEventListener("resize",p),m&&window.cancelAnimationFrame(m),g.forEach(y=>y.disconnect())}},[]);const d=x.useMemo(()=>({"--app-header-height":`${Math.round(i.headerHeight)}px`,"--app-footer-height":`${Math.round(i.footerHeight)}px`,"--app-content-padding":`${Math.round(i.contentPadding)}px`}),[i]);return l.jsx(Oy,{client:qy,children:l.jsxs(vv,{defaultTheme:"system",storageKey:"liar-game-theme",children:[l.jsxs("div",{className:"flex min-h-screen flex-col bg-background",style:d,"data-app-shell":"true",children:[l.jsx("div",{ref:o,className:"shrink-0",children:l.jsx(mj,{className:"shrink-0"})}),l.jsx("main",{className:"flex-1 overflow-hidden",children:l.jsx("div",{className:"mx-auto flex h-full w-full max-w-screen-2xl flex-col px-4",children:l.jsx("div",{ref:s,className:"flex min-h-0 flex-1 flex-col py-6 sm:py-8","data-app-content":"true",children:l.jsx(Cy,{})})})}),l.jsx("div",{ref:a,className:"shrink-0",children:l.jsx(hj,{className:"shrink-0"})}),l.jsx(gv,{})]}),l.jsx(By,{initialIsOpen:!1})]})})}function gj(){return l.jsx(Oy,{client:qy,children:l.jsxs(vv,{defaultTheme:"system",storageKey:"liar-game-theme",children:[l.jsx("div",{className:"min-h-screen bg-background",children:l.jsx(Cy,{})}),l.jsx(gv,{}),l.jsx(By,{initialIsOpen:!1})]})})}function Tf({children:o}){const a=Jf(),{isAuthenticated:s,checkAuth:i}=zn(),[c,d]=x.useState(!0);return x.useEffect(()=>{s?d(!1):(async()=>{try{await i()}catch(h){console.log("Auth verification failed",h)}finally{d(!1)}})()},[s,i]),c?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):s?l.jsx(l.Fragment,{children:o}):l.jsx(_y,{to:"/login",state:{from:a},replace:!0})}const Ae=x.forwardRef(({className:o,...a},s)=>l.jsx("div",{ref:s,className:ye("rounded-lg border bg-card text-card-foreground shadow-sm",o),...a}));Ae.displayName="Card";const ct=x.forwardRef(({className:o,...a},s)=>l.jsx("div",{ref:s,className:ye("flex flex-col space-y-1.5 p-6",o),...a}));ct.displayName="CardHeader";const ut=x.forwardRef(({className:o,...a},s)=>l.jsx("h3",{ref:s,className:ye("text-2xl font-semibold leading-none tracking-tight",o),...a}));ut.displayName="CardTitle";const Ms=x.forwardRef(({className:o,...a},s)=>l.jsx("p",{ref:s,className:ye("text-sm text-muted-foreground",o),...a}));Ms.displayName="CardDescription";const De=x.forwardRef(({className:o,...a},s)=>l.jsx("div",{ref:s,className:ye("p-6 pt-0",o),...a}));De.displayName="CardContent";const bj=x.forwardRef(({className:o,...a},s)=>l.jsx("div",{ref:s,className:ye("flex items-center p-6 pt-0",o),...a}));bj.displayName="CardFooter";const Wn=x.forwardRef(({className:o,type:a,...s},i)=>l.jsx("input",{type:a,className:ye("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o),ref:i,...s}));Wn.displayName="Input";var yj="Label",kv=x.forwardRef((o,a)=>l.jsx(Ve.label,{...o,ref:a,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(o.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));kv.displayName=yj;var Lv=kv;const vj=Wl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),$t=x.forwardRef(({className:o,...a},s)=>l.jsx(Lv,{ref:s,className:ye(vj(),o),...a}));$t.displayName=Lv.displayName;const xj=o=>{const a=o.charCodeAt(0);return a>=44032&&a<=55203},Sj=o=>{const a=o.charCodeAt(0);return a>=12593&&a<=12622||a>=12623&&a<=12643},Nj=o=>{const a=o.charCodeAt(0);return a>=65&&a<=90||a>=97&&a<=122},Ej=o=>o.trim().toLowerCase(),Ub=o=>{if(!o||typeof o!="string")return{isValid:!1,error:" ."};const a=o.trim();if(a.length===0)return{isValid:!1,error:" ."};if(a.length<2)return{isValid:!1,error:"  2  ."};if(a.length>12)return{isValid:!1,error:"  12  ."};for(let i=0;i<a.length;i++){const c=a[i];if(Sj(c))return{isValid:!1,error:"    . (, ,    )"};if(!xj(c)&&!Nj(c))return{isValid:!1,error:"    ."}}return{isValid:!0,normalizedNickname:Ej(a)}};function Gb(){const o=Ir(),a=Jf(),{toast:s}=Wa(),{isAuthenticated:i,login:c}=zn(),[d,m]=x.useState(""),[h,p]=x.useState(!1),[g,y]=x.useState("");if(i){const E=a.state?.from?.pathname||"/lobby";return l.jsx(_y,{to:E,replace:!0})}const b=E=>{const j=E.target.value;if(m(j),j.trim()){const S=Ub(j);y(S.isValid?"":S.error||"")}else y("")},N=async E=>{E.preventDefault();const j=Ub(d);if(!j.isValid){y(j.error||" ."),s({title:" ",description:j.error||" .",variant:"destructive"});return}p(!0),y("");try{await c(j.normalizedNickname),s({title:" ",description:`${d.trim()}, !`});const S=a.state?.from?.pathname||"/lobby";o(S,{replace:!0})}catch(S){console.error("Login error:",S);const _=S instanceof Error?S.message:" .      .";s({title:" ",description:_,variant:"destructive"})}finally{p(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:l.jsx(_t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:l.jsxs(Ae,{className:"shadow-xl",children:[l.jsxs(ct,{className:"text-center",children:[l.jsx(_t.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"mx-auto w-16 h-16 rounded-full flex items-center justify-center mb-4 bg-gradient-to-r from-blue-500 to-violet-600",children:l.jsx(Il,{className:"w-8 h-8 text-white"})}),l.jsx(ut,{className:"text-2xl font-bold",children:" "}),l.jsx(Ms,{children:"   "})]}),l.jsxs(De,{children:[l.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx($t,{htmlFor:"nickname",className:"text-sm font-medium",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(Il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx(Wn,{id:"nickname",type:"text",placeholder:"  (/, 2-12)",value:d,onChange:b,className:`pl-10 ${g?"border-red-500 focus:border-red-500":""}`,disabled:h,autoComplete:"username",autoFocus:!0,maxLength:12})]}),g&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:g}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"      2-12     "})]}),l.jsx(ve,{type:"submit",className:"w-full",size:"lg",disabled:h||!d.trim()||!!g,children:h?" ...":l.jsxs(l.Fragment,{children:[" ",l.jsx(JE,{className:"ml-2 h-4 w-4"})]})})]}),l.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:[l.jsx("p",{children:"    "}),l.jsx("p",{children:"       "})]})]})]})})})}var ec="Tabs",[wj]=Qi(ec,[uy]),Uv=uy(),[Tj,dm]=wj(ec),Gv=x.forwardRef((o,a)=>{const{__scopeTabs:s,value:i,onValueChange:c,defaultValue:d,orientation:m="horizontal",dir:h,activationMode:p="automatic",...g}=o,y=Wf(h),[b,N]=Dl({prop:i,onChange:c,defaultProp:d??"",caller:ec});return l.jsx(Tj,{scope:s,baseId:Xl(),value:b,onValueChange:N,orientation:m,dir:y,activationMode:p,children:l.jsx(Ve.div,{dir:y,"data-orientation":m,...g,ref:a})})});Gv.displayName=ec;var Hv="TabsList",zv=x.forwardRef((o,a)=>{const{__scopeTabs:s,loop:i=!0,...c}=o,d=dm(Hv,s),m=Uv(s);return l.jsx(EE,{asChild:!0,...m,orientation:d.orientation,dir:d.dir,loop:i,children:l.jsx(Ve.div,{role:"tablist","aria-orientation":d.orientation,...c,ref:a})})});zv.displayName=Hv;var Pv="TabsTrigger",Vv=x.forwardRef((o,a)=>{const{__scopeTabs:s,value:i,disabled:c=!1,...d}=o,m=dm(Pv,s),h=Uv(s),p=Yv(m.baseId,i),g=$v(m.baseId,i),y=i===m.value;return l.jsx(wE,{asChild:!0,...h,focusable:!c,active:y,children:l.jsx(Ve.button,{type:"button",role:"tab","aria-selected":y,"aria-controls":g,"data-state":y?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:p,...d,ref:a,onMouseDown:Ge(o.onMouseDown,b=>{!c&&b.button===0&&b.ctrlKey===!1?m.onValueChange(i):b.preventDefault()}),onKeyDown:Ge(o.onKeyDown,b=>{[" ","Enter"].includes(b.key)&&m.onValueChange(i)}),onFocus:Ge(o.onFocus,()=>{const b=m.activationMode!=="manual";!y&&!c&&b&&m.onValueChange(i)})})})});Vv.displayName=Pv;var Bv="TabsContent",qv=x.forwardRef((o,a)=>{const{__scopeTabs:s,value:i,forceMount:c,children:d,...m}=o,h=dm(Bv,s),p=Yv(h.baseId,i),g=$v(h.baseId,i),y=i===h.value,b=x.useRef(y);return x.useEffect(()=>{const N=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(N)},[]),l.jsx(Mr,{present:c||y,children:({present:N})=>l.jsx(Ve.div,{"data-state":y?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":p,hidden:!N,id:g,tabIndex:0,...m,ref:a,style:{...o.style,animationDuration:b.current?"0s":void 0},children:N&&d})})});qv.displayName=Bv;function Yv(o,a){return`${o}-trigger-${a}`}function $v(o,a){return`${o}-content-${a}`}var jj=Gv,Fv=zv,Xv=Vv,Qv=qv;const Rj=jj,Kv=x.forwardRef(({className:o,...a},s)=>l.jsx(Fv,{ref:s,className:ye("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",o),...a}));Kv.displayName=Fv.displayName;const _l=x.forwardRef(({className:o,...a},s)=>l.jsx(Xv,{ref:s,className:ye("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",o),...a}));_l.displayName=Xv.displayName;const Al=x.forwardRef(({className:o,...a},s)=>l.jsx(Qv,{ref:s,className:ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",o),...a}));Al.displayName=Qv.displayName;const Cj=jE,_j=RE,Aj=x.forwardRef(({className:o,inset:a,children:s,...i},c)=>l.jsxs(dy,{ref:c,className:ye("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",o),...i,children:[s,l.jsx(ew,{className:"ml-auto h-4 w-4"})]}));Aj.displayName=dy.displayName;const Oj=x.forwardRef(({className:o,...a},s)=>l.jsx(fy,{ref:s,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o),...a}));Oj.displayName=fy.displayName;const Wv=x.forwardRef(({className:o,sideOffset:a=4,...s},i)=>l.jsx(TE,{children:l.jsx(my,{ref:i,sideOffset:a,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o),...s})}));Wv.displayName=my.displayName;const Vf=x.forwardRef(({className:o,inset:a,...s},i)=>l.jsx(hy,{ref:i,className:ye("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",o),...s}));Vf.displayName=hy.displayName;const Dj=x.forwardRef(({className:o,children:a,checked:s,...i},c)=>l.jsxs(py,{ref:c,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),checked:s,...i,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(gy,{children:l.jsx(Ql,{className:"h-4 w-4"})})}),a]}));Dj.displayName=py.displayName;const Mj=x.forwardRef(({className:o,children:a,...s},i)=>l.jsxs(by,{ref:i,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),...s,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(gy,{children:l.jsx(tw,{className:"h-2 w-2 fill-current"})})}),a]}));Mj.displayName=by.displayName;const Ij=x.forwardRef(({className:o,inset:a,...s},i)=>l.jsx(yy,{ref:i,className:ye("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",o),...s}));Ij.displayName=yy.displayName;const Zv=x.forwardRef(({className:o,...a},s)=>l.jsx(vy,{ref:s,className:ye("-mx-1 my-1 h-px bg-muted",o),...a}));Zv.displayName=vy.displayName;const fm=x.forwardRef(({className:o,...a},s)=>l.jsx("textarea",{className:ye("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o),ref:s,...a}));fm.displayName="Textarea";const Ka=AE,Vl=OE,kj=CE,Jv=x.forwardRef(({className:o,...a},s)=>l.jsx(xy,{ref:s,className:ye("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",o),...a}));Jv.displayName=xy.displayName;const ya=x.forwardRef(({className:o,children:a,...s},i)=>l.jsxs(kj,{children:[l.jsx(Jv,{}),l.jsxs(Sy,{ref:i,className:ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",o),...s,children:[a,l.jsxs(_E,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(My,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ya.displayName=Sy.displayName;const va=({className:o,...a})=>l.jsx("div",{className:ye("flex flex-col space-y-1.5 text-center sm:text-left",o),...a});va.displayName="DialogHeader";const xa=x.forwardRef(({className:o,...a},s)=>l.jsx(Ny,{ref:s,className:ye("text-lg font-semibold leading-none tracking-tight",o),...a}));xa.displayName=Ny.displayName;const Sa=x.forwardRef(({className:o,...a},s)=>l.jsx(Ey,{ref:s,className:ye("text-sm text-muted-foreground",o),...a}));Sa.displayName=Ey.displayName;function Lj(){const[o,a]=x.useState([]),[s,i]=x.useState(!1),[c,d]=x.useState({title:"",description:""}),{toast:m}=Wa(),h=x.useRef(null),p=x.useCallback(async()=>{try{const E=await Or.getSubjects();a(E.subjects||[])}catch(E){console.error("Failed to load topics:",E),m({title:"  ",description:"     ",variant:"destructive"})}},[m]);x.useEffect(()=>{p()},[p]);const g=async()=>{if(!c.title.trim()){m({title:" ",description:"  ",variant:"destructive"}),h.current?.focus();return}try{const E=await Or.createSubject({name:c.title.trim()});a(j=>[...j,E]),d({title:"",description:""}),h.current?.focus(),m({title:" ",description:`"${E.title}"  `})}catch(E){console.error("Create topic error:",E),m({title:"  ",description:"    ",variant:"destructive"})}},y=async E=>{try{await Or.deleteSubject(E),a(j=>j.filter(S=>S.id!==E)),m({title:" ",description:"  "})}catch(j){console.error("Delete topic error:",j),m({title:"  ",description:"    ",variant:"destructive"})}},b=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),g())},N=E=>{i(E),E&&setTimeout(()=>h.current?.focus(),100)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[l.jsx(kl,{className:"h-6 w-6"})," "]}),l.jsx("p",{className:"text-muted-foreground",children:"   "})]}),l.jsxs(Ka,{open:s,onOpenChange:N,children:[l.jsx(Vl,{asChild:!0,children:l.jsxs(ve,{children:[l.jsx(Vi,{className:"h-4 w-4 mr-2"}),"  "]})}),l.jsxs(ya,{children:[l.jsxs(va,{children:[l.jsx(xa,{children:"  "}),l.jsx(Sa,{children:"     (Enter  )"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx($t,{htmlFor:"title",children:" "}),l.jsx(Wn,{ref:h,id:"title",placeholder:": , ,  ",value:c.title,onChange:E=>d(j=>({...j,title:E.target.value})),onKeyPress:b,autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx($t,{htmlFor:"description",children:" ()"}),l.jsx(fm,{id:"description",placeholder:"   ",value:c.description,onChange:E=>d(j=>({...j,description:E.target.value})),onKeyPress:b})]}),l.jsxs("div",{className:"flex gap-2 justify-between",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:" Enter     "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ve,{variant:"outline",onClick:()=>i(!1),children:""}),l.jsx(ve,{onClick:g,children:""})]})]})]})]})]})]}),l.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[o.map(E=>l.jsxs(Ae,{children:[l.jsx(ct,{className:"pb-3",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx(ut,{className:"text-lg",children:E.title}),E.description&&l.jsx(Ms,{className:"mt-1",children:E.description})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(ve,{variant:"ghost",size:"sm",children:l.jsx(nw,{className:"h-4 w-4"})}),l.jsx(ve,{variant:"ghost",size:"sm",onClick:()=>y(E.id),children:l.jsx(aw,{className:"h-4 w-4"})})]})]})}),l.jsx(De,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",E.wordCount||0,""]}),l.jsx("span",{className:"text-xs text-muted-foreground",children:E.createdAt?new Date(E.createdAt).toLocaleDateString():"N/A"})]})})]},E.id)),o.length===0&&l.jsx(Ae,{className:"col-span-full",children:l.jsxs(De,{className:"flex flex-col items-center justify-center py-12",children:[l.jsx(kl,{className:"h-12 w-12 text-muted-foreground mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"  "}),l.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"     "}),l.jsxs(ve,{onClick:()=>N(!0),children:[l.jsx(Vi,{className:"h-4 w-4 mr-2"}),"  "]})]})})]})]})}function Bf(o,[a,s]){return Math.min(s,Math.max(a,o))}function Uj(o){const a=x.useRef({value:o,previous:o});return x.useMemo(()=>(a.current.value!==o&&(a.current.previous=a.current.value,a.current.value=o),a.current.previous),[o])}var Gj=[" ","Enter","ArrowUp","ArrowDown"],Hj=[" ","Enter"],Is="Select",[tc,nc,zj]=ly(Is),[Gr]=Qi(Is,[zj,wy]),ac=wy(),[Pj,es]=Gr(Is),[Vj,Bj]=Gr(Is),ex=o=>{const{__scopeSelect:a,children:s,open:i,defaultOpen:c,onOpenChange:d,value:m,defaultValue:h,onValueChange:p,dir:g,name:y,autoComplete:b,disabled:N,required:E,form:j}=o,S=ac(a),[_,L]=x.useState(null),[R,T]=x.useState(null),[A,D]=x.useState(!1),Y=Wf(g),[z,I]=Dl({prop:i,defaultProp:c??!1,onChange:d,caller:Is}),[G,Q]=Dl({prop:m,defaultProp:h,onChange:p,caller:Is}),ae=x.useRef(null),le=_?j||!!_.closest("form"):!0,[K,se]=x.useState(new Set),oe=Array.from(K).map(M=>M.props.value).join(";");return l.jsx(zE,{...S,children:l.jsxs(Pj,{required:E,scope:a,trigger:_,onTriggerChange:L,valueNode:R,onValueNodeChange:T,valueNodeHasChildren:A,onValueNodeHasChildrenChange:D,contentId:Xl(),value:G,onValueChange:Q,open:z,onOpenChange:I,dir:Y,triggerPointerDownPosRef:ae,disabled:N,children:[l.jsx(tc.Provider,{scope:a,children:l.jsx(Vj,{scope:o.__scopeSelect,onNativeOptionAdd:x.useCallback(M=>{se(H=>new Set(H).add(M))},[]),onNativeOptionRemove:x.useCallback(M=>{se(H=>{const ee=new Set(H);return ee.delete(M),ee})},[]),children:s})}),le?l.jsxs(wx,{"aria-hidden":!0,required:E,tabIndex:-1,name:y,autoComplete:b,value:G,onChange:M=>Q(M.target.value),disabled:N,form:j,children:[G===void 0?l.jsx("option",{value:""}):null,Array.from(K)]},oe):null]})})};ex.displayName=Is;var tx="SelectTrigger",nx=x.forwardRef((o,a)=>{const{__scopeSelect:s,disabled:i=!1,...c}=o,d=ac(s),m=es(tx,s),h=m.disabled||i,p=Ut(a,m.onTriggerChange),g=nc(s),y=x.useRef("touch"),[b,N,E]=jx(S=>{const _=g().filter(T=>!T.disabled),L=_.find(T=>T.value===m.value),R=Rx(_,S,L);R!==void 0&&m.onValueChange(R.value)}),j=S=>{h||(m.onOpenChange(!0),E()),S&&(m.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return l.jsx(DE,{asChild:!0,...d,children:l.jsx(Ve.button,{type:"button",role:"combobox","aria-controls":m.contentId,"aria-expanded":m.open,"aria-required":m.required,"aria-autocomplete":"none",dir:m.dir,"data-state":m.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":Tx(m.value)?"":void 0,...c,ref:p,onClick:Ge(c.onClick,S=>{S.currentTarget.focus(),y.current!=="mouse"&&j(S)}),onPointerDown:Ge(c.onPointerDown,S=>{y.current=S.pointerType;const _=S.target;_.hasPointerCapture(S.pointerId)&&_.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(j(S),S.preventDefault())}),onKeyDown:Ge(c.onKeyDown,S=>{const _=b.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&N(S.key),!(_&&S.key===" ")&&Gj.includes(S.key)&&(j(),S.preventDefault())})})})});nx.displayName=tx;var ax="SelectValue",sx=x.forwardRef((o,a)=>{const{__scopeSelect:s,className:i,style:c,children:d,placeholder:m="",...h}=o,p=es(ax,s),{onValueNodeHasChildrenChange:g}=p,y=d!==void 0,b=Ut(a,p.onValueNodeChange);return Zn(()=>{g(y)},[g,y]),l.jsx(Ve.span,{...h,ref:b,style:{pointerEvents:"none"},children:Tx(p.value)?l.jsx(l.Fragment,{children:m}):d})});sx.displayName=ax;var qj="SelectIcon",rx=x.forwardRef((o,a)=>{const{__scopeSelect:s,children:i,...c}=o;return l.jsx(Ve.span,{"aria-hidden":!0,...c,ref:a,children:i||""})});rx.displayName=qj;var Yj="SelectPortal",ix=o=>l.jsx(cy,{asChild:!0,...o});ix.displayName=Yj;var ks="SelectContent",ox=x.forwardRef((o,a)=>{const s=es(ks,o.__scopeSelect),[i,c]=x.useState();if(Zn(()=>{c(new DocumentFragment)},[]),!s.open){const d=i;return d?Zf.createPortal(l.jsx(lx,{scope:o.__scopeSelect,children:l.jsx(tc.Slot,{scope:o.__scopeSelect,children:l.jsx("div",{children:o.children})})}),d):null}return l.jsx(cx,{...o,ref:a})});ox.displayName=ks;var Hn=10,[lx,ts]=Gr(ks),$j="SelectContentImpl",Fj=LE("SelectContent.RemoveScroll"),cx=x.forwardRef((o,a)=>{const{__scopeSelect:s,position:i="item-aligned",onCloseAutoFocus:c,onEscapeKeyDown:d,onPointerDownOutside:m,side:h,sideOffset:p,align:g,alignOffset:y,arrowPadding:b,collisionBoundary:N,collisionPadding:E,sticky:j,hideWhenDetached:S,avoidCollisions:_,...L}=o,R=es(ks,s),[T,A]=x.useState(null),[D,Y]=x.useState(null),z=Ut(a,re=>A(re)),[I,G]=x.useState(null),[Q,ae]=x.useState(null),le=nc(s),[K,se]=x.useState(!1),oe=x.useRef(!1);x.useEffect(()=>{if(T)return ME(T)},[T]),IE();const M=x.useCallback(re=>{const[ce,...xe]=le().map(Me=>Me.ref.current),[Ne]=xe.slice(-1),Ce=document.activeElement;for(const Me of re)if(Me===Ce||(Me?.scrollIntoView({block:"nearest"}),Me===ce&&D&&(D.scrollTop=0),Me===Ne&&D&&(D.scrollTop=D.scrollHeight),Me?.focus(),document.activeElement!==Ce))return},[le,D]),H=x.useCallback(()=>M([I,T]),[M,I,T]);x.useEffect(()=>{K&&H()},[K,H]);const{onOpenChange:ee,triggerPointerDownPosRef:ue}=R;x.useEffect(()=>{if(T){let re={x:0,y:0};const ce=Ne=>{re={x:Math.abs(Math.round(Ne.pageX)-(ue.current?.x??0)),y:Math.abs(Math.round(Ne.pageY)-(ue.current?.y??0))}},xe=Ne=>{re.x<=10&&re.y<=10?Ne.preventDefault():T.contains(Ne.target)||ee(!1),document.removeEventListener("pointermove",ce),ue.current=null};return ue.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",xe,{capture:!0})}}},[T,ee,ue]),x.useEffect(()=>{const re=()=>ee(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[ee]);const[pe,k]=jx(re=>{const ce=le().filter(Ce=>!Ce.disabled),xe=ce.find(Ce=>Ce.ref.current===document.activeElement),Ne=Rx(ce,re,xe);Ne&&setTimeout(()=>Ne.ref.current.focus())}),C=x.useCallback((re,ce,xe)=>{const Ne=!oe.current&&!xe;(R.value!==void 0&&R.value===ce||Ne)&&(G(re),Ne&&(oe.current=!0))},[R.value]),P=x.useCallback(()=>T?.focus(),[T]),W=x.useCallback((re,ce,xe)=>{const Ne=!oe.current&&!xe;(R.value!==void 0&&R.value===ce||Ne)&&ae(re)},[R.value]),ne=i==="popper"?qf:ux,de=ne===qf?{side:h,sideOffset:p,align:g,alignOffset:y,arrowPadding:b,collisionBoundary:N,collisionPadding:E,sticky:j,hideWhenDetached:S,avoidCollisions:_}:{};return l.jsx(lx,{scope:s,content:T,viewport:D,onViewportChange:Y,itemRefCallback:C,selectedItem:I,onItemLeave:P,itemTextRefCallback:W,focusSelectedItem:H,selectedItemText:Q,position:i,isPositioned:K,searchRef:pe,children:l.jsx(kE,{as:Fj,allowPinchZoom:!0,children:l.jsx(UE,{asChild:!0,trapped:R.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:Ge(c,re=>{R.trigger?.focus({preventScroll:!0}),re.preventDefault()}),children:l.jsx(GE,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>R.onOpenChange(!1),children:l.jsx(ne,{role:"listbox",id:R.contentId,"data-state":R.open?"open":"closed",dir:R.dir,onContextMenu:re=>re.preventDefault(),...L,...de,onPlaced:()=>se(!0),ref:z,style:{display:"flex",flexDirection:"column",outline:"none",...L.style},onKeyDown:Ge(L.onKeyDown,re=>{const ce=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!ce&&re.key.length===1&&k(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let Ne=le().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);if(["ArrowUp","End"].includes(re.key)&&(Ne=Ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const Ce=re.target,Me=Ne.indexOf(Ce);Ne=Ne.slice(Me+1)}setTimeout(()=>M(Ne)),re.preventDefault()}})})})})})})});cx.displayName=$j;var Xj="SelectItemAlignedPosition",ux=x.forwardRef((o,a)=>{const{__scopeSelect:s,onPlaced:i,...c}=o,d=es(ks,s),m=ts(ks,s),[h,p]=x.useState(null),[g,y]=x.useState(null),b=Ut(a,z=>y(z)),N=nc(s),E=x.useRef(!1),j=x.useRef(!0),{viewport:S,selectedItem:_,selectedItemText:L,focusSelectedItem:R}=m,T=x.useCallback(()=>{if(d.trigger&&d.valueNode&&h&&g&&S&&_&&L){const z=d.trigger.getBoundingClientRect(),I=g.getBoundingClientRect(),G=d.valueNode.getBoundingClientRect(),Q=L.getBoundingClientRect();if(d.dir!=="rtl"){const Ce=Q.left-I.left,Me=G.left-Ce,nt=z.left-Me,ht=z.width+nt,Vt=Math.max(ht,I.width),wt=window.innerWidth-Hn,Xe=Bf(Me,[Hn,Math.max(Hn,wt-Vt)]);h.style.minWidth=ht+"px",h.style.left=Xe+"px"}else{const Ce=I.right-Q.right,Me=window.innerWidth-G.right-Ce,nt=window.innerWidth-z.right-Me,ht=z.width+nt,Vt=Math.max(ht,I.width),wt=window.innerWidth-Hn,Xe=Bf(Me,[Hn,Math.max(Hn,wt-Vt)]);h.style.minWidth=ht+"px",h.style.right=Xe+"px"}const ae=N(),le=window.innerHeight-Hn*2,K=S.scrollHeight,se=window.getComputedStyle(g),oe=parseInt(se.borderTopWidth,10),M=parseInt(se.paddingTop,10),H=parseInt(se.borderBottomWidth,10),ee=parseInt(se.paddingBottom,10),ue=oe+M+K+ee+H,pe=Math.min(_.offsetHeight*5,ue),k=window.getComputedStyle(S),C=parseInt(k.paddingTop,10),P=parseInt(k.paddingBottom,10),W=z.top+z.height/2-Hn,ne=le-W,de=_.offsetHeight/2,re=_.offsetTop+de,ce=oe+M+re,xe=ue-ce;if(ce<=W){const Ce=ae.length>0&&_===ae[ae.length-1].ref.current;h.style.bottom="0px";const Me=g.clientHeight-S.offsetTop-S.offsetHeight,nt=Math.max(ne,de+(Ce?P:0)+Me+H),ht=ce+nt;h.style.height=ht+"px"}else{const Ce=ae.length>0&&_===ae[0].ref.current;h.style.top="0px";const nt=Math.max(W,oe+S.offsetTop+(Ce?C:0)+de)+xe;h.style.height=nt+"px",S.scrollTop=ce-W+S.offsetTop}h.style.margin=`${Hn}px 0`,h.style.minHeight=pe+"px",h.style.maxHeight=le+"px",i?.(),requestAnimationFrame(()=>E.current=!0)}},[N,d.trigger,d.valueNode,h,g,S,_,L,d.dir,i]);Zn(()=>T(),[T]);const[A,D]=x.useState();Zn(()=>{g&&D(window.getComputedStyle(g).zIndex)},[g]);const Y=x.useCallback(z=>{z&&j.current===!0&&(T(),R?.(),j.current=!1)},[T,R]);return l.jsx(Kj,{scope:s,contentWrapper:h,shouldExpandOnScrollRef:E,onScrollButtonChange:Y,children:l.jsx("div",{ref:p,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:l.jsx(Ve.div,{...c,ref:b,style:{boxSizing:"border-box",maxHeight:"100%",...c.style}})})})});ux.displayName=Xj;var Qj="SelectPopperPosition",qf=x.forwardRef((o,a)=>{const{__scopeSelect:s,align:i="start",collisionPadding:c=Hn,...d}=o,m=ac(s);return l.jsx(HE,{...m,...d,ref:a,align:i,collisionPadding:c,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qf.displayName=Qj;var[Kj,mm]=Gr(ks,{}),Yf="SelectViewport",dx=x.forwardRef((o,a)=>{const{__scopeSelect:s,nonce:i,...c}=o,d=ts(Yf,s),m=mm(Yf,s),h=Ut(a,d.onViewportChange),p=x.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),l.jsx(tc.Slot,{scope:s,children:l.jsx(Ve.div,{"data-radix-select-viewport":"",role:"presentation",...c,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...c.style},onScroll:Ge(c.onScroll,g=>{const y=g.currentTarget,{contentWrapper:b,shouldExpandOnScrollRef:N}=m;if(N?.current&&b){const E=Math.abs(p.current-y.scrollTop);if(E>0){const j=window.innerHeight-Hn*2,S=parseFloat(b.style.minHeight),_=parseFloat(b.style.height),L=Math.max(S,_);if(L<j){const R=L+E,T=Math.min(j,R),A=R-T;b.style.height=T+"px",b.style.bottom==="0px"&&(y.scrollTop=A>0?A:0,b.style.justifyContent="flex-end")}}}p.current=y.scrollTop})})})]})});dx.displayName=Yf;var fx="SelectGroup",[Wj,Zj]=Gr(fx),Jj=x.forwardRef((o,a)=>{const{__scopeSelect:s,...i}=o,c=Xl();return l.jsx(Wj,{scope:s,id:c,children:l.jsx(Ve.div,{role:"group","aria-labelledby":c,...i,ref:a})})});Jj.displayName=fx;var mx="SelectLabel",hx=x.forwardRef((o,a)=>{const{__scopeSelect:s,...i}=o,c=Zj(mx,s);return l.jsx(Ve.div,{id:c.id,...i,ref:a})});hx.displayName=mx;var Bl="SelectItem",[eR,px]=Gr(Bl),gx=x.forwardRef((o,a)=>{const{__scopeSelect:s,value:i,disabled:c=!1,textValue:d,...m}=o,h=es(Bl,s),p=ts(Bl,s),g=h.value===i,[y,b]=x.useState(d??""),[N,E]=x.useState(!1),j=Ut(a,R=>p.itemRefCallback?.(R,i,c)),S=Xl(),_=x.useRef("touch"),L=()=>{c||(h.onValueChange(i),h.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(eR,{scope:s,value:i,disabled:c,textId:S,isSelected:g,onItemTextChange:x.useCallback(R=>{b(T=>T||(R?.textContent??"").trim())},[]),children:l.jsx(tc.ItemSlot,{scope:s,value:i,disabled:c,textValue:y,children:l.jsx(Ve.div,{role:"option","aria-labelledby":S,"data-highlighted":N?"":void 0,"aria-selected":g&&N,"data-state":g?"checked":"unchecked","aria-disabled":c||void 0,"data-disabled":c?"":void 0,tabIndex:c?void 0:-1,...m,ref:j,onFocus:Ge(m.onFocus,()=>E(!0)),onBlur:Ge(m.onBlur,()=>E(!1)),onClick:Ge(m.onClick,()=>{_.current!=="mouse"&&L()}),onPointerUp:Ge(m.onPointerUp,()=>{_.current==="mouse"&&L()}),onPointerDown:Ge(m.onPointerDown,R=>{_.current=R.pointerType}),onPointerMove:Ge(m.onPointerMove,R=>{_.current=R.pointerType,c?p.onItemLeave?.():_.current==="mouse"&&R.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ge(m.onPointerLeave,R=>{R.currentTarget===document.activeElement&&p.onItemLeave?.()}),onKeyDown:Ge(m.onKeyDown,R=>{p.searchRef?.current!==""&&R.key===" "||(Hj.includes(R.key)&&L(),R.key===" "&&R.preventDefault())})})})})});gx.displayName=Bl;var Ui="SelectItemText",bx=x.forwardRef((o,a)=>{const{__scopeSelect:s,className:i,style:c,...d}=o,m=es(Ui,s),h=ts(Ui,s),p=px(Ui,s),g=Bj(Ui,s),[y,b]=x.useState(null),N=Ut(a,L=>b(L),p.onItemTextChange,L=>h.itemTextRefCallback?.(L,p.value,p.disabled)),E=y?.textContent,j=x.useMemo(()=>l.jsx("option",{value:p.value,disabled:p.disabled,children:E},p.value),[p.disabled,p.value,E]),{onNativeOptionAdd:S,onNativeOptionRemove:_}=g;return Zn(()=>(S(j),()=>_(j)),[S,_,j]),l.jsxs(l.Fragment,{children:[l.jsx(Ve.span,{id:p.textId,...d,ref:N}),p.isSelected&&m.valueNode&&!m.valueNodeHasChildren?Zf.createPortal(d.children,m.valueNode):null]})});bx.displayName=Ui;var yx="SelectItemIndicator",vx=x.forwardRef((o,a)=>{const{__scopeSelect:s,...i}=o;return px(yx,s).isSelected?l.jsx(Ve.span,{"aria-hidden":!0,...i,ref:a}):null});vx.displayName=yx;var $f="SelectScrollUpButton",xx=x.forwardRef((o,a)=>{const s=ts($f,o.__scopeSelect),i=mm($f,o.__scopeSelect),[c,d]=x.useState(!1),m=Ut(a,i.onScrollButtonChange);return Zn(()=>{if(s.viewport&&s.isPositioned){let h=function(){const g=p.scrollTop>0;d(g)};const p=s.viewport;return h(),p.addEventListener("scroll",h),()=>p.removeEventListener("scroll",h)}},[s.viewport,s.isPositioned]),c?l.jsx(Nx,{...o,ref:m,onAutoScroll:()=>{const{viewport:h,selectedItem:p}=s;h&&p&&(h.scrollTop=h.scrollTop-p.offsetHeight)}}):null});xx.displayName=$f;var Ff="SelectScrollDownButton",Sx=x.forwardRef((o,a)=>{const s=ts(Ff,o.__scopeSelect),i=mm(Ff,o.__scopeSelect),[c,d]=x.useState(!1),m=Ut(a,i.onScrollButtonChange);return Zn(()=>{if(s.viewport&&s.isPositioned){let h=function(){const g=p.scrollHeight-p.clientHeight,y=Math.ceil(p.scrollTop)<g;d(y)};const p=s.viewport;return h(),p.addEventListener("scroll",h),()=>p.removeEventListener("scroll",h)}},[s.viewport,s.isPositioned]),c?l.jsx(Nx,{...o,ref:m,onAutoScroll:()=>{const{viewport:h,selectedItem:p}=s;h&&p&&(h.scrollTop=h.scrollTop+p.offsetHeight)}}):null});Sx.displayName=Ff;var Nx=x.forwardRef((o,a)=>{const{__scopeSelect:s,onAutoScroll:i,...c}=o,d=ts("SelectScrollButton",s),m=x.useRef(null),h=nc(s),p=x.useCallback(()=>{m.current!==null&&(window.clearInterval(m.current),m.current=null)},[]);return x.useEffect(()=>()=>p(),[p]),Zn(()=>{h().find(y=>y.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[h]),l.jsx(Ve.div,{"aria-hidden":!0,...c,ref:a,style:{flexShrink:0,...c.style},onPointerDown:Ge(c.onPointerDown,()=>{m.current===null&&(m.current=window.setInterval(i,50))}),onPointerMove:Ge(c.onPointerMove,()=>{d.onItemLeave?.(),m.current===null&&(m.current=window.setInterval(i,50))}),onPointerLeave:Ge(c.onPointerLeave,()=>{p()})})}),tR="SelectSeparator",Ex=x.forwardRef((o,a)=>{const{__scopeSelect:s,...i}=o;return l.jsx(Ve.div,{"aria-hidden":!0,...i,ref:a})});Ex.displayName=tR;var Xf="SelectArrow",nR=x.forwardRef((o,a)=>{const{__scopeSelect:s,...i}=o,c=ac(s),d=es(Xf,s),m=ts(Xf,s);return d.open&&m.position==="popper"?l.jsx(PE,{...c,...i,ref:a}):null});nR.displayName=Xf;var aR="SelectBubbleInput",wx=x.forwardRef(({__scopeSelect:o,value:a,...s},i)=>{const c=x.useRef(null),d=Ut(i,c),m=Uj(a);return x.useEffect(()=>{const h=c.current;if(!h)return;const p=window.HTMLSelectElement.prototype,y=Object.getOwnPropertyDescriptor(p,"value").set;if(m!==a&&y){const b=new Event("change",{bubbles:!0});y.call(h,a),h.dispatchEvent(b)}},[m,a]),l.jsx(Ve.select,{...s,style:{...Yy,...s.style},ref:d,defaultValue:a})});wx.displayName=aR;function Tx(o){return o===""||o===void 0}function jx(o){const a=An(o),s=x.useRef(""),i=x.useRef(0),c=x.useCallback(m=>{const h=s.current+m;a(h),(function p(g){s.current=g,window.clearTimeout(i.current),g!==""&&(i.current=window.setTimeout(()=>p(""),1e3))})(h)},[a]),d=x.useCallback(()=>{s.current="",window.clearTimeout(i.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(i.current),[]),[s,c,d]}function Rx(o,a,s){const c=a.length>1&&Array.from(a).every(g=>g===a[0])?a[0]:a,d=s?o.indexOf(s):-1;let m=sR(o,Math.max(d,0));c.length===1&&(m=m.filter(g=>g!==s));const p=m.find(g=>g.textValue.toLowerCase().startsWith(c.toLowerCase()));return p!==s?p:void 0}function sR(o,a){return o.map((s,i)=>o[(a+i)%o.length])}var rR=ex,Cx=nx,iR=sx,oR=rx,lR=ix,_x=ox,cR=dx,Ax=hx,Ox=gx,uR=bx,dR=vx,Dx=xx,Mx=Sx,Ix=Ex;const Rr=rR,Cr=iR,ws=x.forwardRef(({className:o,children:a,...s},i)=>l.jsxs(Cx,{ref:i,className:ye("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",o),...s,children:[a,l.jsx(oR,{asChild:!0,children:l.jsx(ky,{className:"h-4 w-4 opacity-50"})})]}));ws.displayName=Cx.displayName;const kx=x.forwardRef(({className:o,...a},s)=>l.jsx(Dx,{ref:s,className:ye("flex cursor-default items-center justify-center py-1",o),...a,children:l.jsx(sw,{className:"h-4 w-4"})}));kx.displayName=Dx.displayName;const Lx=x.forwardRef(({className:o,...a},s)=>l.jsx(Mx,{ref:s,className:ye("flex cursor-default items-center justify-center py-1",o),...a,children:l.jsx(ky,{className:"h-4 w-4"})}));Lx.displayName=Mx.displayName;const Ts=x.forwardRef(({className:o,children:a,position:s="popper",...i},c)=>l.jsx(lR,{children:l.jsxs(_x,{ref:c,className:ye("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:s,...i,children:[l.jsx(kx,{}),l.jsx(cR,{className:ye("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),l.jsx(Lx,{})]})}));Ts.displayName=_x.displayName;const fR=x.forwardRef(({className:o,...a},s)=>l.jsx(Ax,{ref:s,className:ye("py-1.5 pl-8 pr-2 text-sm font-semibold",o),...a}));fR.displayName=Ax.displayName;const js=x.forwardRef(({className:o,children:a,...s},i)=>l.jsxs(Ox,{ref:i,className:ye("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),...s,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(dR,{children:l.jsx(Ql,{className:"h-4 w-4"})})}),l.jsx(uR,{children:a})]}));js.displayName=Ox.displayName;const mR=x.forwardRef(({className:o,...a},s)=>l.jsx(Ix,{ref:s,className:ye("-mx-1 my-1 h-px bg-muted",o),...a}));mR.displayName=Ix.displayName;function hR(){const[o,a]=x.useState([]),[s,i]=x.useState([]),[c,d]=x.useState(!1),[m,h]=x.useState(!1),[p,g]=x.useState(""),[y,b]=x.useState(""),{toast:N}=Wa(),E=x.useRef(null),j=x.useCallback(async()=>{try{d(!0);const[T,A]=await Promise.all([Or.getSubjects(),Hf.getWords()]);i(T.subjects||[]);const D=A.words.map(Y=>({id:Y.id,text:Y.content,topicId:Y.subjectId,topicTitle:T.subjects.find(z=>z.id===Y.subjectId)?.name||"Unknown",createdAt:Y.createdAt}));a(D)}catch(T){console.error("Failed to load data:",T),N({title:"  ",description:"      ",variant:"destructive"})}finally{d(!1)}},[N]);x.useEffect(()=>{j()},[j]);const S=async()=>{if(!y.trim()){N({title:" ",description:" ",variant:"destructive"}),E.current?.focus();return}if(!p){N({title:" ",description:"    ",variant:"destructive"});return}const T=s.find(A=>A.id.toString()===p);if(!T){N({title:"  ",description:"    ",variant:"destructive"});return}try{console.log("Submitting answer:",{content:y.trim(),subjectId:T.id,subjectName:T.name}),await Hf.createWord({content:y.trim(),subjectId:T.id});const A=y.trim();b(""),E.current?.focus(),N({title:" ",description:`"${A}"  "${T.name}"  .   .`}),j()}catch(A){console.error("Answer submission error:",A);let D="    ";A instanceof Error&&(D=A.message),N({title:"  ",description:D,variant:"destructive"})}},_=T=>o.filter(A=>A.topicId===T).length,L=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),S())},R=T=>{h(T),T&&setTimeout(()=>E.current?.focus(),100)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[l.jsx(Ll,{className:"h-6 w-6"})," "]}),l.jsx("p",{className:"text-muted-foreground",children:"       "})]}),l.jsxs(Ka,{open:m,onOpenChange:R,children:[l.jsx(Vl,{asChild:!0,children:l.jsxs(ve,{children:[l.jsx(Vi,{className:"h-4 w-4 mr-2"}),"  "]})}),l.jsxs(ya,{children:[l.jsxs(va,{children:[l.jsx(xa,{children:"  "}),l.jsx(Sa,{children:"     (Enter  ).     ."})]}),l.jsxs("div",{className:"space-y-4",children:[s.length>0?l.jsxs("div",{children:[l.jsx($t,{children:" "}),l.jsxs(Rr,{value:p,onValueChange:g,children:[l.jsx(ws,{children:l.jsx(Cr,{placeholder:" "})}),l.jsx(Ts,{children:s.map(T=>l.jsxs(js,{value:T.id.toString(),children:[T.name," (",_(T.id),")"]},T.id))})]})]}):l.jsx("div",{className:"p-4 border rounded-md bg-muted",children:l.jsx("p",{className:"text-sm text-muted-foreground",children:"   .   ."})}),l.jsxs("div",{children:[l.jsx($t,{htmlFor:"answer",children:""}),l.jsx(Wn,{ref:E,id:"answer",placeholder:": , ,  ",value:y,onChange:T=>b(T.target.value),onKeyPress:L,autoFocus:!0})]}),l.jsxs("div",{className:"flex gap-2 justify-between",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:" Enter    "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ve,{variant:"outline",onClick:()=>h(!1),children:""}),l.jsx(ve,{onClick:S,disabled:!p||!y.trim()||s.length===0,children:""})]})]})]})]})]})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:c?l.jsx("div",{className:"col-span-full text-center py-8",children:l.jsx("p",{className:"text-muted-foreground",children:"  ..."})}):s.length===0?l.jsx("div",{className:"col-span-full",children:l.jsx(Ae,{children:l.jsxs(De,{className:"flex flex-col items-center justify-center py-12",children:[l.jsx(Ll,{className:"h-12 w-12 text-muted-foreground mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:" "}),l.jsx("p",{className:"text-muted-foreground text-center",children:"     "})]})})}):s.map(T=>l.jsx(Ae,{children:l.jsx(De,{className:"pt-6",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"font-semibold",children:T.name}),l.jsx("p",{className:"text-2xl font-bold text-primary",children:_(T.id)}),l.jsx("p",{className:"text-sm text-muted-foreground",children:" "})]})})},T.id))})]})}const pR=Wl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),We=x.forwardRef(({className:o,variant:a,...s},i)=>l.jsx("span",{ref:i,className:ye(pR({variant:a}),o),...s}));We.displayName="Badge";function gR(o,a){return x.useReducer((s,i)=>a[s][i]??s,o)}var hm="ScrollArea",[Ux]=Qi(hm),[bR,Dn]=Ux(hm),Gx=x.forwardRef((o,a)=>{const{__scopeScrollArea:s,type:i="hover",dir:c,scrollHideDelay:d=600,...m}=o,[h,p]=x.useState(null),[g,y]=x.useState(null),[b,N]=x.useState(null),[E,j]=x.useState(null),[S,_]=x.useState(null),[L,R]=x.useState(0),[T,A]=x.useState(0),[D,Y]=x.useState(!1),[z,I]=x.useState(!1),G=Ut(a,ae=>p(ae)),Q=Wf(c);return l.jsx(bR,{scope:s,type:i,dir:Q,scrollHideDelay:d,scrollArea:h,viewport:g,onViewportChange:y,content:b,onContentChange:N,scrollbarX:E,onScrollbarXChange:j,scrollbarXEnabled:D,onScrollbarXEnabledChange:Y,scrollbarY:S,onScrollbarYChange:_,scrollbarYEnabled:z,onScrollbarYEnabledChange:I,onCornerWidthChange:R,onCornerHeightChange:A,children:l.jsx(Ve.div,{dir:Q,...m,ref:G,style:{position:"relative","--radix-scroll-area-corner-width":L+"px","--radix-scroll-area-corner-height":T+"px",...o.style}})})});Gx.displayName=hm;var Hx="ScrollAreaViewport",zx=x.forwardRef((o,a)=>{const{__scopeScrollArea:s,children:i,nonce:c,...d}=o,m=Dn(Hx,s),h=x.useRef(null),p=Ut(a,h,m.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:c}),l.jsx(Ve.div,{"data-radix-scroll-area-viewport":"",...d,ref:p,style:{overflowX:m.scrollbarXEnabled?"scroll":"hidden",overflowY:m.scrollbarYEnabled?"scroll":"hidden",...o.style},children:l.jsx("div",{ref:m.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});zx.displayName=Hx;var ea="ScrollAreaScrollbar",pm=x.forwardRef((o,a)=>{const{forceMount:s,...i}=o,c=Dn(ea,o.__scopeScrollArea),{onScrollbarXEnabledChange:d,onScrollbarYEnabledChange:m}=c,h=o.orientation==="horizontal";return x.useEffect(()=>(h?d(!0):m(!0),()=>{h?d(!1):m(!1)}),[h,d,m]),c.type==="hover"?l.jsx(yR,{...i,ref:a,forceMount:s}):c.type==="scroll"?l.jsx(vR,{...i,ref:a,forceMount:s}):c.type==="auto"?l.jsx(Px,{...i,ref:a,forceMount:s}):c.type==="always"?l.jsx(gm,{...i,ref:a}):null});pm.displayName=ea;var yR=x.forwardRef((o,a)=>{const{forceMount:s,...i}=o,c=Dn(ea,o.__scopeScrollArea),[d,m]=x.useState(!1);return x.useEffect(()=>{const h=c.scrollArea;let p=0;if(h){const g=()=>{window.clearTimeout(p),m(!0)},y=()=>{p=window.setTimeout(()=>m(!1),c.scrollHideDelay)};return h.addEventListener("pointerenter",g),h.addEventListener("pointerleave",y),()=>{window.clearTimeout(p),h.removeEventListener("pointerenter",g),h.removeEventListener("pointerleave",y)}}},[c.scrollArea,c.scrollHideDelay]),l.jsx(Mr,{present:s||d,children:l.jsx(Px,{"data-state":d?"visible":"hidden",...i,ref:a})})}),vR=x.forwardRef((o,a)=>{const{forceMount:s,...i}=o,c=Dn(ea,o.__scopeScrollArea),d=o.orientation==="horizontal",m=rc(()=>p("SCROLL_END"),100),[h,p]=gR("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(h==="idle"){const g=window.setTimeout(()=>p("HIDE"),c.scrollHideDelay);return()=>window.clearTimeout(g)}},[h,c.scrollHideDelay,p]),x.useEffect(()=>{const g=c.viewport,y=d?"scrollLeft":"scrollTop";if(g){let b=g[y];const N=()=>{const E=g[y];b!==E&&(p("SCROLL"),m()),b=E};return g.addEventListener("scroll",N),()=>g.removeEventListener("scroll",N)}},[c.viewport,d,p,m]),l.jsx(Mr,{present:s||h!=="hidden",children:l.jsx(gm,{"data-state":h==="hidden"?"hidden":"visible",...i,ref:a,onPointerEnter:Ge(o.onPointerEnter,()=>p("POINTER_ENTER")),onPointerLeave:Ge(o.onPointerLeave,()=>p("POINTER_LEAVE"))})})}),Px=x.forwardRef((o,a)=>{const s=Dn(ea,o.__scopeScrollArea),{forceMount:i,...c}=o,[d,m]=x.useState(!1),h=o.orientation==="horizontal",p=rc(()=>{if(s.viewport){const g=s.viewport.offsetWidth<s.viewport.scrollWidth,y=s.viewport.offsetHeight<s.viewport.scrollHeight;m(h?g:y)}},10);return Dr(s.viewport,p),Dr(s.content,p),l.jsx(Mr,{present:i||d,children:l.jsx(gm,{"data-state":d?"visible":"hidden",...c,ref:a})})}),gm=x.forwardRef((o,a)=>{const{orientation:s="vertical",...i}=o,c=Dn(ea,o.__scopeScrollArea),d=x.useRef(null),m=x.useRef(0),[h,p]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),g=$x(h.viewport,h.content),y={...i,sizes:h,onSizesChange:p,hasThumb:g>0&&g<1,onThumbChange:N=>d.current=N,onThumbPointerUp:()=>m.current=0,onThumbPointerDown:N=>m.current=N};function b(N,E){return TR(N,m.current,h,E)}return s==="horizontal"?l.jsx(xR,{...y,ref:a,onThumbPositionChange:()=>{if(c.viewport&&d.current){const N=c.viewport.scrollLeft,E=Hb(N,h,c.dir);d.current.style.transform=`translate3d(${E}px, 0, 0)`}},onWheelScroll:N=>{c.viewport&&(c.viewport.scrollLeft=N)},onDragScroll:N=>{c.viewport&&(c.viewport.scrollLeft=b(N,c.dir))}}):s==="vertical"?l.jsx(SR,{...y,ref:a,onThumbPositionChange:()=>{if(c.viewport&&d.current){const N=c.viewport.scrollTop,E=Hb(N,h);d.current.style.transform=`translate3d(0, ${E}px, 0)`}},onWheelScroll:N=>{c.viewport&&(c.viewport.scrollTop=N)},onDragScroll:N=>{c.viewport&&(c.viewport.scrollTop=b(N))}}):null}),xR=x.forwardRef((o,a)=>{const{sizes:s,onSizesChange:i,...c}=o,d=Dn(ea,o.__scopeScrollArea),[m,h]=x.useState(),p=x.useRef(null),g=Ut(a,p,d.onScrollbarXChange);return x.useEffect(()=>{p.current&&h(getComputedStyle(p.current))},[p]),l.jsx(Bx,{"data-orientation":"horizontal",...c,ref:g,sizes:s,style:{bottom:0,left:d.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:d.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":sc(s)+"px",...o.style},onThumbPointerDown:y=>o.onThumbPointerDown(y.x),onDragScroll:y=>o.onDragScroll(y.x),onWheelScroll:(y,b)=>{if(d.viewport){const N=d.viewport.scrollLeft+y.deltaX;o.onWheelScroll(N),Xx(N,b)&&y.preventDefault()}},onResize:()=>{p.current&&d.viewport&&m&&i({content:d.viewport.scrollWidth,viewport:d.viewport.offsetWidth,scrollbar:{size:p.current.clientWidth,paddingStart:Yl(m.paddingLeft),paddingEnd:Yl(m.paddingRight)}})}})}),SR=x.forwardRef((o,a)=>{const{sizes:s,onSizesChange:i,...c}=o,d=Dn(ea,o.__scopeScrollArea),[m,h]=x.useState(),p=x.useRef(null),g=Ut(a,p,d.onScrollbarYChange);return x.useEffect(()=>{p.current&&h(getComputedStyle(p.current))},[p]),l.jsx(Bx,{"data-orientation":"vertical",...c,ref:g,sizes:s,style:{top:0,right:d.dir==="ltr"?0:void 0,left:d.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":sc(s)+"px",...o.style},onThumbPointerDown:y=>o.onThumbPointerDown(y.y),onDragScroll:y=>o.onDragScroll(y.y),onWheelScroll:(y,b)=>{if(d.viewport){const N=d.viewport.scrollTop+y.deltaY;o.onWheelScroll(N),Xx(N,b)&&y.preventDefault()}},onResize:()=>{p.current&&d.viewport&&m&&i({content:d.viewport.scrollHeight,viewport:d.viewport.offsetHeight,scrollbar:{size:p.current.clientHeight,paddingStart:Yl(m.paddingTop),paddingEnd:Yl(m.paddingBottom)}})}})}),[NR,Vx]=Ux(ea),Bx=x.forwardRef((o,a)=>{const{__scopeScrollArea:s,sizes:i,hasThumb:c,onThumbChange:d,onThumbPointerUp:m,onThumbPointerDown:h,onThumbPositionChange:p,onDragScroll:g,onWheelScroll:y,onResize:b,...N}=o,E=Dn(ea,s),[j,S]=x.useState(null),_=Ut(a,G=>S(G)),L=x.useRef(null),R=x.useRef(""),T=E.viewport,A=i.content-i.viewport,D=An(y),Y=An(p),z=rc(b,10);function I(G){if(L.current){const Q=G.clientX-L.current.left,ae=G.clientY-L.current.top;g({x:Q,y:ae})}}return x.useEffect(()=>{const G=Q=>{const ae=Q.target;j?.contains(ae)&&D(Q,A)};return document.addEventListener("wheel",G,{passive:!1}),()=>document.removeEventListener("wheel",G,{passive:!1})},[T,j,A,D]),x.useEffect(Y,[i,Y]),Dr(j,z),Dr(E.content,z),l.jsx(NR,{scope:s,scrollbar:j,hasThumb:c,onThumbChange:An(d),onThumbPointerUp:An(m),onThumbPositionChange:Y,onThumbPointerDown:An(h),children:l.jsx(Ve.div,{...N,ref:_,style:{position:"absolute",...N.style},onPointerDown:Ge(o.onPointerDown,G=>{G.button===0&&(G.target.setPointerCapture(G.pointerId),L.current=j.getBoundingClientRect(),R.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",E.viewport&&(E.viewport.style.scrollBehavior="auto"),I(G))}),onPointerMove:Ge(o.onPointerMove,I),onPointerUp:Ge(o.onPointerUp,G=>{const Q=G.target;Q.hasPointerCapture(G.pointerId)&&Q.releasePointerCapture(G.pointerId),document.body.style.webkitUserSelect=R.current,E.viewport&&(E.viewport.style.scrollBehavior=""),L.current=null})})})}),ql="ScrollAreaThumb",qx=x.forwardRef((o,a)=>{const{forceMount:s,...i}=o,c=Vx(ql,o.__scopeScrollArea);return l.jsx(Mr,{present:s||c.hasThumb,children:l.jsx(ER,{ref:a,...i})})}),ER=x.forwardRef((o,a)=>{const{__scopeScrollArea:s,style:i,...c}=o,d=Dn(ql,s),m=Vx(ql,s),{onThumbPositionChange:h}=m,p=Ut(a,b=>m.onThumbChange(b)),g=x.useRef(void 0),y=rc(()=>{g.current&&(g.current(),g.current=void 0)},100);return x.useEffect(()=>{const b=d.viewport;if(b){const N=()=>{if(y(),!g.current){const E=jR(b,h);g.current=E,h()}};return h(),b.addEventListener("scroll",N),()=>b.removeEventListener("scroll",N)}},[d.viewport,y,h]),l.jsx(Ve.div,{"data-state":m.hasThumb?"visible":"hidden",...c,ref:p,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:Ge(o.onPointerDownCapture,b=>{const E=b.target.getBoundingClientRect(),j=b.clientX-E.left,S=b.clientY-E.top;m.onThumbPointerDown({x:j,y:S})}),onPointerUp:Ge(o.onPointerUp,m.onThumbPointerUp)})});qx.displayName=ql;var bm="ScrollAreaCorner",Yx=x.forwardRef((o,a)=>{const s=Dn(bm,o.__scopeScrollArea),i=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&i?l.jsx(wR,{...o,ref:a}):null});Yx.displayName=bm;var wR=x.forwardRef((o,a)=>{const{__scopeScrollArea:s,...i}=o,c=Dn(bm,s),[d,m]=x.useState(0),[h,p]=x.useState(0),g=!!(d&&h);return Dr(c.scrollbarX,()=>{const y=c.scrollbarX?.offsetHeight||0;c.onCornerHeightChange(y),p(y)}),Dr(c.scrollbarY,()=>{const y=c.scrollbarY?.offsetWidth||0;c.onCornerWidthChange(y),m(y)}),g?l.jsx(Ve.div,{...i,ref:a,style:{width:d,height:h,position:"absolute",right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:0,...o.style}}):null});function Yl(o){return o?parseInt(o,10):0}function $x(o,a){const s=o/a;return isNaN(s)?0:s}function sc(o){const a=$x(o.viewport,o.content),s=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,i=(o.scrollbar.size-s)*a;return Math.max(i,18)}function TR(o,a,s,i="ltr"){const c=sc(s),d=c/2,m=a||d,h=c-m,p=s.scrollbar.paddingStart+m,g=s.scrollbar.size-s.scrollbar.paddingEnd-h,y=s.content-s.viewport,b=i==="ltr"?[0,y]:[y*-1,0];return Fx([p,g],b)(o)}function Hb(o,a,s="ltr"){const i=sc(a),c=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,d=a.scrollbar.size-c,m=a.content-a.viewport,h=d-i,p=s==="ltr"?[0,m]:[m*-1,0],g=Bf(o,p);return Fx([0,m],[0,h])(g)}function Fx(o,a){return s=>{if(o[0]===o[1]||a[0]===a[1])return a[0];const i=(a[1]-a[0])/(o[1]-o[0]);return a[0]+i*(s-o[0])}}function Xx(o,a){return o>0&&o<a}var jR=(o,a=()=>{})=>{let s={left:o.scrollLeft,top:o.scrollTop},i=0;return(function c(){const d={left:o.scrollLeft,top:o.scrollTop},m=s.left!==d.left,h=s.top!==d.top;(m||h)&&a(),s=d,i=window.requestAnimationFrame(c)})(),()=>window.cancelAnimationFrame(i)};function rc(o,a){const s=An(o),i=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(i.current),[]),x.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(s,a)},[s,a])}function Dr(o,a){const s=An(a);Zn(()=>{let i=0;if(o){const c=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(s)});return c.observe(o),()=>{window.cancelAnimationFrame(i),c.unobserve(o)}}},[o,s])}var Qx=Gx,RR=zx,CR=Yx;const Ar=x.forwardRef(({className:o,children:a,...s},i)=>l.jsxs(Qx,{ref:i,className:ye("relative overflow-hidden",o),...s,children:[l.jsx(RR,{className:"h-full w-full rounded-[inherit]",children:a}),l.jsx(Kx,{}),l.jsx(CR,{})]}));Ar.displayName=Qx.displayName;const Kx=x.forwardRef(({className:o,orientation:a="vertical",...s},i)=>l.jsx(pm,{ref:i,orientation:a,className:ye("flex touch-none select-none transition-colors",a==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",a==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",o),...s,children:l.jsx(qx,{className:"relative flex-1 rounded-full bg-border"})}));Kx.displayName=pm.displayName;const Wx=x.createContext(void 0);function _R({children:o}){const[a,s]=x.useState(new Set),i=x.useCallback(p=>{s(g=>{if(g.has(p))return console.warn(`[ModalProvider] Modal ${p} already registered`),g;const y=new Set(g);return y.add(p),console.log(`[ModalProvider]  Modal registered: ${p}`,{modalId:p,activeCount:y.size,allActiveModals:Array.from(y),timestamp:new Date().toISOString(),stack:new Error().stack?.split(`
`).slice(2,5).join(`
`)}),y.size===1&&console.log("[ModalProvider]  Navigation prevention ACTIVATED"),y})},[]),c=x.useCallback(p=>{s(g=>{if(!g.has(p))return console.warn(`[ModalProvider] Attempted to unregister non-existent modal: ${p}`),g;const y=new Set(g);return y.delete(p),console.log(`[ModalProvider]  Modal unregistered: ${p}`,{modalId:p,activeCount:y.size,remainingModals:Array.from(y),timestamp:new Date().toISOString()}),y.size===0&&console.log("[ModalProvider]  Navigation prevention DEACTIVATED"),y})},[]),d=a.size>0,h={activeModals:a,isAnyModalOpen:d,registerModal:i,unregisterModal:c,preventNavigation:d};return l.jsx(Wx.Provider,{value:h,children:o})}function ym(){const o=x.useContext(Wx);if(o===void 0)throw new Error("useModal must be used within a ModalProvider");return o}function zb(o,a){const{registerModal:s,unregisterModal:i}=ym();x.useEffect(()=>{if(a)return s(o),()=>i(o)},[a,o,s,i])}const AR=["DISCUSSION","HINT","DEFENSE","SYSTEM","POST_ROUND","WAITING_ROOM","GENERAL"],OR=o=>{if(typeof o=="string"){const a=o.trim().toUpperCase();if(AR.includes(a))return a;if(a==="ANNOUNCEMENT"||a==="NOTICE")return"SYSTEM"}return"DISCUSSION"},jf=o=>{if(typeof o=="number"&&Number.isFinite(o))return o;if(typeof o=="string"){const a=Number.parseInt(o,10);if(!Number.isNaN(a))return a}return null},wr=o=>{if(typeof o=="string"){const a=o.trim();return a.length>0?a:null}return typeof o=="number"&&Number.isFinite(o)?o.toString():null},DR=(o,a)=>{for(const s of a){if(s==null)continue;const i=typeof s=="number"?s.toString():s,c=o.find(d=>d.id===i||d.userId!=null&&d.userId.toString()===i||d.nickname===i);if(c)return c}},Pb=(o,a,s)=>{const i=o,c=OR(i.type??i.messageType??i.category),d=jf(i.timestamp??i.createdAt??i.time)??Date.now(),h=jf(i.gameNumber??i.gameId??i.roomId)??s??0,p=jf(i.userId??i.playerUserId??i.senderUserId)??void 0,g=wr(i.playerId??i.playerID??i.playerUuid??i.senderId),y=wr(i.playerNickname??i.playerNicknameSnapshot??i.playerName??i.nickname),b=wr(i.content??i.message??i.body??"")??"",N=g??(typeof p=="number"?p.toString():c),E=wr(i.id??i.messageId??i.eventId??i.uuid)??`${h}-${d}-${N}`,j=DR(a,[g,y,p]),S=j?.id??g??(typeof p=="number"?p.toString():void 0),_=j?.nickname??y??(c==="SYSTEM"?"SYSTEM":` ${S??(typeof p=="number"?p:"?")}`);return{id:E.toString(),gameNumber:h,playerId:S??void 0,userId:p,playerNickname:_,nickname:_,playerName:j?.nickname??y??void 0,content:b,message:b,gameId:wr(i.gameId)??(h?h.toString():void 0),roomId:wr(i.roomId??i.channelId??i.topic)??void 0,timestamp:d,type:c}},Nl=(o,a)=>{if(!a.length)return o;const s=new Map;for(const i of o)s.set(i.id,i);for(const i of a)s.set(i.id,i);return Array.from(s.values()).sort((i,c)=>i.timestamp-c.timestamp).slice(-200)},El=o=>{const a="WAITING_FOR_PLAYERS";if(!o)return a;switch(o){case"WAITING":return"WAITING_FOR_PLAYERS";case"IN_PROGRESS":return"SPEECH";case"ENDED":return"GAME_OVER"}return["WAITING_FOR_PLAYERS","SPEECH","VOTING_FOR_LIAR","DEFENDING","VOTING_FOR_SURVIVAL","GUESSING_WORD","GAME_OVER"].includes(o)?o:a},Vb={waiting:0,speech:1,debate:2,vote:3,results:4},Bb=o=>{switch(o){case"SPEECH":return"speech";case"DEFENDING":return"debate";case"VOTING_FOR_LIAR":case"VOTING_FOR_SURVIVAL":return"vote";case"GUESSING_WORD":case"GAME_OVER":return"results";case"WAITING_FOR_PLAYERS":default:return"waiting"}},qb=()=>{const{userId:o,nickname:a}=zn.getState();return{userId:o!=null?String(o):null,nickname:a??null}},Hi=o=>{if(o==null)return null;if(typeof o=="string")return o;if(typeof o=="number"&&Number.isFinite(o))return o.toString();if(typeof o=="object"){const a=o;if(a.id!=null){const s=Hi(a.id);if(s)return s}if(a.userId!=null){const s=Hi(a.userId);if(s)return s}if(a.nickname!=null){const s=Hi(a.nickname);if(s)return s}}return null},Rf=(...o)=>{for(const a of o){const s=Hi(a);if(s)return s}return null},Qf=(o,a)=>o.find(s=>!!(a.userId&&s.userId!=null&&String(s.userId)===a.userId||a.nickname&&s.nickname===a.nickname)),MR=(o,a,s)=>{const i=Hi(o);if(!i)return!1;if(s.userId&&i===s.userId||s.nickname&&i===s.nickname)return!0;const c=Qf(a,s);return c?c.id===i||c.userId!=null&&String(c.userId)===i||c.nickname===i:!1},Yb={gameId:null,gameNumber:null,sessionCode:null,players:[],currentPlayer:null,maxPlayers:6,timeLimit:120,currentRound:0,totalRounds:3,gameMode:null,gamePhase:"WAITING_FOR_PLAYERS",currentTurnPlayerId:void 0,turnOrder:[],currentTopic:null,currentWord:null,currentLiar:null,isLiar:!1,hints:[],votes:[],defenses:[],userVote:null,gameResults:null,scores:{},timer:{isActive:!1,timeRemaining:0,totalTime:0,phase:""},voting:{isActive:!1,phase:null,votes:{},results:void 0},chatMessages:[],chatLoading:!1,chatError:null,typingPlayers:new Set,isConnected:!1,connectionError:null,reconnectAttempts:0,isLoading:!1,error:null,roundStage:"waiting",roundStageEnteredAt:null,roundHasStarted:!1,roundSummaries:[],currentRoundSummary:null,gameList:[],gameListLoading:!1,gameListError:null,availableGameModes:[],currentGameState:null},mt=Za()(kr(om((o,a)=>({...Yb,setGameId:s=>o({gameId:s}),setGameNumber:s=>o({gameNumber:s}),setSessionCode:s=>o({sessionCode:s}),setCurrentPlayer:s=>o({currentPlayer:s}),updatePlayers:s=>o({players:s}),addPlayer:s=>o(i=>{const c=i.players.findIndex(d=>!!(d.id===s.id||d.userId!=null&&s.userId!=null&&d.userId===s.userId||d.nickname&&s.nickname&&d.nickname===s.nickname));if(c>=0){const d=[...i.players];return d[c]={...d[c],...s},{players:d}}return{players:[...i.players,s]}}),removePlayer:s=>o(i=>({players:i.players.filter(c=>c.id!==s)})),updatePlayer:(s,i)=>o(c=>{const d=c.players.map(h=>h.id===s?{...h,...i}:h),m=c.currentPlayer?.id===s?{...c.currentPlayer,...i}:c.currentPlayer;return{players:d,currentPlayer:m}}),setGamePhase:s=>{o({gamePhase:s});const i=Bb(s);a().setRoundStage(i)},setGameMode:s=>o({gameMode:s}),setCurrentTopic:s=>o({currentTopic:s}),setCurrentWord:s=>o({currentWord:s}),setCurrentLiar:s=>o({currentLiar:s}),setIsLiar:s=>o({isLiar:s}),setCurrentTurnPlayer:s=>o({currentTurnPlayerId:s}),setTurnOrder:s=>o({turnOrder:s}),addHint:(s,i,c)=>o(d=>({hints:[...d.hints,{playerId:s,playerName:i,hint:c,timestamp:Date.now()}]})),addVote:(s,i,c,d)=>o(m=>({votes:[...m.votes,{voterId:s,voterName:i,targetId:c,targetName:d}]})),addDefense:(s,i,c)=>o(d=>({defenses:[...d.defenses,{defenderId:s,defenderName:i,defense:c,timestamp:Date.now()}]})),setUserVote:s=>o({userVote:s}),setGameResults:s=>o({gameResults:s}),setScore:(s,i)=>o(c=>({scores:{...c.scores,[s]:i}})),addScore:(s,i)=>{const c=a().scores[s]??0;o(d=>({scores:{...d.scores,[s]:c+i}}))},resetScores:()=>o({scores:{}}),updateTimer:s=>o(i=>({timer:{...i.timer,...s}})),startTimer:(s,i)=>o({timer:{isActive:!0,timeRemaining:s,totalTime:s,phase:i}}),stopTimer:()=>o(s=>({timer:{...s.timer,isActive:!1}})),startVoting:(s,i)=>o({voting:{isActive:!0,phase:s,votes:{},targetPlayerId:i,results:void 0}}),stopVoting:()=>o(s=>({voting:{...s.voting,isActive:!1}})),castVote:(s,i)=>o(c=>({voting:{...c.voting,votes:{...c.voting.votes,[s]:i}}})),setVotingResults:s=>o(i=>({voting:{...i.voting,results:s}})),addChatMessage:s=>o(i=>({chatMessages:Nl(i.chatMessages,[s])})),setChatMessages:s=>o({chatMessages:Nl([],s)}),ingestChatMessage:s=>{const{players:i,gameNumber:c}=a(),d=Pb(s,i,c);o(m=>({chatMessages:Nl(m.chatMessages,[d])}))},loadChatHistory:async(s=50)=>{const{gameNumber:i}=a();if(!i)return[];o({chatLoading:!0,chatError:null});try{const{gameFlowService:c}=await _r(async()=>{const{gameFlowService:p}=await Promise.resolve().then(()=>uj);return{gameFlowService:p}},void 0),d=await c.getChatHistory(i,s),m=a().players,h=d.map(p=>Pb(p,m,i));return o({chatMessages:Nl([],h),chatLoading:!1,chatError:null}),h}catch(c){const d=c instanceof Error?c.message:"Failed to load chat history";throw o({chatLoading:!1,chatError:d}),c}},sendChatMessage:async(s,i="DISCUSSION")=>{const c=(s??"").trim();if(!c)return;const{gameNumber:d,currentPlayer:m}=a();if(!d)throw new Error("  .");try{const h=m?.nickname??zn.getState().nickname??void 0,{websocketService:p}=await _r(async()=>{const{websocketService:g}=await Promise.resolve().then(()=>Cl);return{websocketService:g}},void 0);p.sendChatMessage(d.toString(),c,{nickname:h,type:i})}catch(h){throw console.error("Failed to send chat message:",h),h}},clearChat:()=>o({chatMessages:[],chatLoading:!1,chatError:null}),addTypingPlayer:s=>o(i=>({typingPlayers:new Set([...i.typingPlayers,s])})),removeTypingPlayer:s=>o(i=>{const c=new Set(i.typingPlayers);return c.delete(s),{typingPlayers:c}}),clearTypingPlayers:()=>o({typingPlayers:new Set}),setConnectionState:s=>o({isConnected:s}),setConnectionError:s=>o({connectionError:s}),setReconnectAttempts:s=>o({reconnectAttempts:s}),connectWebSocket:async()=>{o({isConnected:!1,connectionError:null});try{const{websocketService:s}=await _r(async()=>{const{websocketService:i}=await Promise.resolve().then(()=>Cl);return{websocketService:i}},void 0);await s.connect(),o({isConnected:!0})}catch(s){const i=s instanceof Error?s.message:"Connection failed";throw o({connectionError:i}),s}},disconnectWebSocket:async()=>{try{const{websocketService:s}=await _r(async()=>{const{websocketService:i}=await Promise.resolve().then(()=>Cl);return{websocketService:i}},void 0);s.disconnect()}catch(s){console.error("Error disconnecting WebSocket:",s)}finally{o({isConnected:!1})}},setLoading:s=>o({isLoading:s}),setError:s=>o({error:s}),fetchGameList:async(s=0,i=10)=>{o({gameListLoading:!0,gameListError:null});try{const c=await Zt.getGameList(s,i),d=c.gameRooms||c.games||c.data||[];o({gameList:d,gameListLoading:!1})}catch(c){const d=c instanceof Error?c.message:"Failed to fetch game list";o({gameListLoading:!1,gameListError:d})}},setGameList:s=>o({gameList:s}),setGameListLoading:s=>o({gameListLoading:s}),setGameListError:s=>o({gameListError:s}),fetchGameModes:async()=>{try{const s=await Zt.getAvailableGameModes();o({availableGameModes:s})}catch(s){console.error("Failed to fetch game modes:",s)}},setAvailableGameModes:s=>o({availableGameModes:s}),createGame:async s=>{o({isLoading:!0,error:null});try{const i=await Zt.createGame(s),c=await Zt.getGameState(i);return o({isLoading:!1,currentGameState:c,gameNumber:c.gameNumber,gameId:c.gameNumber.toString()}),a().updateFromGameState(c),c}catch(i){const c=i instanceof Error?i.message:"Failed to create game";throw o({isLoading:!1,error:c}),i}},joinGame:async s=>{o({isLoading:!0,error:null});try{const i={gameNumber:s.gameNumber,gamePassword:s.gamePassword??s.password??void 0,nickname:s.nickname},c=await Zt.joinGame(i);return o({isLoading:!1,currentGameState:c,gameNumber:c.gameNumber,gameId:c.gameNumber.toString()}),a().updateFromGameState(c),c}catch(i){const c=i instanceof Error?i.message:"Failed to join game";throw o({isLoading:!1,error:c}),i}},leaveGame:async()=>{const{gameNumber:s}=a();if(s){o({isLoading:!0,error:null});try{await Zt.leaveGame(s),o({isLoading:!1}),a().resetGame()}catch(i){const c=i instanceof Error?i.message:"Failed to leave game";throw o({isLoading:!1,error:c}),i}}},startGame:async()=>{const{gameNumber:s}=a();if(s){o({isLoading:!0,error:null});try{const i=await Zt.startGame();o({isLoading:!1,currentGameState:i}),a().updateFromGameState(i)}catch(i){const c=i instanceof Error?i.message:"Failed to start game";throw o({isLoading:!1,error:c}),i}}},toggleReady:async()=>{const{gameNumber:s}=a();if(s){o({isLoading:!0,error:null});try{const i=await Zt.toggleReady(s);o({isLoading:!1});const c=String(i.playerId);a().handlePlayerReady(c,i.isReady)}catch(i){const c=i instanceof Error?i.message:"Failed to toggle ready state";throw o({isLoading:!1,error:c}),i}}},refreshGameState:async()=>{const{gameNumber:s}=a();if(s)try{const i=await Zt.getGameState(s);o({currentGameState:i}),a().updateFromGameState(i)}catch(i){console.error("Failed to refresh game state:",i)}},setCurrentGameState:s=>o({currentGameState:s}),updateFromGameState:s=>{if(!s)return;const i=new Map((s.scoreboard??[]).map(D=>[D.userId,D.score])),c=a().players,d=s.gameState==="WAITING",m=qb(),h=s.yourRole==="LIAR"||s.yourRole==="CITIZEN"?s.yourRole:void 0,p=s.players.map(D=>{const Y=i.get(D.userId)??i.get(D.id)??0,z=D.state==="DISCONNECTED",I=!!D.isOnline,G=D.id.toString(),Q=c.find(oe=>oe.id===G||oe.userId!=null&&oe.userId===D.userId||oe.nickname===D.nickname),ae=d?Q?.isReady??!1:!1,le=m.userId!=null&&m.userId===String(D.userId)||m.nickname!=null&&m.nickname===D.nickname,K=Q?.role,se=le?h??K:K==="LIAR"||K==="CITIZEN"?K:void 0;return{id:G,userId:D.userId,nickname:D.nickname,isAlive:D.isAlive,state:D.state,hint:D.hint,defense:D.defense,votesReceived:D.votesReceived,hasVoted:D.hasVoted,score:Y,isHost:D.nickname===s.gameOwner,isReady:ae,isConnected:I&&!z,isOnline:I,role:se,votedFor:Q?.votedFor,lastActive:Q?.lastActive??Date.now()}}),g=p.reduce((D,Y)=>(D[Y.id]=Y.score,D),{}),y=(s.turnOrder??[]).map(D=>D.toString()),b=typeof s.currentTurnIndex=="number"?s.currentTurnIndex:void 0,N=b!=null?y[b]:void 0,E=N!=null?p.find(D=>D.id===N||D.userId.toString()===N||D.nickname===N)??null:null,j=El(s.currentPhase),S=Qf(p,m),_=S??E,L=s.yourRole==="LIAR",T=L?Rf(S?.id,S?.userId,S?.nickname,m.userId,m.nickname):j==="GAME_OVER"?Rf(s.accusedPlayer):null,A=L?null:s.yourWord??null;if(o({gamePhase:j,players:p,currentPlayer:_,currentTurnPlayerId:N,turnOrder:y,currentRound:s.gameCurrentRound,totalRounds:s.gameTotalRounds,maxPlayers:s.gameParticipants,gameNumber:s.gameNumber,gameId:s.gameNumber.toString(),scores:g,currentTopic:s.citizenSubject??null,currentWord:A,currentLiar:T??null,isLiar:L}),a().setRoundStage(Bb(j)),s.phaseEndTime){const D=new Date(s.phaseEndTime).getTime(),Y=Date.now(),z=Math.max(0,Math.floor((D-Y)/1e3));o(I=>({timer:{...I.timer,timeRemaining:z}}))}},handleGameEvent:s=>{const i=a(),c=m=>{if(m==null)return null;const h=String(m);return a().players.find(y=>y.id===h||y.userId!=null&&String(y.userId)===h||y.nickname===h)?.id??null},d=(m,h)=>{const p=c(m);p&&a().updatePlayer(p,h)};switch(s.type){case"PLAYER_JOINED":{const{payload:m}=s,h=m.playerId??m.userId??m.nickname??"",p=String(h),g=typeof m.userId=="number"?m.userId:Number.parseInt(String(m.userId??h??0),10)||0,y=m.playerName??m.nickname??"Player "+p,b=m.role==="CITIZEN"||m.role==="LIAR"?m.role:void 0,N={id:p,userId:g,nickname:y,isAlive:!0,state:"WAITING_FOR_HINT",votesReceived:0,hasVoted:!1,score:0,isHost:!!m.isHost,isReady:!!m.isReady,isConnected:!0,isOnline:!0,role:b,votedFor:void 0,lastActive:Date.now()};a().addPlayer(N);break}case"PLAYER_LEFT":{const{playerId:m}=s.payload;m!=null&&a().removePlayer(String(m));break}case"PLAYER_DISCONNECTED":{const m=s.payload,h=m?.userId??m?.playerId??m?.nickname??m?.playerName;d(h,{isConnected:!1,isOnline:!1,lastActive:Date.now()});break}case"PLAYER_RECONNECTED":{const m=s.payload,h=m?.userId??m?.playerId??m?.nickname??m?.playerName;d(h,{isConnected:!0,isOnline:!0,lastActive:Date.now()});break}case"GRACE_PERIOD_STARTED":{const m=s.payload,h=m?.userId??m?.playerId??m?.nickname??m?.playerName;d(h,{isConnected:!1,isOnline:!1,lastActive:Date.now()});break}case"GRACE_PERIOD_EXPIRED":{const m=s.payload,h=m?.userId??m?.playerId??m?.nickname??m?.playerName;d(h,{isConnected:!1,isOnline:!1,lastActive:Date.now()});break}case"PLAYER_READY_CHANGED":case"PLAYER_READY_UPDATE":{const m=s.payload,h=m?.userId??m?.playerId??m?.nickname??m?.playerName;d(h,{isReady:!!m?.isReady,lastActive:Date.now()});break}case"OWNER_KICKED_AND_TRANSFERRED":{const m=s.payload,h=m?.kickedOwner??m?.kickedPlayer??m?.previousOwner,p=m?.newOwner??m?.nextOwner??m?.newHost;h&&d(h,{isHost:!1}),p&&d(p,{isHost:!0});break}case"GAME_STARTED":o({gamePhase:"SPEECH",currentRound:s.payload.currentRound??i.currentRound});break;case"ROUND_STARTED":{const{category:m,word:h,liarId:p,timeLimit:g}=s.payload,y=qb(),b=Qf(i.players,y),N=i.isLiar||MR(p,i.players,y),E=N?null:h??i.currentWord,j=N?Rf(p,b?.id,b?.userId,b?.nickname,y.userId,y.nickname):null;o({currentTopic:m??i.currentTopic,currentWord:E,isLiar:N,currentLiar:j??null,hints:[],votes:[],defenses:[],roundHasStarted:!0,currentRoundSummary:null}),a().setRoundStage("speech",{force:!0}),typeof g=="number"&&g>0&&a().startTimer(g,"SPEECH");break}case"HINT_PROVIDED":case"HINT_SUBMITTED":{const{playerId:m,playerName:h,hint:p}=s.payload,g=String(m??"unknown");a().addHint(g,h??"",p??"");break}case"VOTE_CAST":{const{voterId:m,voterName:h,targetId:p,targetName:g}=s.payload;a().addVote(String(m??"unknown"),h??"",String(p??"unknown"),g??"");break}case"DEFENSE_SUBMITTED":{const{defenderId:m,defenderName:h,defense:p,playerId:g,playerName:y}=s.payload,b=m??g??"unknown",N=h??y??"";a().addDefense(String(b),N,p??"");break}case"ROUND_ENDED":{a().setGamePhase("GAME_OVER");const m=s.payload.scores??s.payload.finalScores;if(Array.isArray(m)&&m.length>0){const h={},p=[];m.forEach(g=>{const y=String(g.playerId);h[y]=g.score;const b=i.players.find(N=>N.id===y||String(N.userId)===y);p.push({playerId:y,nickname:b?.nickname??"",score:g.score,isAlive:b?.isAlive!==!1})}),o({scores:h}),a().addRoundSummary({round:i.currentRound,topic:i.currentTopic,suspectedPlayerId:i.voting.targetPlayerId??void 0,scoreboard:p.sort((g,y)=>y.score-g.score),winningTeam:"UNKNOWN",concludedAt:Date.now()})}else a().addRoundSummary({round:i.currentRound,topic:i.currentTopic,suspectedPlayerId:i.voting.targetPlayerId??void 0,scoreboard:i.players.map(h=>({playerId:h.id,nickname:h.nickname,score:i.scores[h.id]??h.score??0,isAlive:h.isAlive!==!1})).sort((h,p)=>p.score-h.score),winningTeam:"UNKNOWN",concludedAt:Date.now()});a().setRoundStage("results",{force:!0});break}case"PHASE_CHANGED":{const{phase:m}=s.payload;m&&a().setGamePhase(El(m));break}case"TIMER_UPDATE":if(o(m=>({timer:{...m.timer,timeRemaining:s.payload.timeRemaining,phase:s.payload.phase?String(s.payload.phase):m.timer.phase}})),s.payload.phase){const m=El(s.payload.phase);m!==a().gamePhase&&a().setGamePhase(m)}break;case"GAME_STATE_UPDATED":s.payload.gameState?a().updateFromGameState(s.payload.gameState):s.payload.state&&a().setGamePhase(El(s.payload.state)),s.payload.timeRemaining!==void 0&&o(m=>({timer:{...m.timer,timeRemaining:s.payload.timeRemaining??m.timer.timeRemaining}}));break;case"GAME_ENDED":{const m=s.payload.scores;if(Array.isArray(m)&&m.length>0){const h={};m.forEach(p=>{h[String(p.playerId)]=p.score}),o({scores:h})}a().setGamePhase("GAME_OVER"),a().setRoundStage("results",{force:!0});break}}},handleChatMessage:s=>{a().ingestChatMessage(s)},handlePlayerJoined:s=>{a().addPlayer(s)},handlePlayerLeft:s=>{a().removePlayer(s)},handlePlayerReady:(s,i)=>{a().updatePlayer(s,{isReady:i})},handlePhaseChange:s=>{a().setGamePhase(s)},handleTimerUpdate:s=>{o(i=>({timer:{...i.timer,timeRemaining:s}}))},handleVoteUpdate:s=>{o(i=>({voting:{...i.voting,votes:s}}))},setRoundStage:(s,i)=>{const{force:c=!1}=i??{},d=a().roundStage,m=Vb[d]??0,h=Vb[s]??0;!c&&h<m&&s!=="waiting"||o({roundStage:s,roundStageEnteredAt:Date.now(),roundHasStarted:s!=="waiting"})},addRoundSummary:s=>{o(i=>{const c=[s,...i.roundSummaries];return{currentRoundSummary:s,roundSummaries:c.slice(0,5)}})},clearRoundSummaries:()=>o({roundSummaries:[],currentRoundSummary:null}),resetGame:()=>o({...Yb,typingPlayers:new Set}),resetVote:()=>o({userVote:null}),resetGameData:()=>o({hints:[],votes:[],defenses:[],currentTopic:null,currentWord:null,currentLiar:null,isLiar:!1,chatMessages:[],chatLoading:!1,chatError:null,scores:{}})}),{name:"unified-game-store",partialize:o=>({gameId:o.gameId,gameNumber:o.gameNumber,sessionCode:o.sessionCode,maxPlayers:o.maxPlayers,timeLimit:o.timeLimit,totalRounds:o.totalRounds,gameMode:o.gameMode})}),{name:"unified-game-store"})),IR=Object.freeze(Object.defineProperty({__proto__:null,useGameStore:mt},Symbol.toStringTag,{value:"Module"})),kR={currentScreen:"HOME",previousScreen:void 0,modalStack:[],isLoading:!1,loadingMessage:void 0,errors:{},notifications:[],sidebarOpen:!1,chatOpen:!1,settingsOpen:!1,formData:{},formErrors:{},unreadChat:0,lastChatMessage:void 0},$b=()=>globalThis.crypto?.randomUUID?.()||Math.random().toString(36).slice(2);Za()(kr(om(o=>({...kR,navigate:a=>o(s=>({previousScreen:s.currentScreen,currentScreen:a})),showModal:a=>{const s=$b(),i={id:s,...a};return o(c=>({modalStack:[...c.modalStack,i]})),s},hideModal:a=>o(s=>({modalStack:a?s.modalStack.filter(i=>i.id!==a):s.modalStack.slice(0,-1)})),setLoading:(a,s)=>o({isLoading:a,loadingMessage:s}),addError:(a,s)=>o(i=>({errors:{...i.errors,[a]:s}})),clearErrors:()=>o({errors:{}}),showNotification:a=>{const s=$b(),i={id:s,createdAt:Date.now(),autoClose:5e3,...a};return o(c=>({notifications:[...c.notifications,i]})),s},removeNotification:a=>o(s=>({notifications:s.notifications.filter(i=>i.id!==a)})),toggleSidebar:a=>o(s=>({sidebarOpen:a??!s.sidebarOpen})),toggleChat:a=>o(s=>({chatOpen:a??!s.chatOpen,unreadChat:a?0:s.unreadChat})),toggleSettings:a=>o(s=>({settingsOpen:a??!s.settingsOpen})),setFormData:a=>o({formData:a}),updateFormField:(a,s)=>o(i=>({formData:{...i.formData,[a]:s}})),setFormErrors:a=>o({formErrors:a}),clearForm:()=>o({formData:{},formErrors:{}}),registerChatMessage:a=>o(s=>({lastChatMessage:a,unreadChat:s.chatOpen?s.unreadChat:s.unreadChat+1})),clearUnreadChat:()=>o({unreadChat:0})}),{name:"ui-store",partialize:o=>({currentScreen:o.currentScreen,sidebarOpen:o.sidebarOpen})})));const Ns=(o,a)=>{if(!o.success)throw new Error(o.error?.message??a)},ba=(o,a)=>{if(Ns(o,a),o.data===void 0)throw new Error(a);return o.data},Fb={isAuthenticated:!1,adminNickname:null,statistics:null,statisticsLoading:!1,statisticsError:null,activeGames:[],gamesLoading:!1,gamesError:null,players:[],playersLoading:!1,playersError:null,profanityRequests:[],profanityLoading:!1,profanityError:null,pendingContent:[],contentLoading:!1,contentError:null,isLoading:!1,error:null};Za()(kr((o,a)=>({...Fb,login:async s=>{o({isLoading:!0,error:null});try{const i=await Kt.login(s),c=ba(i,"Login failed");o({isAuthenticated:!0,adminNickname:c.nickname,isLoading:!1})}catch(i){const c=i instanceof Error?i.message:"Login failed";throw o({isLoading:!1,error:c,isAuthenticated:!1,adminNickname:null}),i}},logout:()=>{o({...Fb})},fetchStatistics:async()=>{o({statisticsLoading:!0,statisticsError:null});try{const s=ba(await Kt.getGameStatistics(),"Failed to fetch statistics");o({statistics:s,statisticsLoading:!1})}catch(s){const i=s instanceof Error?s.message:"Failed to fetch statistics";throw o({statisticsLoading:!1,statisticsError:i}),s}},fetchActiveGames:async()=>{o({gamesLoading:!0,gamesError:null});try{const s=ba(await Kt.getAllActiveGames(),"Failed to fetch games");o({activeGames:s,gamesLoading:!1})}catch(s){const i=s instanceof Error?s.message:"Failed to fetch games";throw o({gamesLoading:!1,gamesError:i}),s}},terminateGame:async s=>{o({isLoading:!0,error:null});try{Ns(await Kt.terminateRoom(s),"Failed to terminate game"),o(i=>({activeGames:i.activeGames.filter(c=>c.gameNumber!==s),isLoading:!1}))}catch(i){const c=i instanceof Error?i.message:"Failed to terminate game";throw o({isLoading:!1,error:c}),i}},kickPlayer:async(s,i)=>{o({isLoading:!0,error:null});try{Ns(await Kt.kickPlayer(s,i),"Failed to kick player"),o({isLoading:!1}),a().fetchActiveGames()}catch(c){const d=c instanceof Error?c.message:"Failed to kick player";throw o({isLoading:!1,error:d}),c}},fetchPlayers:async()=>{o({playersLoading:!0,playersError:null});try{const s=ba(await Kt.getAllPlayers(),"Failed to fetch players");o({players:s,playersLoading:!1})}catch(s){const i=s instanceof Error?s.message:"Failed to fetch players";throw o({playersLoading:!1,playersError:i}),s}},grantAdminRole:async s=>{o({isLoading:!0,error:null});try{Ns(await Kt.grantAdminRole(s),"Failed to grant admin role"),o({isLoading:!1}),a().fetchPlayers()}catch(i){const c=i instanceof Error?i.message:"Failed to grant admin role";throw o({isLoading:!1,error:c}),i}},fetchProfanityRequests:async()=>{o({profanityLoading:!0,profanityError:null});try{const s=ba(await Kt.getPendingProfanityRequests(),"Failed to fetch profanity requests");o({profanityRequests:s,profanityLoading:!1})}catch(s){const i=s instanceof Error?s.message:"Failed to fetch profanity requests";throw o({profanityLoading:!1,profanityError:i}),s}},approveProfanityRequest:async s=>{o({profanityLoading:!0,profanityError:null});try{Ns(await Kt.approveProfanityRequest(s),"Failed to approve request"),o(i=>({profanityRequests:i.profanityRequests.filter(c=>c.id!==s),profanityLoading:!1}))}catch(i){const c=i instanceof Error?i.message:"Failed to approve request";throw o({profanityLoading:!1,profanityError:c}),i}},rejectProfanityRequest:async s=>{o({profanityLoading:!0,profanityError:null});try{Ns(await Kt.rejectProfanityRequest(s),"Failed to reject request"),o(i=>({profanityRequests:i.profanityRequests.filter(c=>c.id!==s),profanityLoading:!1}))}catch(i){const c=i instanceof Error?i.message:"Failed to reject request";throw o({profanityLoading:!1,profanityError:c}),i}},fetchPendingContent:async()=>{o({contentLoading:!0,contentError:null});try{const s=ba(await Kt.getPendingContents(),"Failed to fetch pending content");o({pendingContent:s,contentLoading:!1})}catch(s){const i=s instanceof Error?s.message:"Failed to fetch pending content";throw o({contentLoading:!1,contentError:i}),s}},approveAllContent:async()=>{o({contentLoading:!0,contentError:null});try{Ns(await Kt.approveAllPendingContents(),"Failed to approve all content"),o({pendingContent:[],contentLoading:!1})}catch(s){const i=s instanceof Error?s.message:"Failed to approve all content";throw o({contentLoading:!1,contentError:i}),s}},cleanupStaleGames:async()=>{o({isLoading:!0,error:null});try{const s=ba(await Kt.cleanupStaleGames(),"Failed to cleanup stale games");return o({isLoading:!1}),a().fetchActiveGames(),{cleanedGames:s.cleanedGames,message:s.message}}catch(s){const i=s instanceof Error?s.message:"Failed to cleanup stale games";throw o({isLoading:!1,error:i}),s}},cleanupDisconnectedPlayers:async()=>{o({isLoading:!0,error:null});try{const s=ba(await Kt.cleanupDisconnectedPlayers(),"Failed to cleanup disconnected players");return o({isLoading:!1}),a().fetchPlayers(),{cleanedPlayers:s.cleanedPlayers}}catch(s){const i=s instanceof Error?s.message:"Failed to cleanup disconnected players";throw o({isLoading:!1,error:i}),s}},cleanupEmptyGames:async()=>{o({isLoading:!0,error:null});try{const s=ba(await Kt.cleanupEmptyGames(),"Failed to cleanup empty games");return o({isLoading:!1}),a().fetchActiveGames(),{cleanedGames:s.cleanedGames,message:s.message}}catch(s){const i=s instanceof Error?s.message:"Failed to cleanup empty games";throw o({isLoading:!1,error:i}),s}},setLoading:s=>o({isLoading:s}),setError:s=>o({error:s}),clearError:()=>o({error:null})}),{name:"admin-store"}));const wl={async listPuzzles(o={}){const a=new URLSearchParams;o.page!=null&&a.set("page",String(o.page)),o.size!=null&&a.set("size",String(o.size)),o.difficulty&&a.set("difficulty",o.difficulty),o.releasePack&&a.set("releasePack",o.releasePack);const s=a.toString()?`${Ya.ENDPOINTS.NEMONEMO.PUZZLES}?${a.toString()}`:Ya.ENDPOINTS.NEMONEMO.PUZZLES;return he.get(s)},async getPuzzle(o){const a=Ya.ENDPOINTS.NEMONEMO.PUZZLE_DETAIL(o);return he.get(a)},async startSession(o){const a=Ya.ENDPOINTS.NEMONEMO.SESSIONS;return he.post(a,o)},async getSession(o){const a=Ya.ENDPOINTS.NEMONEMO.SESSION_DETAIL(o);return he.get(a)},async listWeeklyLeaderboard(o,a="GLOBAL"){const s=new URLSearchParams({releasePack:o,scope:a}),i=`${Ya.ENDPOINTS.NEMONEMO.LEADERBOARD_WEEKLY}?${s.toString()}`;return he.get(i)}};Za(o=>({puzzles:[],leaderboard:[],isLoading:!1,async fetchPuzzles(a={}){o({isLoading:!0,error:void 0});try{const s=await wl.listPuzzles(a);o({puzzles:s.items,isLoading:!1})}catch(s){o({isLoading:!1,error:s.message})}},async fetchPuzzleDetail(a){o({isLoading:!0,error:void 0});try{const s=await wl.getPuzzle(a);o({puzzleDetail:s,isLoading:!1})}catch(s){o({isLoading:!1,error:s.message})}},async startSession(a){o({isLoading:!0,error:void 0});try{const s=await wl.startSession({puzzleId:a});o({session:s,isLoading:!1})}catch(s){o({isLoading:!1,error:s.message})}},async fetchLeaderboard(a,s="GLOBAL"){o({isLoading:!0,error:void 0});try{const i=await wl.listWeeklyLeaderboard(a,s);o({leaderboard:i.entries,isLoading:!1})}catch(i){o({isLoading:!1,error:i.message})}},resetError(){o({error:void 0})}}));Za()(kr((o,a)=>{const s=d=>{o({isConnected:d}),o(d?{connectionError:null}:{connectionError:"  "})},i=d=>{a().handleGameEvent(d)},c=d=>{a().handleChatMessage(d)};return He.addConnectionCallback(s),He.onGameEvent("*",i),He.onChatMessage(c),{isConnected:!1,connectionError:null,currentRoom:null,currentPlayerId:null,isLiar:!1,currentCategory:null,timeRemaining:0,hints:[],votes:[],defenses:[],chatMessages:[],availableRooms:[],connectWebSocket:async()=>{try{await He.connect(),o({connectionError:null})}catch(d){const m=d instanceof Error?d.message:" ";throw o({connectionError:m}),d}},disconnectWebSocket:()=>{He.disconnect(),o({isConnected:!1,currentRoom:null,connectionError:null})},joinGame:d=>{if(!a().isConnected){o({connectionError:"  "});return}He.subscribeToGame(d),o({hints:[],votes:[],defenses:[],chatMessages:[],isLiar:!1,currentCategory:null,timeRemaining:0})},leaveGame:()=>{const{currentRoom:d}=a();d&&(He.unsubscribeFromGame(d.id),o({currentRoom:null}),a().resetGameState(),Dv())},sendChatMessage:d=>{const{currentRoom:m}=a();if(m&&a().isConnected){const{nickname:h}=zn.getState();He.sendChatMessage(m.id,d,{nickname:h??void 0})}},castVote:d=>{const{currentRoom:m}=a();if(m&&a().isConnected){const h=Number.parseInt(d,10);Number.isNaN(h)||He.sendVote(m.id,h)}},submitDefense:d=>{const{currentRoom:m}=a();m&&a().isConnected&&He.sendDefense(m.id,d)},startGame:()=>{const{currentRoom:d}=a();d&&a().isConnected&&He.sendGameAction(d.id,"start")},setConnectionState:d=>{o({isConnected:d})},setConnectionError:d=>{o({connectionError:d})},handleGameEvent:d=>{const m=a();switch(d.type){case"PLAYER_JOINED":{if(m.currentRoom){const p={id:String(d.payload.playerId??"unknown"),name:d.payload.playerName??d.payload.nickname??"Unknown",isHost:!!d.payload.isHost,isReady:!!d.payload.isReady,isConnected:!0,score:0};o({currentRoom:{...m.currentRoom,players:[...m.currentRoom.players,p]}})}break}case"PLAYER_LEFT":{if(m.currentRoom){const h=String(d.payload.playerId??"unknown");o({currentRoom:{...m.currentRoom,players:m.currentRoom.players.filter(p=>p.id!==h)}})}break}case"GAME_STARTED":o({currentRoom:m.currentRoom?{...m.currentRoom,isStarted:!0,state:"PROVIDING_HINTS",currentRound:d.payload.currentRound??m.currentRoom.currentRound}:null});break;case"ROUND_STARTED":o({currentCategory:d.payload.category??m.currentCategory,timeRemaining:typeof d.payload.timeLimit=="number"?d.payload.timeLimit:m.timeRemaining,isLiar:d.payload.liarId!=null?String(d.payload.liarId)===m.currentPlayerId:m.isLiar,hints:[],votes:[],defenses:[]});break;case"HINT_PROVIDED":a().addHint(String(d.payload.playerId??"unknown"),d.payload.playerName??"",d.payload.hint??"");break;case"VOTE_CAST":a().addVote(String(d.payload.voterId??"unknown"),d.payload.voterName??"",String(d.payload.targetId??"unknown"),d.payload.targetName??"");break;case"DEFENSE_SUBMITTED":a().addDefense(String(d.payload.defenderId??d.payload.playerId??"unknown"),d.payload.defenderName??d.payload.playerName??"",d.payload.defense??"");break;case"ROUND_ENDED":{if(m.currentRoom){const h=d.payload.scores??d.payload.finalScores??[],p=m.currentRoom.players.map(g=>{const y=h.find(b=>String(b.playerId)===g.id);return y?{...g,score:y.score}:g});o({currentRoom:{...m.currentRoom,players:p,state:"ROUND_ENDED"}})}break}case"GAME_ENDED":if(m.currentRoom){const h=d.payload.finalScores??d.payload.scores??[],p=m.currentRoom.players.map(g=>{const y=h.find(b=>String(b.playerId)===g.id);return y?{...g,score:y.score}:g});o({currentRoom:{...m.currentRoom,players:p,state:"GAME_ENDED"}})}break;case"GAME_STATE_UPDATED":if(m.currentRoom){const h=d.payload.state,g=typeof h=="string"&&["WAITING","STARTING","PROVIDING_HINTS","VOTING","DEFENDING","ROUND_ENDED","GAME_ENDED"].includes(h)?h:m.currentRoom.state;o({currentRoom:{...m.currentRoom,state:g},timeRemaining:d.payload.timeRemaining??m.timeRemaining})}break}},handleChatMessage:d=>{o(m=>({chatMessages:[...m.chatMessages,d]}))},updatePlayer:(d,m)=>{const h=a();h.currentRoom&&o({currentRoom:{...h.currentRoom,players:h.currentRoom.players.map(p=>p.id===d?{...p,...m}:p)}})},addHint:(d,m,h)=>{o(p=>({hints:[...p.hints,{playerId:d,playerName:m,hint:h,timestamp:Date.now()}]}))},addVote:(d,m,h,p)=>{o(g=>({votes:[...g.votes,{voterId:d,voterName:m,targetId:h,targetName:p}]}))},addDefense:(d,m,h)=>{o(p=>({defenses:[...p.defenses,{defenderId:d,defenderName:m,defense:h,timestamp:Date.now()}]}))},resetGameState:()=>{o({isLiar:!1,currentCategory:null,timeRemaining:0,hints:[],votes:[],defenses:[],chatMessages:[]})}}},{name:"game-store"}));const LR="game-flow/2024-09-18",Xb=()=>({meta:{gameNumber:null,schemaVersion:null,mode:null,round:{current:0,total:0}},phase:{current:"WAITING_FOR_PLAYERS",endsAt:null,turnOrder:[],activePlayerId:null,accusedPlayerId:null},players:{byId:{},order:[]},scoreboard:[],voting:null,chat:{messages:[],unreadCount:0},timers:{items:{}},lastEventType:null}),UR=o=>({id:o.id,userId:o.userId,nickname:o.nickname,state:o.state,isAlive:o.isAlive,hasVoted:o.hasVoted,votesReceived:o.votesReceived,role:o.state==="ACCUSED"?"ACCUSING":void 0,hint:o.hint,defense:o.defense}),_s=o=>{if(typeof o=="number"&&!Number.isNaN(o))return o;if(typeof o=="string"){const a=Number(o);if(!Number.isNaN(a))return a}},Zx=o=>{if(typeof o=="string"&&o.length>0)return o},GR=o=>{if(typeof o=="boolean")return o},HR=new Set(["WAITING_FOR_PLAYERS","SPEECH","VOTING_FOR_LIAR","DEFENDING","VOTING_FOR_SURVIVAL","GUESSING_WORD","GAME_OVER"]),zR=(o,a)=>typeof o=="string"&&HR.has(o)?o:a,PR=o=>Array.isArray(o)?o.map(s=>_s(s)).filter(s=>s!=null):void 0,Ss=(o,a)=>{if(!o||typeof a!="number"||Number.isNaN(a))return null;const s=Date.parse(o);return Number.isNaN(s)?null:new Date(s+a*1e3).toISOString()},VR=o=>Array.isArray(o)?o.map(a=>{if(!a||typeof a!="object")return null;const s=_s(a.userId),i=Zx(a.nickname),c=_s(a.score),d=GR(a.isAlive);return s==null||i==null||c==null?null:{userId:s,nickname:i,score:c,isAlive:d??!0}}).filter(a=>a!=null):[],Tr=(o,a,s,i="SYSTEM",c="SYSTEM")=>({id:null,gameNumber:o??0,playerNickname:i,content:a,timestamp:s,type:c}),Jx=Za()(kr(o=>({...Xb(),actions:{hydrateFromSnapshot:a=>{const s=a.players.map(UR),i=Object.fromEntries(s.map(d=>[d.id,d])),c=a.turnOrder?.map(d=>Number(d))??s.map(d=>d.id);o(d=>({...d,meta:{gameNumber:a.gameNumber,schemaVersion:a.schemaVersion??LR,mode:a.gameMode,round:{current:a.gameCurrentRound,total:a.gameTotalRounds}},phase:{current:a.currentPhase,endsAt:a.phaseEndTime??null,turnOrder:a.turnOrder??[],activePlayerId:a.currentTurnIndex!=null?c[a.currentTurnIndex]??null:null,accusedPlayerId:a.accusedPlayer?.id??null},players:{byId:i,order:c},scoreboard:a.scoreboard,voting:d.voting?.gameNumber===a.gameNumber?d.voting:null,lastEventType:null}))},applyRealtimeEvent:a=>{o(s=>{let i=s.meta,c=s.phase,d=s.players.byId;const m=s.players.order;let h=!1,p=s.scoreboard,g=s.voting,y=s.chat.messages,b=s.chat.unreadCount,N=!1,E=s.timers.items,j=!1;const S=a.payload.schemaVersion;S&&S!==s.meta.schemaVersion&&(i={...i,schemaVersion:S});const _=i.gameNumber??a.payload?.gameNumber??null,L=(T={})=>({...g??{gameNumber:T.gameNumber??_??0,currentVotes:0,requiredVotes:T.requiredVotes??0,totalPlayers:T.totalPlayers??0,votedPlayers:[],pendingPlayers:[],votingDeadline:null,canChangeVote:!0},...T}),R=T=>{y=[...y,T].slice(-200),b+=1,N=!0};switch(a.type){case"PHASE_CHANGE":{const T=a.payload.additionalData??{},A=PR(T.turnOrder)?.map(Q=>Q.toString()),D=_s(T.currentSpeakerId??T.currentTurnPlayerId),Y=_s(T.accusedPlayerId),z=Zx(T.phaseEndsAt??T.phaseEndTime),I=_s(T.currentRound),G=_s(T.totalRounds);c={...c,current:zR(a.payload.phase,c.current),endsAt:z??null,turnOrder:A??c.turnOrder,activePlayerId:D??c.activePlayerId??null,accusedPlayerId:Y??null},(I!=null||G!=null)&&(i={...i,round:{current:I??i.round.current,total:G??i.round.total}});break}case"CURRENT_TURN":{c={...c,activePlayerId:a.payload.currentSpeakerId};break}case"DEFENSE_START":{c={...c,accusedPlayerId:a.payload.accusedPlayerId};const T=Ss(a.payload.timestamp,a.payload.defenseTimeLimit);E={...E,defense:{id:"defense",phase:"DEFENDING",endsAt:T,remainingSeconds:a.payload.defenseTimeLimit}},j=!0;break}case"DEFENSE_SUBMISSION":{const T=m.find(A=>d[A]?.userId===a.payload.userId);T!=null&&d[T]&&(d={...d,[T]:{...d[T],defense:a.payload.defenseText}},h=!0);break}case"DEFENSE_TIMEOUT":{if("defense"in E){const T={...E};delete T.defense,E=T,j=!0}break}case"VOTING_START":{const T=a.payload.availablePlayers.length,A=Ss(a.payload.timestamp,a.payload.votingTimeLimit),D=a.payload.availablePlayers.map(z=>({userId:z.id,nickname:z.nickname,votedAt:null}));g=L({gameNumber:a.payload.gameNumber,currentVotes:0,requiredVotes:Math.max(1,Math.floor(T/2)+1),totalPlayers:T,votedPlayers:[],pendingPlayers:D,votingDeadline:A,canChangeVote:!0});const Y=Ss(a.payload.timestamp,a.payload.votingTimeLimit);E={...E,voting:{id:"voting",phase:c.current,endsAt:Y,remainingSeconds:a.payload.votingTimeLimit}},j=!0;break}case"VOTING_PROGRESS":{const T=a.payload.totalCount;g=L({gameNumber:a.payload.gameNumber,currentVotes:a.payload.votedCount,totalPlayers:T,requiredVotes:g?.requiredVotes??Math.max(1,Math.floor(T/2)+1)});break}case"FINAL_VOTING_START":{const T=Ss(a.payload.timestamp,a.payload.votingTimeLimit),A=m.filter(Y=>Y!==a.payload.accusedPlayerId).map(Y=>({userId:d[Y]?.userId??Y,nickname:d[Y]?.nickname??`Player ${Y}`,votedAt:null}));g=L({gameNumber:a.payload.gameNumber,currentVotes:0,requiredVotes:g?.requiredVotes??Math.max(1,Math.floor(Math.max(m.length-1,1)/2)+1),totalPlayers:Math.max(m.length-1,0),votedPlayers:[],pendingPlayers:A,votingDeadline:T,canChangeVote:!1});const D=Ss(a.payload.timestamp,a.payload.votingTimeLimit);E={...E,finalVoting:{id:"finalVoting",phase:"VOTING_FOR_SURVIVAL",endsAt:D,remainingSeconds:a.payload.votingTimeLimit}},j=!0;break}case"FINAL_VOTING_PROGRESS":{const T=a.payload.totalCount;g=L({gameNumber:a.payload.gameNumber,currentVotes:a.payload.votedCount,totalPlayers:T,canChangeVote:!1});break}case"FINAL_VOTING_RESULT":{g={gameNumber:a.payload.gameNumber,currentVotes:a.payload.executionVotes+a.payload.survivalVotes,requiredVotes:a.payload.totalVotes,totalPlayers:a.payload.totalVotes,votedPlayers:a.payload.finalVotingRecord.map(A=>({userId:A.voterPlayerId,nickname:A.voterNickname,votedAt:null})),pendingPlayers:[],votingDeadline:null,canChangeVote:!1},p=a.payload.scoreboard;const T={...E};delete T.voting,delete T.finalVoting,E=T,j=!0;break}case"SPEECH_TIMER":{const T=`speech-${a.payload.userId}`,A=Ss(a.payload.timestamp,a.payload.remainingTime);E={...E,[T]:{id:T,phase:c.current,endsAt:A,remainingSeconds:a.payload.remainingTime}},j=!0;break}case"COUNTDOWN_UPDATE":{E={...E,countdown:{id:"countdown",phase:a.payload.phase,endsAt:null,remainingSeconds:a.payload.remainingTime}},j=!0;break}case"SCOREBOARD":{p=VR(a.payload.players);break}case"GAME_END":{c={...c,current:"GAME_OVER",activePlayerId:null,accusedPlayerId:null,endsAt:null},i={...i,round:{current:a.payload.gameStatistics.currentRound,total:a.payload.gameStatistics.totalRounds}},Object.keys(E).length>0&&(E={},j=!0),R(Tr(_,`  -  : ${a.payload.winner}`,a.payload.timestamp,"SYSTEM","POST_ROUND"));break}case"TERMINATION":{c={...c,current:"GAME_OVER",activePlayerId:null,accusedPlayerId:null,endsAt:null},Object.keys(E).length>0&&(E={},j=!0),R(Tr(_,` : ${a.payload.message}`,a.payload.timestamp));break}case"LIAR_GUESS_START":{c={...c,current:"GUESSING_WORD",activePlayerId:a.payload.liarPlayer.id};const T=d[a.payload.liarPlayer.id];T&&(d={...d,[a.payload.liarPlayer.id]:{...T,role:a.payload.liarPlayer.role??T.role}},h=!0);const A="liarGuess",D=Ss(a.payload.timestamp,a.payload.guessTimeLimit);E={...E,[A]:{id:A,phase:"GUESSING_WORD",endsAt:D,remainingSeconds:a.payload.guessTimeLimit}},j=!0;break}case"LIAR_GUESS_RESULT":{R(Tr(_,`  "${a.payload.liarGuess}"  ${a.payload.isCorrect?"":""}`,new Date().toISOString(),"SYSTEM","POST_ROUND")),a.payload.gameEnd&&(c={...c,current:"GAME_OVER",activePlayerId:null,accusedPlayerId:null,endsAt:null},Object.keys(E).length>0&&(E={},j=!0));break}case"MODERATOR":{const T=a.payload.isImportant?"[]":"[]";R(Tr(_,`${T} ${a.payload.content}`,a.payload.timestamp));break}case"STATUS_MESSAGE":{R(Tr(_,a.payload.content,a.payload.timestamp));break}case"LIAR_MESSAGE":{R(Tr(_,a.payload.content,a.payload.timestamp));break}}return{...s,meta:i,phase:c,players:h?{byId:d,order:m}:s.players,scoreboard:p,voting:g,chat:N?{messages:y,unreadCount:b}:s.chat,timers:j?{items:E}:s.timers,lastEventType:a.type}})},setVotingStatus:a=>{o(s=>({...s,voting:{gameNumber:a.gameNumber,currentVotes:a.currentVotes,requiredVotes:a.requiredVotes,totalPlayers:a.totalPlayers,votedPlayers:a.votedPlayers,pendingPlayers:a.pendingPlayers,votingDeadline:a.votingDeadline??null,canChangeVote:a.canChangeVote}}))},appendChatMessages:a=>{!Array.isArray(a)||a.length===0||o(s=>({...s,chat:{messages:[...s.chat.messages,...a].slice(-200),unreadCount:s.chat.unreadCount+a.length}}))},reset:()=>{o(()=>({...Xb()}))}}}),{name:"gameplay-store"})),ki=()=>globalThis.crypto?.randomUUID?.()||Math.random().toString(36).slice(2),BR={status:"idle",error:void 0,reconnectAttempts:0,maxReconnectAttempts:8,lastConnectedAt:void 0,lastDisconnectedAt:void 0,lastPingAt:void 0,lastPongAt:void 0,avgLatency:void 0,latencySamples:[],messageQueue:[],pendingMessages:{},processingQueue:!1,optimisticUpdates:{},syncIssues:[]},cn=Za()(kr((o,a)=>({...BR,connect:async()=>{const{status:s}=a();if(!(s==="connecting"||s==="connected")){o({status:"connecting",error:void 0});try{await He.connect(),He.addConnectionCallback(i=>{o(c=>({status:i?"connected":"disconnected",lastConnectedAt:i?Date.now():c.lastConnectedAt,lastDisconnectedAt:i?c.lastDisconnectedAt:Date.now()})),i&&(He.processQueue(),a().processQueue())}),He.registerRawListener(i=>{if(i.type==="event"){const c={id:ki(),sentAt:i.receivedAt,receivedAt:i.receivedAt,rtt:0};a().recordLatency(c)}}),o({status:"connected",lastConnectedAt:Date.now()})}catch(i){o({status:"error",error:i instanceof Error?i.message:" "})}}},disconnect:()=>{He.disconnect(),o({status:"disconnected",lastDisconnectedAt:Date.now()})},sendMessage:(s,i,c)=>{let d;if(c?.optimisticState){const p=mt.getState(),g=c.optimisticState,y={},b=y;for(const N of Object.keys(g))b[N]=p[N];d=a().addOptimisticUpdate({action:s,optimisticState:c.optimisticState,originalState:y}),mt.setState(g)}const m=He.safePublish(s,i)||ki(),h={id:m,destination:s,body:i,timestamp:Date.now(),attempts:1,optimisticUpdateId:d,status:"sent",lastAttempt:Date.now()};o(p=>({pendingMessages:{...p.pendingMessages,[m]:h}}))},queueMessage:s=>{const i=s.id||ki(),c={id:i,destination:s.destination,body:s.body,attempts:0,timestamp:Date.now(),optimisticUpdateId:s.optimisticUpdateId};return o(d=>({messageQueue:[...d.messageQueue,c]})),i},processQueue:async()=>{const{messageQueue:s,processingQueue:i}=a();if(i||a().status!=="connected"||!s.length)return;o({processingQueue:!0});const c=[];for(const d of s)try{He.safePublish(d.destination,d.body)}catch{d.attempts+=1,d.attempts<3&&c.push(d)}o({messageQueue:c,processingQueue:!1})},setStatus:(s,i)=>o({status:s,error:i}),recordLatency:s=>o(i=>{const c=[...i.latencySamples,s].slice(-20),d=c.reduce((m,h)=>m+h.rtt,0)/c.length||void 0;return{latencySamples:c,avgLatency:d}}),clearLatency:()=>o({latencySamples:[],avgLatency:void 0}),addOptimisticUpdate:s=>{const i=ki(),c={id:i,timestamp:Date.now(),confirmed:!1,rolledBack:!1,...s};return o(d=>({optimisticUpdates:{...d.optimisticUpdates,[i]:c}})),i},confirmOptimistic:(s,i)=>{const{optimisticUpdates:c}=a(),d=c[s];d&&(i&&mt.setState(i),d.confirmed=!0,o(m=>({optimisticUpdates:{...m.optimisticUpdates,[s]:d}})))},rollbackOptimistic:s=>{const{optimisticUpdates:i}=a(),c=i[s];!c||c.rolledBack||(mt.setState(c.originalState),c.rolledBack=!0,o(d=>({optimisticUpdates:{...d.optimisticUpdates,[s]:c}})))},addSyncIssue:s=>{const i={id:ki(),timestamp:Date.now(),...s};o(c=>({syncIssues:[...c.syncIssues,i]}))},clearSyncIssues:()=>o({syncIssues:[]}),pruneQueue:()=>o(s=>({messageQueue:s.messageQueue.filter(i=>Date.now()-i.timestamp<3e4)}))}))),qR=["LIARS_KNOW","LIARS_DIFFERENT_WORD"],YR=[4,5,6,7,8],$R=[1,2],FR=[1,3,5],XR=[10,20,30],QR=o=>{if(typeof o!="string")return"WAITING";const a=o.toUpperCase();return a==="IN_PROGRESS"?"IN_PROGRESS":a==="ENDED"?"ENDED":"WAITING"},KR={WAITING:" ",IN_PROGRESS:"  ",ENDED:""},WR=o=>{const a=o==="IN_PROGRESS"?"secondary":o==="ENDED"?"outline":"default";return l.jsx(We,{variant:a,children:KR[o]})},Cf=(o,a=[])=>({gameName:o?`${o}  `:"",gameMode:"LIARS_KNOW",gameParticipants:6,gameLiarCount:1,gameTotalRounds:3,targetPoints:10,isPrivate:!1,password:"",useRandomSubjects:!1,selectedSubjectIds:a.map(s=>s.id),randomSubjectCount:10});function ZR(){const o=Ir(),{toast:a}=Wa(),{nickname:s}=zn(),i=cn(C=>C.connect),[c,d]=x.useState([]),[m,h]=x.useState(!0),[p,g]=x.useState(null),[y,b]=x.useState(!1),[N,E]=x.useState(!1),[j,S]=x.useState(!1),[_,L]=x.useState(""),[R,T]=x.useState(!1),[A,D]=x.useState([]),[Y,z]=x.useState(!1),[I,G]=x.useState(()=>Cf(s));zb("create-game-modal",N),zb("join-game-modal",j);const Q=x.useCallback(async C=>{const P=!C?.skipLoadingState;P&&h(!0),g(null);try{const W=await Zt.getGameList(0,24),ne=W.gameRooms??W.games??W.data??[];d(ne)}catch(W){const ne=W instanceof Error?W.message:"   ";g(ne)}finally{P&&h(!1)}},[]),ae=x.useCallback(async()=>{b(!0);try{await Q()}finally{b(!1)}},[Q]),le=x.useCallback(C=>{const P=C.gameNumber,W=typeof P=="number"?P:typeof P=="string"?Number.parseInt(P,10):Number.NaN;if(!Number.isFinite(W))return;const ne=W;if(C.type==="ROOM_DELETED"){d(de=>{const re=de.filter(ce=>ce.gameNumber!==ne);return re.length===de.length?de:re});return}if(C.type==="PLAYER_JOINED"||C.type==="PLAYER_LEFT"){let de=!1;d(ce=>{const xe=[];for(const Ne of ce)if(Ne.gameNumber===ne){de=!0;const Ce=typeof C.currentPlayers=="number"?C.currentPlayers:C.type==="PLAYER_JOINED"?Ne.currentPlayers+1:Math.max(0,Ne.currentPlayers-1),Me=typeof C.maxPlayers=="number"?C.maxPlayers:Ne.maxPlayers;if(Ce<=0)continue;xe.push({...Ne,currentPlayers:Ce,maxPlayers:Me})}else xe.push(Ne);return de?xe:ce});const re=C.type==="PLAYER_LEFT"&&(typeof C.currentPlayers!="number"||C.currentPlayers>0);(!de||re)&&Q({skipLoadingState:!0});return}Q({skipLoadingState:!0})},[Q]),K=x.useCallback(async()=>{z(!0);try{const C=await lj.getSubjects();D(C.subjects),G(P=>({...P,selectedSubjectIds:P.useRandomSubjects?P.selectedSubjectIds:C.subjects.map(W=>W.id)}))}catch(C){console.error("Failed to load subjects",C),a({title:"  ",description:C instanceof Error?C.message:"     ",variant:"destructive"})}finally{z(!1)}},[a]);x.useEffect(()=>{Q(),K()},[Q,K]),x.useEffect(()=>{let C,P=!1;return(async()=>{try{if(await i(),P)return;He.ensureLobbySubscription(),C=He.onLobbyUpdate(le)}catch(ne){console.error("Failed to initialize lobby realtime updates",ne)}})(),()=>{P=!0,C&&C()}},[i,le]),x.useEffect(()=>{const C=setInterval(()=>{document.hasFocus()&&!N&&!j&&Q()},3e4);return()=>clearInterval(C)},[Q,N,j]),x.useEffect(()=>{G(C=>({...C,gameName:s?`${s}  `:C.gameName}))},[s]);const se=C=>{E(C),C&&G(Cf(s,A))},oe=C=>{G(P=>{const W=P.selectedSubjectIds.includes(C);return{...P,selectedSubjectIds:W?P.selectedSubjectIds.filter(ne=>ne!==C):[...P.selectedSubjectIds,C]}})},M=()=>{G(C=>({...C,selectedSubjectIds:A.map(P=>P.id)}))},H=()=>{G(C=>({...C,selectedSubjectIds:[]}))},ee=async()=>{if(!I.gameName.trim()){a({title:"  ",description:"  ",variant:"destructive"});return}if(I.isPrivate&&!I.password.trim()){a({title:" ",description:"    ",variant:"destructive"});return}if(!I.useRandomSubjects&&I.selectedSubjectIds.length===0){a({title:" ",description:"    ",variant:"destructive"});return}if(!s){a({title:" ",description:"   ",variant:"destructive"});return}const C={nickname:s,gameName:I.gameName,gamePassword:I.isPrivate&&I.password.trim()||void 0,gameParticipants:I.gameParticipants,gameLiarCount:I.gameLiarCount,gameTotalRounds:I.gameTotalRounds,gameMode:I.gameMode,subjectIds:I.useRandomSubjects?void 0:I.selectedSubjectIds,useRandomSubjects:I.useRandomSubjects,randomSubjectCount:I.useRandomSubjects?I.randomSubjectCount:void 0,targetPoints:I.targetPoints};T(!0);try{const P=await Zt.createGame(C);a.success(" !"),G(Cf(s,A)),E(!1),await Q(),o(`/game/${P}`)}catch(P){console.error("Failed to create game room",P),a({title:"  ",description:P instanceof Error?P.message:"    ",variant:"destructive"})}finally{T(!1)}},ue=async(C,P)=>{if(!s){a({title:" ",description:"   ",variant:"destructive"});return}let W;if(!(P&&(W=prompt(" :")?.trim()||void 0,!W))){T(!0);try{await Zt.joinGame({gameNumber:C,nickname:s,gamePassword:W}),a.success(" !"),S(!1),o(`/game/${C}`)}catch(ne){console.error("Failed to join game room",ne),a({title:"  ",description:ne instanceof Error?ne.message:"    ",variant:"destructive"})}finally{T(!1)}}},pe=async()=>{if(!_.trim()){a({title:"  ",description:"   ",variant:"destructive"});return}const C=Number(_.trim());if(Number.isNaN(C)){a({title:"   ",description:"   ",variant:"destructive"});return}await ue(C,!1),L("")},k=x.useMemo(()=>A.map(C=>({id:C.id,label:C.name})),[A]);return l.jsx("div",{className:"space-y-6",children:l.jsxs(Ae,{children:[l.jsxs(ct,{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsxs(ut,{className:"text-xl font-semibold flex items-center gap-2",children:[l.jsx(Jn,{className:"h-5 w-5"})," "]}),l.jsx(Ms,{children:"      "})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs(ve,{variant:"outline",onClick:ae,disabled:m||y,children:[l.jsx(Qa,{className:`h-4 w-4 mr-2 ${y?"animate-spin":""}`}),""]}),l.jsxs(Ka,{open:j,onOpenChange:S,children:[l.jsx(Vl,{asChild:!0,children:l.jsx(ve,{variant:"secondary",children:" "})}),l.jsxs(ya,{children:[l.jsxs(va,{children:[l.jsx(xa,{children:"  "}),l.jsx(Sa,{children:"    "})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx($t,{htmlFor:"game-code",children:" "}),l.jsx(Wn,{id:"game-code",placeholder:": 1024",value:_,onChange:C=>L(C.target.value)})]}),l.jsx(ve,{onClick:pe,disabled:R,className:"w-full",children:""})]})]})]}),l.jsxs(Ka,{open:N,onOpenChange:se,children:[l.jsx(Vl,{asChild:!0,children:l.jsxs(ve,{children:[l.jsx(Vi,{className:"h-4 w-4 mr-2"})," "]})}),l.jsxs(ya,{className:"max-h-[90vh] overflow-hidden",children:[l.jsxs(va,{children:[l.jsx(xa,{children:"  "}),l.jsx(Sa,{children:"      "})]}),l.jsx(Ar,{className:"h-[70vh] pr-4",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx($t,{htmlFor:"room-name",children:" "}),l.jsx(Wn,{id:"room-name",value:I.gameName,onChange:C=>G(P=>({...P,gameName:C.target.value})),placeholder:"   "})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx($t,{children:" "}),l.jsxs(Rr,{value:I.gameMode,onValueChange:C=>G(P=>({...P,gameMode:C})),children:[l.jsx(ws,{children:l.jsx(Cr,{placeholder:"  "})}),l.jsx(Ts,{children:qR.map(C=>l.jsx(js,{value:C,children:C.replace(/_/g," ")},C))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx($t,{children:" "}),l.jsxs(Rr,{value:String(I.gameParticipants),onValueChange:C=>G(P=>({...P,gameParticipants:Number(C)})),children:[l.jsx(ws,{children:l.jsx(Cr,{placeholder:""})}),l.jsx(Ts,{children:YR.map(C=>l.jsxs(js,{value:String(C),children:[C,""]},C))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx($t,{children:" "}),l.jsxs(Rr,{value:String(I.gameLiarCount),onValueChange:C=>G(P=>({...P,gameLiarCount:Number(C)})),children:[l.jsx(ws,{children:l.jsx(Cr,{placeholder:" "})}),l.jsx(Ts,{children:$R.map(C=>l.jsxs(js,{value:String(C),children:[C,""]},C))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx($t,{children:" "}),l.jsxs(Rr,{value:String(I.gameTotalRounds),onValueChange:C=>G(P=>({...P,gameTotalRounds:Number(C)})),children:[l.jsx(ws,{children:l.jsx(Cr,{placeholder:""})}),l.jsx(Ts,{children:FR.map(C=>l.jsxs(js,{value:String(C),children:[C,""]},C))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx($t,{children:" "}),l.jsxs(Rr,{value:String(I.targetPoints),onValueChange:C=>G(P=>({...P,targetPoints:Number(C)})),children:[l.jsx(ws,{children:l.jsx(Cr,{placeholder:""})}),l.jsx(Ts,{children:XR.map(C=>l.jsxs(js,{value:String(C),children:[C,""]},C))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx($t,{htmlFor:"private-room",children:" "}),l.jsx("input",{id:"private-room",type:"checkbox",className:"h-4 w-4",checked:I.isPrivate,onChange:C=>G(P=>({...P,isPrivate:C.target.checked}))})]}),I.isPrivate&&l.jsx(Wn,{type:"password",placeholder:"",value:I.password,onChange:C=>G(P=>({...P,password:C.target.value}))})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs($t,{className:"flex items-center gap-2",htmlFor:"random-subjects-toggle",children:[l.jsx(Ly,{className:"h-4 w-4"}),"  "]}),l.jsx("input",{id:"random-subjects-toggle",type:"checkbox",className:"h-4 w-4",checked:I.useRandomSubjects,onChange:C=>G(P=>({...P,useRandomSubjects:C.target.checked}))})]}),Y?l.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[l.jsx(Qa,{className:"h-4 w-4 animate-spin"}),"   ..."]}):I.useRandomSubjects?l.jsxs("div",{className:"space-y-2",children:[l.jsx($t,{htmlFor:"random-count",children:"  "}),l.jsx(Wn,{id:"random-count",type:"number",min:1,max:A.length||10,value:I.randomSubjectCount,onChange:C=>G(P=>({...P,randomSubjectCount:Number(C.target.value)}))}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"      ."})]}):l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx(ve,{type:"button",variant:"outline",size:"sm",onClick:M,children:" "}),l.jsx(ve,{type:"button",variant:"outline",size:"sm",onClick:H,children:" "})]}),l.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto",children:k.map(C=>{const P=I.selectedSubjectIds.includes(C.id);return l.jsxs(We,{variant:P?"default":"outline",className:"cursor-pointer",onClick:()=>oe(C.id),children:[C.label,P&&l.jsx(Ql,{className:"h-3 w-3 ml-1"})]},C.id)})})]})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(ve,{type:"button",variant:"outline",onClick:()=>E(!1),children:""}),l.jsx(ve,{type:"button",onClick:ee,disabled:R,children:""})]})]})})]})]})]})]}),l.jsx(De,{children:m?l.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[l.jsx(Qa,{className:"h-8 w-8 animate-spin mb-4"}),"   ..."]}):p?l.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-destructive gap-4",children:[p,l.jsx(ve,{variant:"outline",onClick:ae,children:" "})]}):c.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-4 text-center",children:[l.jsx(Jn,{className:"h-10 w-10 text-muted-foreground"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"    ."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"    !"})]}),l.jsxs(ve,{onClick:()=>se(!0),children:[l.jsx(Vi,{className:"h-4 w-4 mr-2"}),"   "]})]}):l.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3",children:c.map(C=>{const P=QR(C.state??C.gameState),W=!!C.hasPassword;return l.jsxs(Ae,{className:"flex flex-col",children:[l.jsx(ct,{className:"pb-3",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsxs(ut,{className:"text-lg flex items-center gap-2",children:[W?l.jsx(Uy,{className:"h-4 w-4"}):l.jsx(rw,{className:"h-4 w-4"}),C.title]}),l.jsxs(Ms,{children:[": ",C.host]})]}),WR(P)]})}),l.jsxs(De,{className:"flex-1 flex flex-col gap-3",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-muted-foreground",children:""}),l.jsxs("span",{className:"font-medium",children:[C.currentPlayers,"/",C.maxPlayers]})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-muted-foreground",children:" "}),l.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs font-mono",children:C.gameNumber})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-muted-foreground",children:" "}),l.jsx("span",{className:"text-xs",children:C.gameMode})]}),l.jsx("div",{className:"mt-auto",children:l.jsx(ve,{className:"w-full",onClick:()=>ue(C.gameNumber,W),disabled:P==="IN_PROGRESS"||C.currentPlayers>=C.maxPlayers||R,children:P==="IN_PROGRESS"?l.jsxs(l.Fragment,{children:[l.jsx(iw,{className:"h-4 w-4 mr-2"}),"   "]}):C.currentPlayers>=C.maxPlayers?"  ":""})})]})]},C.gameNumber)})})})]})})}function JR(){const o=Ir(),{toast:a}=Wa(),{nickname:s,logout:i}=zn(),{isAnyModalOpen:c,activeModals:d}=ym(),[m,h]=x.useState("games"),[p,g]=x.useState({activeGameRooms:0,registeredTopics:0,totalAnswers:0,isLoading:!0}),y=x.useCallback(async()=>{g(E=>({...E,isLoading:!0}));try{const[E,j,S]=await Promise.all([Zt.getGameList(0,100),Or.getSubjects(),Hf.getWords()]),L=(E.gameRooms||E.games||E.data||[]).filter(Y=>Y.gameState==="WAITING").length,T=(j.subjects||[]).length,D=(S.words||[]).length;g({activeGameRooms:L,registeredTopics:T,totalAnswers:D,isLoading:!1})}catch(E){console.error("Failed to fetch lobby statistics:",E),a({title:"  ",description:"     ",variant:"destructive"}),g(j=>({...j,isLoading:!1}))}},[a]);x.useEffect(()=>{y()},[y]),x.useEffect(()=>{const E=setInterval(()=>{document.hasFocus()&&!c?(console.log("[LobbyPage] Auto-refreshing statistics"),y()):c&&console.log("[LobbyPage] Skipping auto-refresh - modal open:",Array.from(d))},3e4);return()=>clearInterval(E)},[y,c,d]);const b=()=>{i(),o("/"),a({title:"",description:" "})},N=()=>{y(),a({title:" ",description:"  "})};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:l.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[l.jsxs(_t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"  "}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"  ,   "})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Ae,{className:"px-4 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:l.jsx(Il,{className:"w-4 h-4 text-white"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:s}),l.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(ve,{variant:"outline",size:"sm",onClick:N,disabled:p.isLoading,children:[l.jsx(Qa,{className:`h-4 w-4 mr-2 ${p.isLoading?"animate-spin":""}`})," "]}),l.jsxs(Cj,{children:[l.jsx(_j,{asChild:!0,children:l.jsx(ve,{variant:"outline",size:"icon",children:l.jsx(Ly,{className:"h-4 w-4"})})}),l.jsxs(Wv,{align:"end",children:[l.jsxs(Vf,{disabled:!0,children:[l.jsx(Os,{className:"mr-2 h-4 w-4"})," "]}),l.jsx(Zv,{}),l.jsxs(Vf,{onClick:b,children:[l.jsx(Iy,{className:"mr-2 h-4 w-4"}),""]})]})]})]})]})]}),l.jsx(_t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:l.jsxs(Rj,{value:m,onValueChange:h,className:"w-full",children:[l.jsxs(Kv,{className:"grid w-full grid-cols-3",children:[l.jsxs(_l,{value:"games",className:"flex items-center gap-2",children:[l.jsx(Jn,{className:"h-4 w-4"}),""]}),l.jsxs(_l,{value:"topics",className:"flex items-center gap-2",children:[l.jsx(kl,{className:"h-4 w-4"})," "]}),l.jsxs(_l,{value:"answers",className:"flex items-center gap-2",children:[l.jsx(Ll,{className:"h-4 w-4"})," "]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsx(Al,{value:"games",children:l.jsx(_t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:l.jsx(ZR,{},`games-${p.isLoading}`)})}),l.jsx(Al,{value:"topics",children:l.jsx(_t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:l.jsx(Lj,{},`topics-${p.isLoading}`)})}),l.jsx(Al,{value:"answers",children:l.jsx(_t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:l.jsx(hR,{},`answers-${p.isLoading}`)})})]})]})}),l.jsxs(_t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"grid gap-4 md:grid-cols-3",children:[l.jsxs(Ae,{children:[l.jsxs(ct,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(ut,{className:"text-sm font-medium",children:" "}),l.jsx(Jn,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(De,{children:[l.jsx("div",{className:"text-2xl font-bold",children:p.isLoading?l.jsx(Qa,{className:"h-6 w-6 animate-spin inline-block"}):p.activeGameRooms}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"   "})]})]}),l.jsxs(Ae,{children:[l.jsxs(ct,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(ut,{className:"text-sm font-medium",children:" "}),l.jsx(kl,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(De,{children:[l.jsx("div",{className:"text-2xl font-bold",children:p.isLoading?l.jsx(Qa,{className:"h-6 w-6 animate-spin inline-block"}):p.registeredTopics}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"    "})]})]}),l.jsxs(Ae,{children:[l.jsxs(ct,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(ut,{className:"text-sm font-medium",children:"  "}),l.jsx(Ll,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(De,{children:[l.jsx("div",{className:"text-2xl font-bold",children:p.isLoading?l.jsx(Qa,{className:"h-6 w-6 animate-spin inline-block"}):p.totalAnswers}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"   "})]})]})]})]})})}const Qb=o=>Symbol.iterator in o,Kb=o=>"entries"in o,Wb=(o,a)=>{const s=o instanceof Map?o:new Map(o.entries()),i=a instanceof Map?a:new Map(a.entries());if(s.size!==i.size)return!1;for(const[c,d]of s)if(!i.has(c)||!Object.is(d,i.get(c)))return!1;return!0},eC=(o,a)=>{const s=o[Symbol.iterator](),i=a[Symbol.iterator]();let c=s.next(),d=i.next();for(;!c.done&&!d.done;){if(!Object.is(c.value,d.value))return!1;c=s.next(),d=i.next()}return!!c.done&&!!d.done};function tC(o,a){return Object.is(o,a)?!0:typeof o!="object"||o===null||typeof a!="object"||a===null||Object.getPrototypeOf(o)!==Object.getPrototypeOf(a)?!1:Qb(o)&&Qb(a)?Kb(o)&&Kb(a)?Wb(o,a):eC(o,a):Wb({entries:()=>Object.entries(o)},{entries:()=>Object.entries(a)})}function Ls(o){const a=ie.useRef(void 0);return s=>{const i=o(s);return tC(a.current,i)?a.current:a.current=i}}var vm="Progress",xm=100,[nC]=Qi(vm),[aC,sC]=nC(vm),eS=x.forwardRef((o,a)=>{const{__scopeProgress:s,value:i=null,max:c,getValueLabel:d=rC,...m}=o;(c||c===0)&&!Zb(c)&&console.error(iC(`${c}`,"Progress"));const h=Zb(c)?c:xm;i!==null&&!Jb(i,h)&&console.error(oC(`${i}`,"Progress"));const p=Jb(i,h)?i:null,g=$l(p)?d(p,h):void 0;return l.jsx(aC,{scope:s,value:p,max:h,children:l.jsx(Ve.div,{"aria-valuemax":h,"aria-valuemin":0,"aria-valuenow":$l(p)?p:void 0,"aria-valuetext":g,role:"progressbar","data-state":aS(p,h),"data-value":p??void 0,"data-max":h,...m,ref:a})})});eS.displayName=vm;var tS="ProgressIndicator",nS=x.forwardRef((o,a)=>{const{__scopeProgress:s,...i}=o,c=sC(tS,s);return l.jsx(Ve.div,{"data-state":aS(c.value,c.max),"data-value":c.value??void 0,"data-max":c.max,...i,ref:a})});nS.displayName=tS;function rC(o,a){return`${Math.round(o/a*100)}%`}function aS(o,a){return o==null?"indeterminate":o===a?"complete":"loading"}function $l(o){return typeof o=="number"}function Zb(o){return $l(o)&&!isNaN(o)&&o>0}function Jb(o,a){return $l(o)&&!isNaN(o)&&o<=a&&o>=0}function iC(o,a){return`Invalid prop \`max\` of value \`${o}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${xm}\`.`}function oC(o,a){return`Invalid prop \`value\` of value \`${o}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${xm} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var sS=eS,lC=nS;const Kf=x.forwardRef(({className:o,value:a,indicatorClassName:s,...i},c)=>l.jsx(sS,{ref:c,className:ye("relative h-4 w-full overflow-hidden rounded-full bg-secondary",o),...i,children:l.jsx(lC,{className:ye("h-full w-full flex-1 bg-primary transition-all",s),style:{transform:`translateX(-${100-(a||0)}%)`}})}));Kf.displayName=sS.displayName;const ey={WAITING_FOR_PLAYERS:{label:"  ",color:"bg-gray-100 text-gray-700",icon:l.jsx(As,{className:"h-4 w-4"})},SPEECH:{label:" ",color:"bg-blue-100 text-blue-700",icon:l.jsx(Af,{className:"h-4 w-4"})},VOTING_FOR_LIAR:{label:" ",color:"bg-orange-100 text-orange-700",icon:l.jsx(o0,{className:"h-4 w-4"})},DEFENDING:{label:" ",color:"bg-purple-100 text-purple-700",icon:l.jsx(Ul,{className:"h-4 w-4"})},VOTING_FOR_SURVIVAL:{label:" ",color:"bg-red-100 text-red-700",icon:l.jsx(o0,{className:"h-4 w-4"})},GUESSING_WORD:{label:" ",color:"bg-yellow-100 text-yellow-700",icon:l.jsx(Gy,{className:"h-4 w-4"})},GAME_OVER:{label:" ",color:"bg-green-100 text-green-700",icon:l.jsx(em,{className:"h-4 w-4"})}},cC=({phase:o,timeRemaining:a,className:s})=>{const i=ey[o]||ey.WAITING_FOR_PLAYERS,c=d=>{const m=Math.floor(d/60),h=d%60;return`${m}:${h.toString().padStart(2,"0")}`};return l.jsxs("div",{className:`flex items-center space-x-3 ${s||""}`,children:[l.jsx(We,{variant:"secondary",className:`${i.color} border-0`,children:l.jsxs("div",{className:"flex items-center space-x-2",children:[i.icon,l.jsx("span",{className:"font-medium",children:i.label})]})}),a!==void 0&&a>0&&l.jsxs("div",{className:`flex items-center space-x-1 text-sm ${a<=30?"text-red-600 font-semibold":"text-gray-600"}`,children:[l.jsx(As,{className:"h-3 w-3"}),l.jsx("span",{children:c(a)})]})]})},uC=({gamePhase:o,currentPlayer:a,isMyTurn:s,isLiar:i,canVote:c,timeRemaining:d,onSubmitHint:m,onVotePlayer:h,onSubmitDefense:p,onGuessWord:g,onCastFinalVote:y,players:b,suspectedPlayer:N,currentTopic:E,currentWord:j})=>{const[S,_]=x.useState(""),[L,R]=x.useState(""),[T,A]=x.useState(null),[D,Y]=x.useState(!1),[z,I]=x.useState("");x.useEffect(()=>{_(""),R(""),A(null),I("")},[o]),x.useEffect(()=>{z&&Fe.error(z)},[z]);const G=()=>{switch(o){case"SPEECH":return{title:s?" ":"  ",description:i?"      ":` "${E}"    `,icon:l.jsx(Af,{className:"h-5 w-5"}),color:i?"text-orange-600":"text-green-600",bgColor:i?"bg-orange-50":"bg-green-50",placeholder:i?"    ...":"    ...",maxLength:100,isUrgent:d<=15};case"VOTING_FOR_LIAR":return{title:" ",description:"   ",icon:l.jsx(Bi,{className:"h-5 w-5"}),color:"text-red-600",bgColor:"bg-red-50",isUrgent:d<=20};case"DEFENDING":return{title:N?.id===a?.id?"":" ",description:N?.id===a?.id?"   ":`${N?.nickname}  `,icon:l.jsx(Ul,{className:"h-5 w-5"}),color:"text-purple-600",bgColor:"bg-purple-50",placeholder:"    ...",maxLength:200,isUrgent:d<=20};case"VOTING_FOR_SURVIVAL":return{title:" ",description:"     ",icon:l.jsx(Bi,{className:"h-5 w-5"}),color:"text-orange-600",bgColor:"bg-orange-50",isUrgent:d<=15};case"GUESSING_WORD":return{title:i?" ":" ",description:i?"    !":"     ",icon:l.jsx(lw,{className:"h-5 w-5"}),color:"text-yellow-600",bgColor:"bg-yellow-50",placeholder:"  ...",maxLength:50,isUrgent:!0};default:return{title:" ",description:"   ",icon:l.jsx(As,{className:"h-5 w-5"}),color:"text-gray-600",bgColor:"bg-gray-50"}}},Q=async()=>{if(!D){Y(!0),I("");try{switch(o){case"SPEECH":if(!S.trim()){I(" ");return}await m(S.trim());break;case"VOTING_FOR_LIAR":if(!L){I("  ");return}await h(L);break;case"DEFENDING":if(!S.trim()){I(" ");return}await p(S.trim());break;case"VOTING_FOR_SURVIVAL":if(T===null){I(" ");return}await y(T);break;case"GUESSING_WORD":if(!S.trim()){I("  ");return}await g(S.trim());break}_(""),R(""),A(null)}catch(H){I(H instanceof Error?H.message:"    ")}finally{Y(!1)}}},ae=G(),le=(s||c)&&!D,K=o==="DEFENDING"||o==="GUESSING_WORD",se=o==="VOTING_FOR_LIAR",oe=o==="VOTING_FOR_SURVIVAL",M=`game-action-helper-${o}`;return l.jsx(nm,{mode:"wait",children:l.jsx(_t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:l.jsxs(Ae,{className:`border-2 shadow-lg ${ae.isUrgent?"border-red-300 shadow-red-100":"border-gray-200"} ${ae.bgColor}`,children:[l.jsx(ct,{children:l.jsxs(ut,{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:ae.color,children:ae.icon}),l.jsx("span",{className:`text-lg ${ae.color}`,children:ae.title}),ae.isUrgent&&l.jsxs(We,{variant:"destructive",className:"animate-pulse",children:[l.jsx(Hy,{className:"mr-1 h-3 w-3"}),""]})]}),d>0&&l.jsxs("div",{className:`text-sm font-mono ${d<=10?"text-red-600 font-bold":"text-gray-600"}`,children:[l.jsx(As,{className:"inline mr-1 h-4 w-4"}),Math.floor(d/60),":",(d%60).toString().padStart(2,"0")]})]})}),l.jsx(De,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{id:M,className:"text-sm text-gray-700 leading-relaxed",children:ae.description}),o==="SPEECH"&&l.jsxs("div",{className:"relative overflow-hidden rounded-lg border border-gray-200 bg-white p-3","aria-live":"polite",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-600",children:":"}),l.jsx("span",{className:"ml-2 font-bold text-blue-600",children:E})]}),!i&&j&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-600",children:":"}),l.jsx("span",{className:"ml-2 font-bold text-green-600",children:j})]})]}),i&&l.jsxs("div",{className:"pointer-events-none absolute inset-0 flex flex-col items-center justify-center gap-2 bg-gradient-to-br from-orange-500/15 via-background/95 to-orange-500/15 backdrop-blur-sm",role:"note",children:[l.jsx(Uy,{className:"h-6 w-6 text-orange-500","aria-hidden":"true"}),l.jsx("span",{className:"text-sm font-semibold text-orange-600",children:"     "})]})]}),o==="SPEECH"&&s&&l.jsxs("div",{className:"space-y-3 rounded-lg border border-blue-200 bg-blue-50 p-4 text-sm text-blue-800",role:"note",children:[l.jsxs("div",{className:"flex items-center gap-2 font-semibold text-blue-700",children:[l.jsx(Af,{className:"h-4 w-4"}),"     "]}),l.jsxs("p",{children:["      ",l.jsx("strong",{children:""}),"      ."]}),l.jsx("p",{className:"text-xs text-blue-600/80",children:"Shift+Enter    ,       ."})]}),le&&o!=="SPEECH"&&l.jsxs("div",{className:"space-y-3",children:[K&&l.jsxs("div",{className:"space-y-2",children:[o==="DEFENDING"?l.jsx(fm,{placeholder:ae.placeholder,value:S,onChange:H=>_(H.target.value),maxLength:ae.maxLength,rows:4,className:"resize-none","aria-describedby":M,"aria-invalid":!!z}):l.jsx(Wn,{placeholder:ae.placeholder,value:S,onChange:H=>_(H.target.value),maxLength:ae.maxLength,"aria-describedby":M,"aria-invalid":!!z,onKeyPress:H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),Q())}}),ae.maxLength&&l.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[l.jsx("div",{children:o==="SPEECH"&&l.jsxs("span",{className:"flex items-center",children:[l.jsx(ow,{className:"mr-1 h-3 w-3"}),": ",i?"   ":"   "]})}),l.jsxs("span",{children:[S.length,"/",ae.maxLength]})]})]}),se&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-sm font-medium text-gray-700",id:"vote-instruction",children:"   :"}),l.jsx("div",{className:"grid grid-cols-1 gap-2",role:"listbox","aria-labelledby":"vote-instruction",children:b.filter(H=>H.id!==a?.id&&H.isAlive!==!1).map(H=>l.jsx("button",{onClick:()=>R(H.id),className:`p-3 rounded-lg border text-left transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-red-400 ${L===H.id?"border-red-400 bg-red-50 text-red-800":"border-gray-200 bg-white hover:border-red-200"}`,"aria-pressed":L===H.id,"aria-selected":L===H.id,"aria-label":`${H.nickname} `,role:"option",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"font-medium",children:H.nickname}),L===H.id&&l.jsx(Gl,{className:"h-4 w-4 text-red-600","aria-hidden":"true"})]})},H.id))})]}),oe&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"text-sm font-medium text-gray-700",id:"final-vote-instruction",children:[N?.nickname," ?"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",role:"group","aria-labelledby":"final-vote-instruction",children:[l.jsx("button",{onClick:()=>A(!0),className:`p-3 rounded-lg border transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-red-400 ${T===!0?"border-red-400 bg-red-50 text-red-800":"border-gray-200 bg-white hover:border-red-200"}`,"aria-pressed":T===!0,"aria-label":`${N?.nickname??" "}  `,children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"font-medium",children:""}),l.jsx("div",{className:"text-xs text-gray-600",children:" "})]})}),l.jsx("button",{onClick:()=>A(!1),className:`p-3 rounded-lg border transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-green-400 ${T===!1?"border-green-400 bg-green-50 text-green-800":"border-gray-200 bg-white hover:border-green-200"}`,"aria-pressed":T===!1,"aria-label":`${N?.nickname??" "}  `,children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"font-medium",children:""}),l.jsx("div",{className:"text-xs text-gray-600",children:" "})]})})]})]}),z&&l.jsx("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200 text-red-800 text-sm",role:"alert","aria-live":"assertive",children:z}),l.jsx(ve,{onClick:Q,disabled:D||K&&!S.trim()||se&&!L||oe&&T===null,className:"w-full",size:"lg",children:D?l.jsxs(l.Fragment,{children:[l.jsx(Ds,{className:"mr-2 h-4 w-4 animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(zy,{className:"mr-2 h-4 w-4"}),o==="SPEECH"&&" ",o==="VOTING_FOR_LIAR"&&" ",o==="DEFENDING"&&" ",o==="VOTING_FOR_SURVIVAL"&&" ",o==="GUESSING_WORD"&&" "]})})]}),!le&&o!=="WAITING_FOR_PLAYERS"&&o!=="GAME_OVER"&&l.jsxs("div",{className:"text-center py-6 text-gray-500",children:[l.jsx(As,{className:"mx-auto h-8 w-8 mb-2 opacity-50"}),l.jsxs("div",{className:"text-sm",children:[!s&&"    ",s&&!c&&"  "]})]})]})})]})},o)})},$i=x.forwardRef(({className:o,...a},s)=>l.jsx(Ty,{ref:s,className:ye("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",o),...a}));$i.displayName=Ty.displayName;const dC=x.forwardRef(({className:o,...a},s)=>l.jsx(jy,{ref:s,className:ye("aspect-square h-full w-full",o),...a}));dC.displayName=jy.displayName;const Fi=x.forwardRef(({className:o,...a},s)=>l.jsx(Ry,{ref:s,className:ye("flex h-full w-full items-center justify-center rounded-full bg-muted",o),...a}));Fi.displayName=Ry.displayName;const rS=()=>{const{gameNumber:o,gamePhase:a,currentPlayer:s,players:i,currentTopic:c,currentWord:d,currentLiar:m,currentTurnPlayerId:h,timer:p,voting:g,chatMessages:y,isLoading:b,error:N,isLiar:E,setLoading:j,setError:S,addVote:_,setChatMessages:L}=mt(),R=x.useCallback(async M=>{if(!o)throw new Error("  .");j(!0),S(null);try{const H=await Un.submitHint(o,M);return j(!1),H}catch(H){const ee=H instanceof Error?H.message:"  .";throw S(ee),j(!1),H}},[o,j,S]),T=x.useCallback(async M=>{if(!o)throw new Error("  .");j(!0),S(null);try{const H=await Un.castVoteForLiar(o,M);if(s){const ee=i.find(ue=>ue.userId===M||ue.id===M.toString());_(s.id,s.nickname,ee?ee.id:M.toString(),ee?ee.nickname:"  ")}return j(!1),H}catch(H){const ee=H instanceof Error?H.message:" .";throw S(ee),j(!1),H}},[o,s,i,j,S,_]),A=x.useCallback(async M=>{if(!o)throw new Error("  .");j(!0),S(null);try{const H=await Un.submitDefense(o,M);return j(!1),H}catch(H){const ee=H instanceof Error?H.message:"  .";throw S(ee),j(!1),H}},[o,j,S]),D=x.useCallback(async()=>{if(!o)throw new Error("  .");j(!0),S(null);try{const M=await Un.endDefensePhase(o);return j(!1),M}catch(M){const H=M instanceof Error?M.message:"  .";throw S(H),j(!1),M}},[o,j,S]),Y=x.useCallback(async M=>{if(!o)throw new Error("  .");j(!0),S(null);try{const H=await Un.castFinalVote(o,M);return j(!1),H}catch(H){const ee=H instanceof Error?H.message:"  .";throw S(ee),j(!1),H}},[o,j,S]),z=x.useCallback(async M=>{if(!o)throw new Error("  .");j(!0),S(null);try{const H=await Un.guessWord(o,M);return j(!1),H}catch(H){const ee=H instanceof Error?H.message:"  .";throw S(ee),j(!1),H}},[o,j,S]),I=x.useCallback(async()=>{if(!o)throw new Error("  .");j(!0),S(null);try{const M=await Un.endRound(o);return j(!1),M}catch(M){const H=M instanceof Error?M.message:"  .";throw S(H),j(!1),M}},[o,j,S]),G=x.useCallback(async()=>{if(!o)throw new Error("  .");j(!0),S(null);try{const M=await Un.getGameResult(o);return j(!1),M}catch(M){const H=M instanceof Error?M.message:"   .";throw S(H),j(!1),M}},[o,j,S]),Q=x.useCallback(async(M,H="GENERAL")=>{if(!o)throw new Error("  .");try{await Un.sendChatMessage(o,M,H)}catch(ee){const ue=ee instanceof Error?ee.message:"   .";throw S(ue),ee}},[o,S]),ae=x.useCallback(async(M=50)=>{if(!o)throw new Error("  .");try{const H=await Un.getChatHistory(o,M);return L(H),H}catch(H){const ee=H instanceof Error?H.message:"   .";throw S(ee),H}},[o,L,S]),le=x.useCallback(()=>s&&h===s.id,[s,h]),K=x.useCallback(()=>s?.isAlive!==!1,[s]),se=x.useCallback(()=>g.isActive&&K()&&!g.votes[s?.id||""],[g,K,s]),oe=x.useCallback(()=>{switch(a){case"WAITING_FOR_PLAYERS":return{title:"  ",description:"   .",canAct:!1};case"SPEECH":return{title:"  ",description:le()?" .":"    .",canAct:le()&&!E};case"VOTING_FOR_LIAR":return{title:" ",description:"   .",canAct:se()};case"DEFENDING":return{title:" ",description:m===s?.id?" .":"  .",canAct:m===s?.id};case"VOTING_FOR_SURVIVAL":return{title:" ",description:"   .",canAct:se()};case"GUESSING_WORD":return{title:" ",description:E?" .":"   .",canAct:E};case"GAME_OVER":return{title:" ",description:" .",canAct:!1};default:return{title:"   ",description:"",canAct:!1}}},[a,le,E,se,m,s]);return{gameNumber:o,gamePhase:a,currentPlayer:s,players:i,currentTopic:c,currentWord:d,currentLiar:m,currentTurnPlayerId:h,timer:p,voting:g,chatMessages:y,isLoading:b,error:N,submitHint:R,voteForLiar:T,submitDefense:A,endDefensePhase:D,castFinalVote:Y,guessWord:z,endRound:I,getGameResult:G,sendChatMessage:Q,loadChatHistory:ae,isMyTurn:le,isLiar:E,isAlive:K,canVote:se,getPhaseInfo:oe}},fC=({gameResult:o,currentRound:a,totalRounds:s,onNextRound:i,onReturnToLobby:c})=>{const[d,m]=x.useState(o||null),{getGameResult:h,isLoading:p}=rS();if(x.useEffect(()=>{!d&&!p&&h().then(m).catch(console.error)},[d,p,h]),p||!d)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),l.jsx("div",{className:"text-muted-foreground",children:"   ..."})]})});const g=a>=s,y=d.winningTeam,b=d.players.filter(S=>S.isWinner),N=d.players.filter(S=>!S.isWinner),E=d.gameStatistics??{currentRound:a,totalRounds:s,totalDuration:0,averageRoundDuration:0},j=S=>{const _=Math.floor(S/60),L=S%60;return`${_}:${L.toString().padStart(2,"0")}`};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(Ae,{className:`border-2 ${y==="CITIZENS"?"border-blue-500":"border-orange-500"}`,children:l.jsxs(ct,{className:"text-center",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx(em,{className:`h-16 w-16 ${y==="CITIZENS"?"text-blue-500":"text-orange-500"}`})}),l.jsx(ut,{className:"text-2xl",children:y==="CITIZENS"?"  !":"  !"}),l.jsx("div",{className:"text-muted-foreground",children:d.reason??""})]})}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs(Ae,{children:[l.jsx(ct,{children:l.jsxs(ut,{className:"flex items-center text-green-600",children:[l.jsx(Os,{className:"mr-2 h-5 w-5"}),""]})}),l.jsx(De,{children:l.jsx("div",{className:"space-y-3",children:b.map(S=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-950/20 rounded-lg",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx($i,{className:"h-8 w-8",children:l.jsx(Fi,{children:S.nickname.charAt(0).toUpperCase()})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:S.nickname}),l.jsx(We,{variant:S.role==="LIAR"?"destructive":"default",className:"text-xs",children:S.role==="LIAR"?"":""})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"font-bold text-green-600",children:["+",S.score??0]}),l.jsx("div",{className:"text-xs text-muted-foreground",children:""})]})]},S.id))})})]}),l.jsxs(Ae,{children:[l.jsx(ct,{children:l.jsxs(ut,{className:"flex items-center text-red-600",children:[l.jsx(Jn,{className:"mr-2 h-5 w-5"}),""]})}),l.jsx(De,{children:l.jsx("div",{className:"space-y-3",children:N.map(S=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx($i,{className:"h-8 w-8",children:l.jsx(Fi,{children:S.nickname.charAt(0).toUpperCase()})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:S.nickname}),l.jsx(We,{variant:S.role==="LIAR"?"destructive":"default",className:"text-xs",children:S.role==="LIAR"?"":""})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"font-bold text-red-600",children:S.score??0}),l.jsx("div",{className:"text-xs text-muted-foreground",children:""})]})]},S.id))})})]})]}),l.jsxs(Ae,{children:[l.jsx(ct,{children:l.jsxs(ut,{className:"flex items-center",children:[l.jsx(Bi,{className:"mr-2 h-5 w-5"})," "]})}),l.jsx(De,{children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-primary",children:E.currentRound??a}),l.jsx("div",{className:"text-sm text-muted-foreground",children:" "})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-primary",children:E.totalRounds??s}),l.jsx("div",{className:"text-sm text-muted-foreground",children:" "})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-primary",children:j(E.totalDuration??0)}),l.jsx("div",{className:"text-sm text-muted-foreground",children:" "})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-primary",children:j(E.averageRoundDuration??0)}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"  "})]})]})})]}),l.jsxs("div",{className:"flex justify-center space-x-4",children:[!g&&i&&l.jsx(ve,{onClick:i,size:"lg",className:"min-w-[120px]",children:" "}),c&&l.jsx(ve,{onClick:()=>c?.(),variant:g?"default":"outline",size:"lg",className:"min-w-[120px]",children:g?" ":" "})]}),!g&&l.jsx(Ae,{className:"border-muted",children:l.jsx(De,{className:"pt-6",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"  "}),l.jsx("div",{className:"flex justify-center space-x-2",children:Array.from({length:s},(S,_)=>l.jsx("div",{className:`w-3 h-3 rounded-full ${_<a?"bg-primary":_===a?"bg-primary/50":"bg-muted"}`},_))}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[a,"/",s,"  "]})]})})}),g&&l.jsx(Ae,{className:"border-muted bg-muted/30",children:l.jsx(De,{className:"pt-6",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-medium mb-2",children:"   !"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:".         ."})]})})})]})},mC=({events:o,maxEvents:a=50,showTimestamps:s=!0,autoScroll:i=!0,className:c})=>{const d=x.useRef(null),m=(o||[]).slice(-a);return x.useEffect(()=>{i&&d.current&&(d.current.scrollTop=d.current.scrollHeight)},[m,i]),l.jsx("div",{className:c,"aria-label":" ",children:l.jsxs("ul",{ref:d,className:"space-y-1 max-h-64 overflow-y-auto text-xs",children:[m.map(h=>l.jsxs("li",{className:"flex gap-2 items-start",children:[s&&l.jsx("span",{className:"text-gray-400 shrink-0",children:new Date(h.timestamp).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})}),l.jsxs("span",{className:h.highlight?"font-semibold text-primary-600":"",children:[h.type,h.content?`: ${h.content}`:""]})]},h.id)),m.length===0&&l.jsx("li",{className:"text-gray-400",children:" "})]})})},hC=new Set(["VOTING_FOR_LIAR","VOTING_FOR_SURVIVAL"]),Tl=240,ty={DISCUSSION:"",GENERAL:"",HINT:"",DEFENSE:"",SYSTEM:"",POST_ROUND:" ",WAITING_ROOM:""},pC=o=>new Intl.DateTimeFormat("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}).format(new Date(o)),ny={DISCUSSION:"border-border/70 bg-background/95 text-foreground",GENERAL:"border-border/70 bg-background/95 text-foreground",HINT:"border-sky-500/50 bg-sky-50 text-sky-900 shadow-sm dark:bg-sky-500/15 dark:text-sky-100",DEFENSE:"border-rose-500/60 bg-rose-50 text-rose-900 shadow-sm dark:bg-rose-500/15 dark:text-rose-100",SYSTEM:"border-red-500/60 bg-red-50 text-red-900 shadow-sm dark:bg-red-500/20 dark:text-red-100",POST_ROUND:"border-amber-500/60 bg-amber-50 text-amber-900 shadow-sm dark:bg-amber-500/15 dark:text-amber-100",WAITING_ROOM:"border-border/70 bg-background/95 text-foreground",DEFAULT:"border-border/70 bg-background/95 text-foreground"},gC=["DISCUSSION","HINT","DEFENSE"];function bC(){const[o,a]=x.useState(()=>typeof window>"u"||!window.matchMedia?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return x.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const s=window.matchMedia("(prefers-reduced-motion: reduce)");(()=>{a(s.matches)})();const c=d=>{a(d.matches)};return s.addEventListener("change",c),()=>s.removeEventListener("change",c)},[]),o}const yC=({messages:o,players:a,currentPlayer:s,typingPlayers:i,gamePhase:c,isLoading:d=!1,error:m=null,onSendMessage:h,onReportMessage:p,onReloadHistory:g,className:y=""})=>{const[b,N]=x.useState(""),[E,j]=x.useState(!1),[S,_]=x.useState(!1),L=x.useRef(null),R=x.useRef(null),[T,A]=x.useState(!1),[D,Y]=x.useState(null),[z,I]=x.useState(!1),[G,Q]=x.useState(null),[ae,le]=x.useState(!0),[K,se]=x.useState(!1),oe=x.useRef(null),[M,H]=x.useState("DISCUSSION"),ee=bC(),ue=x.useRef(null),pe=x.useRef(null),k=x.useRef(null),C=x.useRef(null),P=x.useRef(!1),W=x.useId(),ne=x.useMemo(()=>{const X=new Map;return a.forEach(je=>{X.set(je.id,je),je.userId!=null&&X.set(je.userId.toString(),je),je.nickname&&X.set(je.nickname,je)}),X},[a]),de=x.useCallback(X=>{if(X.playerId&&ne.has(X.playerId))return ne.get(X.playerId);if(X.userId!=null){const je=X.userId.toString();if(ne.has(je))return ne.get(je)}if(X.playerNickname&&ne.has(X.playerNickname))return ne.get(X.playerNickname);if(X.nickname&&ne.has(X.nickname))return ne.get(X.nickname)},[ne]);x.useEffect(()=>{if(!ae)return;const X=oe.current;X&&X.scrollTo({top:X.scrollHeight,behavior:ee?"auto":"smooth"})},[ae,o,ee]),x.useEffect(()=>{const X=o[o.length-1];if(!X){k.current=null,Q(null);return}if(!P.current){P.current=!0,k.current=X.id;return}X.id!==k.current&&(k.current=X.id,Q(X.id),ae||se(!0),ue.current&&clearTimeout(ue.current),ue.current=setTimeout(()=>Q(null),1800))},[o,ae]);const re=x.useMemo(()=>i?Array.from(i).map(X=>(ne.get(X)||ne.get(X.toString()))?.nickname??X).filter((X,je,qe)=>X&&qe.indexOf(X)===je):[],[i,ne]),ce=x.useMemo(()=>!hC.has(c),[c]),xe=x.useMemo(()=>gC.map(X=>({value:X,label:ty[X]??X})),[]),Ne=o.length,Ce=Tl-b.length,Me=Math.round(Tl*.4),nt=Math.round(Tl*.2),ht=Ce<=nt?"text-destructive font-semibold":Ce<=Me?"text-amber-600 dark:text-amber-400 font-medium":"text-muted-foreground",Vt=x.useMemo(()=>a.filter(X=>X.isOnline??X.isConnected).length,[a]),wt=x.useCallback(async X=>{const qe=(X??b).trim();if(!(!qe||S)){_(!0),le(!0),se(!1),N(""),R.current?.focus({preventScroll:!0});try{await h(qe,M),Y(null);const Pe=ee?200:700;I(!0),pe.current&&clearTimeout(pe.current),pe.current=setTimeout(()=>I(!1),Pe)}catch(Pe){throw console.error("Failed to send chat message",Pe),Y("  .   ."),Fe.error("  .   ."),N(qe),R.current?.focus({preventScroll:!0}),Pe}finally{_(!1),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{R.current?.focus({preventScroll:!0}),C.current=null},0)}}},[b,S,h,ee,M]),Xe=x.useCallback(()=>{wt().catch(()=>{})},[wt]),Pn=x.useCallback(()=>{b.trim()&&wt(b).catch(()=>{})},[b,wt]),At=x.useCallback(X=>{if(X.key==="Enter"&&!X.shiftKey){if(X.nativeEvent.isComposing)return;X.preventDefault(),Xe()}},[Xe]),tn=x.useCallback(X=>{X.preventDefault(),Xe()},[Xe]),vn=x.useCallback(X=>{if(p){p(X);return}Fe.info(" .",{description:`${X.playerNickname??"  "}: ${X.content}`})},[p]),at=x.useCallback(()=>{g&&g().catch(X=>{console.error("Failed to reload chat history",X),Fe.error("    .")})},[g]),Bt=x.useCallback(()=>{const X=oe.current;if(!X)return;const qe=X.scrollHeight-X.scrollTop-X.clientHeight<=48;le(Pe=>Pe===qe?Pe:qe),qe&&se(!1)},[]),Vn=x.useCallback(()=>{const X=oe.current;X&&(X.scrollTo({top:X.scrollHeight,behavior:"smooth"}),le(!0),se(!1))},[]),Bn=["flex w-full max-w-full flex-col overflow-hidden rounded-xl border border-border/70 shadow-lg motion-safe:transition-all motion-safe:duration-200",E?"fixed left-1/2 top-1/2 z-50 w-[min(1200px,95vw)] h-[74vh] -translate-x-1/2 -translate-y-1/2 bg-background/95 backdrop-blur-md":"relative mx-auto w-full max-w-[1120px] h-[46vh] min-h-[18rem] sm:h-[52vh] sm:min-h-[20rem]",y].filter(Boolean).join(" "),Ot=D?`${W}-send-error`:void 0,pt=["absolute bottom-3 right-4 flex items-center gap-2 rounded-full bg-primary/90 px-3 py-1.5 text-xs font-semibold text-primary-foreground shadow-lg",ee?K?"pointer-events-auto opacity-100":"pointer-events-none opacity-0":K?"pointer-events-auto translate-y-0 opacity-100 motion-safe:transition-all motion-safe:duration-200":"pointer-events-none translate-y-2 opacity-0 motion-safe:transition-all motion-safe:duration-200"].filter(Boolean).join(" "),ge=Ne>0;return x.useEffect(()=>()=>{ue.current&&clearTimeout(ue.current),pe.current&&clearTimeout(pe.current),C.current&&clearTimeout(C.current)},[]),l.jsxs(Ae,{className:Bn,children:[l.jsx(ct,{className:"border-b border-border/60 bg-muted/30 pb-3 pt-3",children:l.jsxs(ut,{className:"flex items-center justify-between text-base font-semibold sm:text-lg",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold sm:text-base",children:[l.jsx(Py,{className:"h-5 w-5 text-primary"}),l.jsx("span",{children:" "}),Ne>0&&l.jsx(We,{variant:"secondary",className:"rounded-full px-2 py-0.5 text-xs",children:Ne}),d&&l.jsx(Ds,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Jn,{className:"h-4 w-4"}),Vt]}),l.jsx(ve,{variant:"ghost",size:"sm",onClick:()=>j(X=>!X),className:"h-7 px-2 text-xs","aria-pressed":E,"aria-label":"  ",title:"  ",children:E?"":""})]})]})}),l.jsxs(De,{className:"flex h-full min-h-0 flex-1 flex-col gap-3",children:[l.jsxs("div",{className:"flex h-full min-h-0 flex-1 flex-col gap-3 overflow-hidden",children:[m&&l.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-md border border-destructive/40 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:[l.jsx("span",{className:"truncate",children:m}),g&&l.jsxs(ve,{variant:"outline",size:"xs",onClick:at,className:"h-7",children:[l.jsx(Qa,{className:"mr-1 h-3 w-3"}),"  "]})]}),l.jsxs("div",{ref:oe,onScroll:Bt,role:"region","aria-label":"  ",tabIndex:0,className:`relative flex h-full flex-1 overflow-y-auto rounded-2xl border border-border/60 bg-muted/40 px-4 py-4 shadow-inner transition-colors scroll-smooth chat-scroll-area ${E?"max-h-[74vh]":""}`,children:[ge?l.jsxs("div",{className:"space-y-2.5 sm:space-y-3",role:"log","aria-live":"polite","aria-relevant":"additions text",children:[o.map(X=>{const je=de(X),qe=!!s&&(X.playerId===s.id||X.userId!=null&&s.userId===X.userId||X.playerNickname===s.nickname),Pe=X.type==="SYSTEM"||X.playerNickname?.toUpperCase()==="SYSTEM",un=!Pe&&je?.isHost===!0,nn=Pe?"":je?.nickname??X.playerNickname??"",me=[];if(Pe)me.push({label:"",variant:"outline"});else{je?.isHost&&me.push({label:"",variant:"default"});const st=s?.id===je?.id;st&&je?.role==="LIAR"&&me.push({label:"",variant:"outline"}),st&&je?.role==="CITIZEN"&&me.push({label:"",variant:"outline"})}qe&&me.push({label:"",variant:"secondary"});const ot=X.type==="DISCUSSION"||X.type==="GENERAL"||X.type==="WAITING_ROOM"?null:ty[X.type],Gt=!qe&&X.type!=="SYSTEM",Mn=nn.charAt(0).toUpperCase(),qt=Pe?"border-red-500/70 bg-red-50 text-red-900 shadow-sm dark:bg-red-500/20 dark:text-red-100":un?"border-red-400/60 bg-red-50 text-red-900 shadow-sm dark:bg-red-500/15 dark:text-red-100":qe?"border-primary/70 bg-primary text-primary-foreground shadow-lg shadow-primary/20":ny[X.type]??ny.DEFAULT,Us=qe?"justify-end":"justify-start",ns=qe?"items-end text-right":"items-start text-left",qn=Pe||un?"text-red-900 dark:text-red-100":qe?"text-primary-foreground/95":"text-foreground/90",Gs=(()=>{switch(X.type){case"HINT":return"border-sky-500 text-sky-700 dark:border-sky-400 dark:text-sky-200";case"DEFENSE":return"border-rose-500 text-rose-600 dark:border-rose-400 dark:text-rose-200";case"SYSTEM":return"border-red-500 text-red-600 dark:border-red-400 dark:text-red-200";case"POST_ROUND":return"border-amber-500 text-amber-700 dark:border-amber-400 dark:text-amber-200";default:return"border-muted-foreground/40 text-muted-foreground"}})(),Te=G===X.id,dt=Te?"ring-2 ring-primary/50 shadow-[0_0_0_4px_rgba(59,130,246,0.18)]":"";return l.jsx("div",{className:`flex ${Us}`,children:l.jsx("div",{className:`flex w-full flex-col gap-1.5 ${ns}`,children:l.jsx("div",{className:`rounded-2xl border px-3.5 py-1.5 transition-all duration-150 ${qt} ${dt}`,"data-message-type":X.type,"data-highlighted":Te,children:l.jsxs("div",{className:"flex w-full items-start gap-2",children:[l.jsx($i,{className:"h-6 w-6 shrink-0 shadow-sm ring-1 ring-border/40",children:l.jsx(Fi,{className:"text-xs uppercase",children:Mn})}),l.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-sm font-semibold leading-none tracking-tight",children:nn}),me.map(({label:st,variant:Tt})=>l.jsx(We,{variant:Tt,className:"rounded-full px-2 py-0.5 text-[10px] uppercase tracking-wide",children:st},st)),ot&&l.jsx(We,{variant:"outline",className:`rounded-full px-2 py-0.5 text-[10px] uppercase tracking-wide ${Gs}`,children:ot})]}),l.jsx("p",{className:`min-w-0 flex-1 whitespace-pre-wrap break-words text-[13.5px] leading-tight sm:text-[14px] ${qn}`,children:X.content}),l.jsx("span",{className:"shrink-0 text-[11px] text-muted-foreground",children:pC(X.timestamp)})]}),Gt&&l.jsx(ve,{size:"icon",variant:"ghost",className:"h-6 w-6 text-muted-foreground transition-colors hover:text-foreground",onClick:()=>vn(X),"aria-label":"",title:" ",children:l.jsx(cw,{className:"h-3 w-3"})})]})})})},X.id)}),l.jsx("div",{ref:L})]}):l.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"  "}),l.jsxs("button",{type:"button",className:pt,onClick:Vn,"aria-live":"polite",children:[l.jsx(uw,{className:"h-3.5 w-3.5"})," "]})]})]}),re.length>0&&l.jsxs("div",{className:"text-xs italic text-muted-foreground",children:[re.join(", "),"   ..."]}),l.jsxs("form",{className:"flex flex-col gap-1.5",onSubmit:tn,noValidate:!0,children:[l.jsxs("div",{className:`group flex items-center gap-2 rounded-2xl border border-border/60 bg-background/90 px-3 py-1.5 motion-safe:transition-all motion-safe:duration-200 ${T?"border-primary/70 shadow-[0_0_0_3px_rgba(59,130,246,0.18)]":""} ${z?"border-emerald-500/60 shadow-[0_0_0_3px_rgba(16,185,129,0.18)]":""}`,children:[l.jsx(Wn,{ref:R,className:"h-10 flex-1 border-none bg-transparent text-base shadow-none focus-visible:ring-0 focus-visible:ring-offset-0",placeholder:ce?"  ...":"     ",value:b,onChange:X=>{const je=X.target.value;N(je),D&&Y(null)},onKeyDown:At,onFocus:()=>A(!0),onBlur:()=>A(!1),disabled:!ce,maxLength:Tl,"aria-invalid":D?!0:void 0,"aria-describedby":Ot}),l.jsx(ve,{type:"submit",disabled:!ce||S||b.trim().length===0,size:"sm",className:`relative h-10 px-4 motion-safe:transition-all motion-safe:duration-200 ${z?"bg-emerald-500 text-emerald-50 hover:bg-emerald-500":""}`,children:S?l.jsx(Ds,{className:"h-4 w-4 animate-spin"}):z?l.jsx(Ql,{className:"h-4 w-4"}):l.jsx(zy,{className:"h-4 w-4 motion-safe:transition-transform motion-safe:duration-200 motion-safe:group-hover:translate-x-0.5"})})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-1.5 text-[10.5px] text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"whitespace-nowrap",children:"Shift+Enter "}),l.jsxs("span",{className:`whitespace-nowrap transition-colors ${ht}`,"aria-live":"polite",children:["  ",Math.max(Ce,0)]})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:xe.map(({value:X,label:je})=>{const qe=M===X;return l.jsx(ve,{type:"button",variant:qe?"secondary":"ghost",size:"xs",className:"h-7 px-3",onClick:()=>H(X),"aria-pressed":qe,disabled:S,children:je},X)})})]}),l.jsx("div",{className:"min-h-[1.25rem]","aria-live":"assertive",children:D&&l.jsxs("div",{id:Ot,role:"alert",className:"flex items-center justify-between gap-3 rounded-lg border border-destructive/50 bg-destructive/10 px-3 py-1.5 text-xs text-destructive",children:[l.jsx("span",{className:"truncate",children:D}),l.jsx(ve,{variant:"outline",size:"xs",onClick:Pn,disabled:S,children:" "})]})})]}),l.jsx("span",{className:"sr-only",role:"status","aria-live":"polite",children:z?" .":""}),!ce&&l.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"     "})]})]})};var vC="Separator",ay="horizontal",xC=["horizontal","vertical"],iS=x.forwardRef((o,a)=>{const{decorative:s,orientation:i=ay,...c}=o,d=SC(i)?i:ay,h=s?{role:"none"}:{"aria-orientation":d==="vertical"?d:void 0,role:"separator"};return l.jsx(Ve.div,{"data-orientation":d,...h,...c,ref:a})});iS.displayName=vC;function SC(o){return xC.includes(o)}var oS=iS;const Fl=x.forwardRef(({className:o,orientation:a="horizontal",decorative:s=!0,...i},c)=>l.jsx(oS,{ref:c,decorative:s,orientation:a,className:ye("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",o),...i}));Fl.displayName=oS.displayName;const NC={hidden:{opacity:0,y:12},visible:{opacity:1,y:0,transition:{duration:.25}}};function EC({summary:o,history:a,players:s}){const c=(d=>d?s.find(h=>h.id===d||String(h.userId)===d)?.nickname:void 0)(o.suspectedPlayerId);return l.jsx(_t.div,{variants:NC,initial:"hidden",animate:"visible",children:l.jsxs(Ae,{className:"border-primary/30",children:[l.jsxs(ct,{className:"pb-4",children:[l.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[l.jsxs(ut,{className:"text-lg",children:[" ",o.round,"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[l.jsx(We,{variant:"secondary",children:new Date(o.concludedAt).toLocaleTimeString()}),o.topic&&l.jsxs(We,{variant:"outline",children:[": ",o.topic]})]})]}),c&&l.jsxs("p",{className:"mt-2 text-sm text-muted-foreground",children:["  : ",l.jsx("span",{className:"font-medium text-foreground",children:c})]})]}),l.jsx(Fl,{className:"mx-6"}),l.jsx(De,{className:"pt-4",children:l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-2",children:" "}),l.jsxs("div",{className:"space-y-2",children:[o.scoreboard.slice(0,5).map((d,m)=>l.jsxs("div",{className:"flex items-center justify-between rounded-md border border-border/60 bg-card/50 px-3 py-2 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(We,{variant:m===0?"default":"secondary",children:[m+1,""]}),l.jsx("span",{children:d.nickname})]}),l.jsxs("div",{className:"text-sm font-semibold text-foreground",children:[d.score,""]})]},`${d.playerId}-${m}`)),o.scoreboard.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"   .    ."})]})]}),a.length>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"  "}),l.jsx("div",{className:"space-y-3 text-xs text-muted-foreground",children:a.map(d=>l.jsx(x.Fragment,{children:l.jsxs("div",{className:"rounded-md border border-dashed border-border/70 p-3",children:[l.jsxs("div",{className:"flex items-center justify-between font-medium text-foreground",children:[l.jsxs("span",{children:[" ",d.round]}),d.topic&&l.jsxs("span",{className:"text-xs",children:[": ",d.topic]})]}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:d.scoreboard.slice(0,3).map((m,h)=>l.jsxs(We,{variant:"outline",children:[m.nickname," ",m.score,""]},`${d.round}-${m.playerId}-${h}`))})]})},`${d.round}-${d.concludedAt}`))})]})]})})]})})}const lS=()=>{const o=Ls(G=>({connectionError:G.connectionError,setConnectionError:G.setConnectionError,setConnectionState:G.setConnectionState,resetGameData:G.resetGameData,sendChatMessage:G.sendChatMessage,castVote:G.castVote,startGame:G.startGame,currentPlayer:G.currentPlayer})),{connectionError:a,setConnectionError:s,setConnectionState:i,resetGameData:c,sendChatMessage:d,castVote:m,startGame:h,currentPlayer:p}=mt(o),g=Ls(G=>({status:G.status,connect:G.connect,disconnect:G.disconnect})),{status:y,connect:b,disconnect:N}=cn(g),[E,j]=x.useState(!1),S=y==="connected",_=x.useMemo(()=>y==="error"&&!a?"  ":a,[y,a]);x.useEffect(()=>{i(y==="connected"),y==="connected"&&s(null)},[y,s,i]);const L=x.useCallback(async()=>{if(!(E||S)){j(!0),s(null);try{await b(),Fe.success("  ")}catch(G){const Q=G instanceof Error?G.message:" ";throw s(Q),Fe.error(Q),G}finally{j(!1)}}},[b,S,E,s]),R=x.useCallback(()=>{N()},[N]),T=x.useCallback(async()=>(N(),await new Promise(G=>setTimeout(G,500)),L()),[L,N]),A=x.useCallback(G=>{if(G){if(!S){const Q="  ";s(Q),Fe.error(Q);return}He.subscribeToGame(G),c()}},[S,c,s]),D=x.useCallback(()=>{const{gameNumber:G}=mt.getState();G!=null&&He.unsubscribeFromGame(G.toString()),c(),Dv()},[c]),Y=x.useCallback((G,Q="DISCUSSION")=>d(G,Q),[d]),z=x.useCallback(G=>{const Q=p?.id;if(!Q){console.warn("    .");return}m(Q,G)},[m,p]),I=x.useCallback(()=>{h()},[h]);return{isConnected:S,connectionError:_,connect:L,disconnect:R,retry:T,joinGame:A,leaveGame:D,sendChatMessage:Y,castVote:z,startGame:I}},wC=({className:o,showDetails:a=!1,compact:s=!1})=>{const{isConnected:i,connectionError:c,retry:d}=lS(),m=Ls(L=>({realtimeStatus:L.status,avgLatency:L.avgLatency,backlog:L.messageQueue.length+Object.keys(L.pendingMessages).length})),h=cn(m),{realtimeStatus:p,avgLatency:g,backlog:y}=h,b=p==="reconnecting",N=p==="connected"&&(y>0||(g??0)>1500),E=ie.useMemo(()=>{if(y>0)return` ${y}`;if(g!=null&&g>0)return`${Math.round(g)}ms`},[g,y]),S=c||p==="error"?{status:"error",icon:dw,text:" ",color:"text-red-500",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800"}:b?{status:"reconnecting",icon:Ds,text:" ...",color:"text-yellow-500",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800"}:N?{status:"degraded",icon:fw,text:"  ",color:"text-amber-500",bgColor:"bg-amber-50 dark:bg-amber-900/20",borderColor:"border-amber-200 dark:border-amber-800"}:i||p==="connected"?{status:"connected",icon:Gl,text:" ",color:"text-green-500",bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800"}:{status:"connecting",icon:Ds,text:" ...",color:"text-yellow-500",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800"},_=S.icon;return s?l.jsxs("div",{className:ye("flex items-center gap-2",o),children:[l.jsx(_,{className:ye("w-4 h-4",S.color,(S.status==="connecting"||S.status==="reconnecting")&&"animate-spin")}),l.jsx("span",{className:ye("text-sm",S.color),children:S.text}),E&&S.status!=="error"&&l.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",E,")"]})]}):l.jsx(Ae,{className:ye("transition-all duration-200",S.bgColor,S.borderColor,o),children:l.jsxs(De,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(_,{className:ye("w-5 h-5",S.color,(S.status==="connecting"||S.status==="reconnecting")&&"animate-spin")}),l.jsxs("div",{children:[l.jsx("div",{className:ye("font-medium",S.color),children:S.text}),E&&S.status!=="error"&&l.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:E}),a&&c&&l.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:c})]})]}),(S.status==="error"||S.status==="degraded")&&l.jsx(ve,{onClick:d,variant:"outline",size:"sm",className:"ml-4",children:""})]}),a&&l.jsxs(nm,{children:[S.status==="connected"&&l.jsx(_t.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 pt-3 border-t border-green-200 dark:border-green-800",children:l.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"    ."})}),S.status==="degraded"&&l.jsx(_t.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 pt-3 border-t border-amber-200 dark:border-amber-800",children:l.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"  .       ."})})]})]})})},TC=[{key:"Enter",description:"    "},{key:"Shift + Enter",description:" "},{key:"Tab",description:"   "}];function jC(){return l.jsxs(Ae,{"aria-labelledby":"gameplay-help-heading",children:[l.jsx(ct,{children:l.jsxs(ut,{id:"gameplay-help-heading",className:"flex items-center gap-2 text-base font-semibold",children:[l.jsx(mw,{className:"h-4 w-4","aria-hidden":"true"})," & "]})}),l.jsxs(De,{className:"space-y-4 text-sm text-muted-foreground",children:[l.jsxs("section",{"aria-labelledby":"gameplay-rules-heading",children:[l.jsx("h3",{id:"gameplay-rules-heading",className:"mb-2 text-sm font-semibold text-foreground",children:" "}),l.jsxs("ul",{className:"space-y-1 list-disc pl-5",children:[l.jsx("li",{children:"        ."}),l.jsx("li",{children:"      ."}),l.jsx("li",{children:"         ."})]})]}),l.jsx(Fl,{}),l.jsxs("section",{"aria-labelledby":"gameplay-shortcuts-heading",className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(hw,{className:"h-4 w-4","aria-hidden":"true"}),l.jsx("h3",{id:"gameplay-shortcuts-heading",className:"text-sm font-semibold text-foreground",children:" "})]}),l.jsx("ul",{className:"space-y-1",children:TC.map(o=>l.jsxs("li",{className:"flex items-center justify-between gap-4 rounded-md border border-border/60 bg-muted/40 px-3 py-2",children:[l.jsx(We,{variant:"secondary",className:"font-mono text-xs uppercase tracking-wide",children:o.key}),l.jsx("span",{className:"text-xs text-muted-foreground",children:o.description})]},o.key))})]}),l.jsx(Fl,{}),l.jsxs("section",{"aria-labelledby":"gameplay-safety-heading",className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(pw,{className:"h-4 w-4","aria-hidden":"true"}),l.jsx("h3",{id:"gameplay-safety-heading",className:"text-sm font-semibold text-foreground",children:" "})]}),l.jsx("p",{children:"          .        ."})]})]})]})}function RC({entries:o}){return l.jsxs(Ae,{children:[l.jsx(ct,{children:l.jsx(ut,{className:"text-base font-semibold",children:" "})}),l.jsx(De,{children:o.length===0?l.jsx("p",{className:"text-sm text-muted-foreground",children:"   .    ."}):l.jsx("ul",{className:"space-y-2 text-sm",children:o.map(a=>l.jsxs("li",{className:"flex items-center justify-between rounded-md border border-border/60 p-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(We,{variant:"secondary",children:a.nickname}),!a.isAlive&&l.jsx(We,{variant:"destructive",children:""})]}),l.jsxs("span",{className:"text-base font-semibold text-foreground",children:[a.score,""]})]},a.userId))})})]})}const CC=({players:o,currentPhase:a,className:s,currentPlayer:i,currentTurnPlayerId:c,votes:d={},isLiar:m=!1,suspectedPlayer:h})=>{const p=S=>S.isOnline?S.id===c?"active":d[S.id]?"voted":a==="WAITING_FOR_PLAYERS"?"ready":"waiting":"offline",g=S=>{switch(S){case"offline":return{color:"text-gray-500",bgColor:"bg-gray-100",icon:l.jsx(bw,{className:"h-3 w-3"}),label:""};case"active":return{color:"text-green-600",bgColor:"bg-green-100",icon:l.jsx(gw,{className:"h-3 w-3"}),label:" "};case"voted":return{color:"text-blue-600",bgColor:"bg-blue-100",icon:l.jsx(Gl,{className:"h-3 w-3"}),label:""};case"ready":return{color:"text-emerald-600",bgColor:"bg-emerald-100",icon:l.jsx(Gl,{className:"h-3 w-3"}),label:""};default:return{color:"text-yellow-600",bgColor:"bg-yellow-100",icon:l.jsx(As,{className:"h-3 w-3"}),label:" "}}},y=S=>S.id===h?"suspected":m&&S.id===i?.id?"liar":S.isHost?"host":"citizen",b=S=>{switch(S){case"liar":return{label:"",color:"text-orange-600",bgColor:"bg-orange-100",icon:l.jsx(Gy,{className:"h-3 w-3"})};case"suspected":return{label:" ",color:"text-red-600",bgColor:"bg-red-100",icon:l.jsx(Bi,{className:"h-3 w-3"})};case"host":return{label:"",color:"text-purple-600",bgColor:"bg-purple-100",icon:l.jsx(Os,{className:"h-3 w-3"})};default:return{label:"",color:"text-blue-600",bgColor:"bg-blue-100",icon:l.jsx(Ul,{className:"h-3 w-3"})}}},N=(S,_)=>S==="suspected"?"border-red-300 bg-red-50 animate-[pulse_2s_ease-in-out_infinite]":S==="liar"?"border-orange-300 bg-orange-50":S==="host"?"border-purple-200 bg-purple-50":_?"border-blue-300 bg-blue-50":"border-gray-200 bg-white",E=S=>Object.values(d).filter(_=>_===S).length,j=S=>{if(!S)return"  ";const _=Date.now()-S,L=Math.floor(_/6e4);return L===0?" ":L<60?`${L} `:`${Math.floor(L/60)} `};return l.jsxs("div",{className:`space-y-4 ${s||""}`,children:[l.jsxs(Ae,{children:[l.jsx(ct,{children:l.jsxs(ut,{className:"flex items-center text-sm",children:[l.jsx(Jn,{className:"mr-2 h-4 w-4"}),"  (",o.length,")"]})}),l.jsx(De,{children:l.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:l.jsx(nm,{children:o.map(S=>{const _=p(S),L=g(_),R=y(S),T=b(R),A=E(S.id),D=S.id===i?.id,Y=N(R,D),z=`${S.nickname} ${T.label}`;return l.jsxs(_t.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:`
                      flex items-center justify-between p-3 rounded-lg border transition-all
                      ${Y}
                      ${S.id===c?"ring-2 ring-green-300 ring-opacity-50":""}
                      ${S.isOnline?"":"opacity-60"}
                    `,"data-role":R,"aria-label":`${S.nickname}  ${T.label}`,children:[l.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[l.jsxs("div",{className:"relative",children:[l.jsx($i,{className:"h-8 w-8",children:l.jsx(Fi,{className:`text-xs ${T.bgColor} ${T.color}`,children:S.nickname.charAt(0).toUpperCase()})}),l.jsx("div",{className:`absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white ${S.isOnline?"bg-green-500":"bg-gray-400"}`})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("span",{className:`font-medium text-sm truncate ${D?"text-blue-700":"text-gray-900"}`,children:[S.nickname,D&&" ()"]}),l.jsx(We,{variant:"secondary",className:`text-xs ${T.bgColor} ${T.color}`,"aria-label":z,children:l.jsxs("div",{className:"flex items-center space-x-1","aria-hidden":"true",children:[T.icon,l.jsx("span",{children:T.label})]})})]}),l.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[l.jsxs("div",{className:`flex items-center space-x-1 text-xs ${L.color}`,children:[L.icon,l.jsx("span",{children:L.label})]}),l.jsxs("span",{className:"text-xs text-gray-500",children:[" ",j(S.lastActive)]})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[A>0&&l.jsxs(We,{variant:"destructive",className:"text-xs",children:[A,""]}),S.id===c&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-xs text-green-600 font-medium",children:""})]}),a==="SPEECH"&&S.id===c&&l.jsxs(We,{variant:"outline",className:"text-xs text-green-600 border-green-300",children:[l.jsx(Py,{className:"mr-1 h-3 w-3"})," "]}),a==="DEFENDING"&&S.id===h&&l.jsxs(We,{variant:"outline",className:"text-xs text-purple-600 border-purple-300",children:[l.jsx(Ul,{className:"mr-1 h-3 w-3"})," "]})]})]},S.id)})})})})]}),l.jsx(Ae,{children:l.jsx(De,{className:"pt-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-green-600",children:o.filter(S=>S.isOnline).length}),l.jsx("div",{className:"text-xs text-gray-600",children:""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-blue-600",children:Object.keys(d).length}),l.jsx("div",{className:"text-xs text-gray-600",children:" "})]})]})})}),a==="VOTING_FOR_LIAR"&&l.jsx(Ae,{className:"border-red-200 bg-red-50",children:l.jsx(De,{className:"pt-4",children:l.jsxs("div",{className:"text-sm text-red-800",children:[l.jsx("div",{className:"font-medium mb-2",children:"  "}),l.jsx("div",{className:"space-y-1",children:o.filter(S=>E(S.id)>0).sort((S,_)=>E(_.id)-E(S.id)).map(S=>l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:S.nickname}),l.jsxs("span",{className:"font-medium",children:[E(S.id),""]})]},S.id))})]})})})]})},_f=["waiting","speech","debate","vote","results"],_C={waiting:" ",speech:" ",debate:"",vote:"",results:" "},AC={waiting:"    .",speech:"      .",debate:"      .",vote:"     .",results:"     ."},OC={waiting:"    .",speech:"     .",debate:"     .",vote:"    .",results:"   ."};function DC({gameNumber:o,currentRound:a,totalRounds:s,currentTopic:i,currentWord:c,isLiar:d,currentPhase:m,timer:h,players:p,currentPlayer:g,currentTurnPlayerId:y,voting:b,suspectedPlayer:N,activities:E,summary:j,isLoading:S,error:_,chatMessages:L,chatLoading:R,chatError:T,typingPlayers:A,actionSlot:D,roundStage:Y,roundStageEnteredAt:z,roundHasStarted:I,roundSummaries:G,currentRoundSummary:Q,scoreboardEntries:ae,onSendChatMessage:le,onReportChatMessage:K,onReloadChat:se,onReturnToLobby:oe,onNextRound:M,onSubmitHint:H,onVotePlayer:ee,onSubmitDefense:ue,onGuessWord:pe,onCastFinalVote:k}){const C=x.useRef(null),[P,W]=x.useState(!1),[ne,de]=x.useState(!1),[re,ce]=x.useState(!1),[xe,Ne]=x.useState(!1),[Ce,Me]=x.useState(!1),[nt,ht]=x.useState(!1),Vt=x.useRef(null),[wt,Xe]=x.useState(0);x.useEffect(()=>{_&&Fe.error(_)},[_]),x.useEffect(()=>{T&&Fe.error(` : ${T}`)},[T]),x.useLayoutEffect(()=>{if(typeof window>"u")return;const me=()=>{Xe(Vt.current?.offsetHeight??0)};me();const ot=()=>me();window.addEventListener("resize",ot);let Gt=null;return Vt.current&&typeof ResizeObserver<"u"&&(Gt=new ResizeObserver(()=>me()),Gt.observe(Vt.current)),()=>{window.removeEventListener("resize",ot),Gt?.disconnect()}},[]),x.useEffect(()=>{if(h.timeRemaining===10&&C.current!==10){Fe.warning("  10 !",{description:"    .",duration:3e3}),C.current=10;return}h.timeRemaining>10&&(C.current=null)},[h.timeRemaining]);const Pn=x.useMemo(()=>({"--game-header-height":wt>0?`${Math.round(wt)}px`:"112px","--game-body-height":"calc(100vh - var(--game-header-height) - 3.5rem)","--game-safe-bottom":"env(safe-area-inset-bottom, 0px)",paddingBottom:"var(--game-safe-bottom)"}),[wt]),At=x.useMemo(()=>({height:"var(--game-body-height)",maxHeight:"var(--game-body-height)"}),[]),tn=x.useMemo(()=>Q||(G.length>0?G[0]:null),[Q,G]),vn=x.useMemo(()=>tn?G.filter(me=>me.concludedAt!==tn.concludedAt):G,[G,tn]);if(S)return l.jsx("div",{className:"flex min-h-[480px] items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-b-2 border-primary"}),l.jsx("div",{className:"text-muted-foreground",children:"   ..."})]})});if(_)return l.jsx("div",{className:"mx-auto max-w-3xl px-4",children:l.jsx(Ae,{className:"border-destructive",children:l.jsx(De,{className:"pt-6 text-center text-destructive",children:_})})});const at=_f.includes(Y)?Y:"waiting",Bt=_f.indexOf(at),Vn=Bt<=0?0:Math.round(Bt/(_f.length-1)*100),Bn=_C[at],Ot=AC[at],pt=at==="results"?"  .":OC[at],ge=`${a||0} / ${s||0}`,X=at==="waiting"&&!I,je=i??"   .",qe=c?`: "${c}"`:d?"    .":"  .",Pe=!P&&!ne,un=P?"grid-cols-1":"grid-cols-1 lg:grid-cols-[minmax(0,1.8fr),minmax(0,1fr)] xl:grid-cols-[minmax(0,2fr),minmax(0,1fr)]",nn=l.jsxs("div",{className:"flex min-h-0 flex-col gap-4",children:[l.jsx(Ae,{className:"border-border/60 bg-card/70 shadow-sm",children:l.jsxs(De,{className:"space-y-4 pt-4",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx(We,{variant:"secondary",className:"bg-primary/10 text-primary",children:Bn}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:[" ",ge]})]}),l.jsx("div",{className:"text-sm font-medium text-foreground",children:Ot}),X&&l.jsx("p",{className:"rounded-lg bg-amber-50 px-3 py-2 text-xs text-amber-700",children:"      ."})]}),l.jsxs("div",{children:[l.jsx(Kf,{value:Vn,className:"h-2","aria-label":" "}),l.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[l.jsxs("span",{children:[" : ",pt]}),l.jsx("span",{"aria-hidden":"true",className:"hidden md:inline",children:""}),l.jsxs("span",{children:[" ",j.alivePlayers,"/",j.totalPlayers]})]})]}),l.jsxs("div",{className:"rounded-xl bg-muted/50 p-3 text-xs leading-relaxed text-muted-foreground",children:[l.jsx("div",{className:"font-semibold text-foreground",children:""}),l.jsx("div",{children:je}),l.jsx("div",{className:"mt-2 border-t border-border/40 pt-2 text-muted-foreground/80",children:qe})]})]})}),D&&l.jsx(Ae,{className:"border-border/60 shadow-sm",children:l.jsx(De,{className:"pt-4",children:D})}),m!=="WAITING_FOR_PLAYERS"&&l.jsx(Ae,{className:"border-border/60 shadow-sm",children:l.jsx(De,{className:"space-y-4 pt-4",children:l.jsx(uC,{gamePhase:m,currentPlayer:g,isMyTurn:y===g?.id,isLiar:d,canVote:!!(g&&!b.votes[g.id]),timeRemaining:h.timeRemaining,onSubmitHint:H,onVotePlayer:ee,onSubmitDefense:ue,onGuessWord:pe,onCastFinalVote:k,players:p,suspectedPlayer:N??void 0,currentTopic:i??void 0,currentWord:c??void 0})})}),m==="GAME_OVER"&&l.jsx(Ae,{className:"border-border/60 shadow-sm",children:l.jsx(De,{className:"pt-4",children:l.jsx(fC,{currentRound:a,totalRounds:s,onNextRound:M,onReturnToLobby:oe})})})]});return l.jsxs("div",{className:"flex h-screen min-h-screen flex-col overflow-x-hidden bg-background",style:Pn,children:[l.jsx("div",{ref:Vt,className:"sticky top-0 z-20 border-b border-border/60 bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/75",children:l.jsxs("div",{className:"mx-auto flex w-full max-w-screen-2xl flex-col gap-3 px-4 py-3",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[oe&&l.jsxs(ve,{variant:"ghost",size:"sm",onClick:()=>oe?.(),className:"h-8 px-2",children:[l.jsx(tm,{className:"mr-2 h-4 w-4"})," "]}),l.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-2",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs uppercase tracking-wide text-muted-foreground",children:[l.jsxs("span",{className:"font-medium",children:[" #",o??"?"]}),l.jsx("span",{"aria-hidden":"true",className:"hidden sm:inline",children:""}),l.jsxs("span",{className:"text-muted-foreground/80",children:[" ",ge]})]}),l.jsx(cC,{phase:m,timeRemaining:h.timeRemaining})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-3 text-xs text-muted-foreground sm:text-sm",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Jn,{className:"h-4 w-4","aria-hidden":"true"}),l.jsxs("span",{className:"font-medium",children:[j.alivePlayers,"/",j.totalPlayers]})]}),l.jsxs("div",{className:"hidden sm:flex items-center gap-1",children:[l.jsx(yw,{className:"h-4 w-4","aria-hidden":"true"}),l.jsx("span",{children:j.readyPlayers})]}),l.jsx(wC,{compact:!0,className:"text-xs"})]})]}),l.jsxs("div",{className:"flex flex-col gap-2 rounded-2xl border border-border/50 bg-card/60 px-4 py-3 text-xs text-muted-foreground sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground",children:[l.jsx(We,{variant:"outline",className:"rounded-full px-2 py-1 text-xs",children:Bn}),l.jsx("span",{children:Ot})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsxs("span",{children:[" : ",pt]}),z&&l.jsx("span",{"aria-hidden":"true",className:"hidden sm:inline",children:""}),z&&l.jsxs("span",{children:["  ",new Date(z).toLocaleTimeString()]})]}),l.jsx(Kf,{value:Vn,className:"h-1.5 sm:w-48","aria-label":" "})]})]})}),l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx("div",{className:"mx-auto flex h-full min-h-0 w-full max-w-screen-2xl flex-col gap-6 px-4 py-6",children:l.jsxs("div",{className:`grid min-h-0 flex-1 overflow-hidden gap-6 transition-[grid-template-columns] motion-safe:duration-200 ${un}`,style:At,children:[l.jsxs("main",{className:"order-1 flex min-h-0 h-full flex-col overflow-hidden","aria-label":"  ",children:[l.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-2 text-xs text-muted-foreground flex-shrink-0",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx(ve,{variant:"outline",size:"xs",onClick:()=>W(me=>!me),"aria-pressed":P,className:"h-7 px-3",children:P?" ":" "}),l.jsx(ve,{variant:"ghost",size:"xs",onClick:()=>de(me=>!me),"aria-pressed":!ne,className:"hidden h-7 px-3 lg:inline-flex",children:ne?" ":" "}),l.jsx(ve,{variant:"secondary",size:"xs",className:"h-7 px-3 lg:hidden",onClick:()=>ht(!0),children:" "})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsxs(ve,{variant:"ghost",size:"xs",className:"h-7 px-3",onClick:()=>ce(!0),children:[l.jsx(Jn,{className:"mr-1 h-3.5 w-3.5"}),""]}),l.jsxs(ve,{variant:"ghost",size:"xs",className:"h-7 px-3",onClick:()=>Ne(!0),children:[l.jsx(vw,{className:"mr-1 h-3.5 w-3.5"}),""]}),l.jsxs(ve,{variant:"ghost",size:"xs",className:"h-7 px-3",onClick:()=>Me(!0),children:[l.jsx(xw,{className:"mr-1 h-3.5 w-3.5"}),""]})]})]}),l.jsx(yC,{messages:L,players:p,currentPlayer:g,typingPlayers:A,gamePhase:m,isLoading:R,error:T,onSendMessage:le,onReportMessage:K,onReloadHistory:se,className:`rounded-3xl border border-border/60 bg-card/70 shadow-sm ${P?"lg:rounded-3xl":""}`})]}),Pe&&l.jsx("aside",{className:"order-2 hidden min-h-0 flex-col gap-4 overflow-hidden lg:flex","aria-label":" ",children:l.jsx("div",{className:"flex min-h-0 flex-col gap-4 overflow-y-auto lg:[scrollbar-gutter:stable_both-edges] lg:pb-6",children:nn})})]})})}),l.jsx(Ka,{open:re,onOpenChange:ce,children:l.jsxs(ya,{className:"max-w-3xl",children:[l.jsxs(va,{children:[l.jsx(xa,{children:" &  "}),l.jsx(Sa,{children:"     ."})]}),l.jsx(Ar,{className:"max-h-[70vh] pr-4",children:l.jsxs("div",{className:"space-y-6 py-2",children:[l.jsx(Ae,{className:"border-border/60 shadow-sm",children:l.jsx(De,{className:"pt-4",children:l.jsx(CC,{players:p,currentPhase:m,currentPlayer:g,currentTurnPlayerId:y,votes:b.votes,isLiar:d,suspectedPlayer:N?.id??void 0})})}),l.jsx(Ae,{className:"border-border/60 shadow-sm",children:l.jsx(De,{className:"pt-4",children:l.jsx(RC,{entries:ae})})}),tn&&l.jsx(Ae,{className:"border-border/60 shadow-sm",children:l.jsx(De,{className:"pt-4",children:l.jsx(EC,{summary:tn,history:vn,players:p})})})]})})]})}),l.jsx(Ka,{open:xe,onOpenChange:Ne,children:l.jsxs(ya,{className:"max-w-2xl",children:[l.jsxs(va,{children:[l.jsx(xa,{children:" "}),l.jsx(Sa,{children:"      ."})]}),l.jsx(Ar,{className:"max-h-[70vh] pr-4",children:l.jsx(mC,{events:E,maxEvents:80,className:"rounded-2xl border border-border/60 bg-card/70 p-4 shadow-sm"})})]})}),l.jsx(Ka,{open:Ce,onOpenChange:Me,children:l.jsxs(ya,{className:"max-w-xl",children:[l.jsxs(va,{children:[l.jsx(xa,{children:" & "}),l.jsx(Sa,{children:"    ."})]}),l.jsx(Ar,{className:"max-h-[70vh] pr-4",children:l.jsx(jC,{})})]})}),l.jsx(Ka,{open:nt,onOpenChange:ht,children:l.jsxs(ya,{className:"max-w-lg sm:max-w-xl",children:[l.jsxs(va,{children:[l.jsx(xa,{children:" & "}),l.jsx(Sa,{children:"       ."})]}),l.jsx(Ar,{className:"max-h-[70vh] pr-4",children:l.jsx("div",{className:"space-y-4 py-2",children:nn})})]})})]})}function MC(){const o=Ls(c=>({gameId:c.gameId,gameNumber:c.gameNumber,sessionCode:c.sessionCode,gamePhase:c.gamePhase,currentRound:c.currentRound,totalRounds:c.totalRounds,currentTopic:c.currentTopic,currentWord:c.currentWord,currentLiar:c.currentLiar,isLiar:c.isLiar,timer:c.timer,voting:c.voting,scores:c.scores,players:c.players,currentPlayer:c.currentPlayer,currentTurnPlayerId:c.currentTurnPlayerId??null,chatMessages:c.chatMessages,chatLoading:c.chatLoading,chatError:c.chatError,typingPlayers:c.typingPlayers,gameResults:c.gameResults,isLoading:c.isLoading,error:c.error,roundStage:c.roundStage,roundStageEnteredAt:c.roundStageEnteredAt,roundHasStarted:c.roundHasStarted,roundSummaries:c.roundSummaries,currentRoundSummary:c.currentRoundSummary,addHint:c.addHint,castVote:c.castVote,addDefense:c.addDefense,setUserVote:c.setUserVote,sendChatMessage:c.sendChatMessage,loadChatHistory:c.loadChatHistory,startGame:c.startGame,toggleReady:c.toggleReady})),a=mt(o),s=x.useMemo(()=>{const c=a.players.length,d=a.players.filter(h=>h.isAlive!==!1).length,m=a.players.filter(h=>h.isReady).length;return{totalPlayers:c,alivePlayers:d,readyPlayers:m}},[a.players]),i=x.useMemo(()=>a.players.map(c=>({userId:Number.isFinite(c.userId)?Number(c.userId):Number.parseInt(c.id,10)||0,nickname:c.nickname,isAlive:c.isAlive!==!1,score:a.scores[c.id]??c.score??0})),[a.players,a.scores]);return{...a,summary:s,scoreboardEntries:i}}function IC({players:o,currentPlayer:a,readyPlayers:s,totalPlayers:i,minimumPlayers:c=3,onToggleReady:d,onStartGame:m,isTogglePending:h=!1,isStartPending:p=!1,canStartGame:g}){const y=!!a?.isHost,b=!!a?.isReady,N=Math.max(i-s,0),E=i<c;let j;if(E){const S=c-i;j=`${c}      .  ${i} ${S}  .`}else g?j=y?"  .     .":"  .     .":j=N===0?"   .    .":` ${N}     .`;return l.jsxs("div",{className:"rounded-lg border border-dashed border-muted-foreground/40 bg-card/70 px-4 py-3 shadow-sm",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[l.jsx(Jn,{className:"h-4 w-4","aria-hidden":"true"}),l.jsxs("span",{className:"font-medium text-foreground",children:[s,"/",i,"  "]}),l.jsxs(We,{variant:"outline",className:"text-[11px]",children:[" ",c,""]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(ve,{size:"sm",variant:b?"secondary":"default",onClick:d,disabled:h,children:[h?l.jsx(Ds,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(l0,{className:"mr-2 h-4 w-4"}),b?" ":" "]}),y&&m&&l.jsxs(ve,{size:"sm",onClick:m,disabled:!g||p||E,children:[p?l.jsx(Ds,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(Os,{className:"mr-2 h-4 w-4"})," "]})]})]}),l.jsx("p",{className:"mt-2 text-xs text-muted-foreground","aria-live":"polite",children:j}),l.jsx("div",{className:"mt-3 flex flex-wrap gap-2","aria-label":"  ",children:o.map(S=>{const _=!!S.isReady,L=!!S.isHost;return l.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-xs ${_?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-muted-foreground/20 bg-muted text-muted-foreground"} ${S.id===a?.id?"ring-1 ring-primary/40":""}`,children:[_?l.jsx(l0,{className:"h-3.5 w-3.5","aria-hidden":"true"}):l.jsx(As,{className:"h-3.5 w-3.5","aria-hidden":"true"}),l.jsx("span",{children:S.nickname}),L&&l.jsx(Os,{className:"h-3 w-3 text-amber-500","aria-label":""})]},S.id)})})]})}class kC{resolveConflict(a,s,i){switch(i){case"FIELD":return{...a,...s};case"VERSION":return s.version>=a.version?s:a;case"OUT_OF_ORDER":return s;default:return s}}handleConcurrentActions(a,s){return(s.timestamp||0)>=(a.timestamp||0)?{accepted:!1,reason:"Server action newer"}:{accepted:!0}}mergeStates(a){return a.reduce((s,i)=>({...s,...i}),{})}validateTransition(a,s){if(!a||!s)return!0;if(a.gameNumber!==s.gameNumber||s.gameCurrentRound<a.gameCurrentRound)return!1;if(s.gameCurrentRound===a.gameCurrentRound){const i=a.currentTurnIndex??0;return(s.currentTurnIndex??0)>=i}return!0}}const LC=new kC;class UC{constructor(){Oe(this,"handlers",{})}register(a,s){return this.handlers[a]||(this.handlers[a]=[]),this.handlers[a].push(s),()=>{this.handlers[a]=(this.handlers[a]||[]).filter(i=>i!==s)}}dispatch(a){(this.handlers[a.type]||[]).forEach(i=>{try{i(a.payload,a)}catch(c){console.error("handler error",c)}})}}const Sm=new UC;Sm.register("GAME_STATE_UPDATE",o=>{o?.gameState&&mt.getState().updateFromGameState?.(o.gameState)});Sm.register("ERROR",o=>{cn.getState().addSyncIssue({type:"VALIDATION_ERROR",description:o.message})});class GC{constructor(){Oe(this,"initialized",!1)}init(){this.initialized||(He.registerRawListener(a=>{a.type==="event"?this.handleGameEvent(a.data):a.type}),this.initialized=!0)}handleGameEvent(a){const s={type:a.type==="GAME_STATE_UPDATED"?"GAME_STATE_UPDATE":a.type,gameId:a.gameId?.toString?.()||"unknown",timestamp:a.timestamp||Date.now(),payload:a.payload};if(s.type==="GAME_STATE_UPDATE"){const c=s.payload;this.mergeServerState(c?.gameState)}Sm.dispatch(s);const i=mt.getState().handleGameEvent;if(typeof i=="function")try{i(a)}catch(c){console.error("Failed to apply game event to store:",c)}}mergeServerState(a){if(a)try{const s=mt.getState(),i=LC.mergeStates([a]);s.updateFromGameState?.(i);const c=cn.getState().optimisticUpdates;Object.keys(c).forEach(d=>{cn.getState().confirmOptimistic(d)})}catch(s){cn.getState().addSyncIssue({type:"VALIDATION_ERROR",description:"   ",data:s})}}}const HC=new GC;function zC(o){const a=Ls(m=>({status:m.status,connect:m.connect,processQueue:m.processQueue})),{status:s,connect:i,processQueue:c}=cn(a),d=mt(m=>m.gameNumber);return x.useEffect(()=>(HC.init(),(s==="idle"||s==="disconnected"||s==="error")&&i().catch(()=>{}),()=>{}),[s,i]),x.useEffect(()=>He.onChatMessage(h=>{mt.getState().ingestChatMessage(h)}),[]),x.useEffect(()=>{const m=o||(d?d.toString():void 0);if(s==="connected"&&m){He.subscribeToGame(m),c();const h=mt.getState();return typeof h.loadChatHistory=="function"&&h.chatMessages.length===0&&h.loadChatHistory().catch(()=>{}),()=>{He.unsubscribeFromGame(m)}}},[s,o,d,c]),{status:s,send:He.safePublish.bind(He),connected:s==="connected",reconnecting:s==="reconnecting"||s==="connecting"}}const sy=100,Ol=[],Xi=new Set,PC=()=>`${Date.now()}-${Math.random().toString(36).slice(2)}`,VC=o=>{const a={id:PC(),timestamp:o.timestamp??Date.now(),type:o.type,metadata:o.metadata};if(Ol.push(a),Ol.length>sy&&Ol.shift(),typeof window<"u"){const s=window,i=s.__gameMonitoringEvents__??[];i.push(a),s.__gameMonitoringEvents__=i.slice(-sy);try{window.dispatchEvent(new CustomEvent("game-monitoring",{detail:a}))}catch(c){console.error("[gameMonitoring] Failed to dispatch browser event",c)}}return Xi.forEach(s=>{try{s(a)}catch(i){console.error("[gameMonitoring] Listener error",i)}}),a},BC=o=>(Xi.add(o),()=>Xi.delete(o)),qC=()=>[...Ol],jr={emit:VC,subscribe:BC,getHistory:qC,attachToRef(o,a){const s=i=>{o.current=i,a(i)};return Xi.add(s),()=>Xi.delete(s)}},YC=15e3,$C=(o,a)=>o!=="connected"||!a||a==="idle"||a==="connecting"?!1:a!=="connected";function FC(){const o=cn(E=>E.status),a=cn(E=>E.avgLatency),s=cn(E=>E.messageQueue.length),i=cn(E=>Object.keys(E.pendingMessages).length),c=cn(E=>E.syncIssues),d=cn(E=>E.clearSyncIssues),m=mt(E=>E.gameNumber),h=mt(E=>E.updateFromGameState),p=mt(E=>E.loadChatHistory),g=Jx(E=>E.actions.hydrateFromSnapshot),y=x.useRef(o),b=x.useRef(null),N=x.useRef(0);x.useEffect(()=>{const E=y.current;o!==E&&(o==="disconnected"&&E==="connected"&&jr.emit({type:"CONNECTION_LOST",metadata:{previousStatus:E}}),o==="connected"&&$C(o,E)&&(jr.emit({type:"CONNECTION_RESTORED",metadata:{previousStatus:E}}),m&&!b.current&&(b.current=(async()=>{const j=Date.now();try{const S=await Zt.getGameState(m);if(h(S),g(S),typeof p=="function")try{await p(50)}catch(_){console.warn("[useGameRecovery] Failed to refresh chat history",_)}Fe.success("  ",{description:"  ."}),jr.emit({type:"RECOVERY_SUCCEEDED",metadata:{duration:Date.now()-j,gameNumber:m}})}catch(S){const _=S instanceof Error?S.message:"  .";Fe.error("   ",{description:_}),jr.emit({type:"RECOVERY_FAILED",metadata:{error:_,gameNumber:m}})}finally{b.current=null}})())),y.current=o)},[o,m,h,g,p]),x.useEffect(()=>{const E=Date.now(),j=s+i;if(o==="connected"&&(j>0||(a??0)>1500)){if(E-N.current>YC){const S=j>0?`    ${j}`:`  ${Math.round((a??0)/10)/100}s`;Fe.warning("  ",{description:S}),jr.emit({type:"LATENCY_WARNING",metadata:{queueLength:s,pendingCount:i,avgLatency:a}}),N.current=E}}else j===0&&(a??0)<800&&(N.current=0)},[o,s,i,a]),x.useEffect(()=>{c.length&&(c.forEach(E=>{const j=E.description??"    .";Fe.error("  ",{description:j});const S={...E};jr.emit({type:"SYNC_ISSUE",metadata:S})}),d())},[c,d])}const ry=o=>`${o}-${Date.now()}-${Math.random().toString(36).slice(2)}`,zi=o=>{if(o!=null){if(typeof o=="string")return o;if(typeof o=="number"&&Number.isFinite(o))return o.toString();if(typeof o=="object"){const a=o;if(a.id!=null)return zi(a.id);if(a.userId!=null)return zi(a.userId);if(a.playerId!=null)return zi(a.playerId)}}},XC=()=>mt.getState().gamePhase;function QC({onReturnToLobby:o,onNextRound:a}){const s=MC();FC();const{gameNumber:i,gamePhase:c,currentRound:d,totalRounds:m,currentTopic:h,currentWord:p,isLiar:g,timer:y,players:b,currentPlayer:N,currentTurnPlayerId:E,voting:j,summary:S,isLoading:_,error:L,chatMessages:R,chatLoading:T,chatError:A,typingPlayers:D,currentLiar:Y,roundStage:z,roundStageEnteredAt:I,roundHasStarted:G,roundSummaries:Q,currentRoundSummary:ae,scoreboardEntries:le,addHint:K,castVote:se,addDefense:oe,setUserVote:M,sendChatMessage:H,loadChatHistory:ee,startGame:ue,toggleReady:pe}=s,{submitHint:k,voteForLiar:C,submitDefense:P,castFinalVote:W,guessWord:ne}=rS(),[de,re]=x.useState([]),[ce,xe]=x.useState(!1),[Ne,Ce]=x.useState(!1),Me=x.useRef(!1);zC(i?i.toString():void 0),x.useEffect(()=>{re([])},[i]),x.useEffect(()=>{Me.current=!1},[i]);const nt=x.useCallback(ge=>{re(X=>[...X,ge].slice(-80))},[]);x.useEffect(()=>{c&&nt({id:ry("phase"),type:"phase_change",phase:c,timestamp:Date.now(),highlight:!0})},[c,nt]),x.useEffect(()=>{if(!i)return;const ge=(me,ot,Gt,Mn=!1,qt={})=>({id:ry(me),type:me,playerId:zi(qt.actor),targetId:zi(qt.target),content:Gt,phase:XC(),timestamp:ot.timestamp??Date.now(),highlight:Mn}),X=He.onHintProvided(me=>{if(me.type!=="HINT_PROVIDED"&&me.type!=="HINT_SUBMITTED")return;const ot=me.payload.playerName??me.payload.playerNickname??"";nt(ge("hint",me,`${ot}   .`,!1,{actor:me.payload.playerId}))}),je=He.onVoteCast(me=>{if(me.type!=="VOTE_CAST")return;const ot=me.payload,Gt=me.payload.voterName??ot.playerName??"",Mn=me.payload.targetName??ot.targetNickname??"";nt(ge("vote",me,`${Gt}  ${Mn} .`,!1,{actor:me.payload.voterId,target:me.payload.targetId}))}),qe=He.onDefenseSubmitted(me=>{if(me.type!=="DEFENSE_SUBMITTED")return;const ot=me.payload.defenderName??me.payload.playerName??"";nt(ge("defense",me,`${ot}   .`,!1,{actor:me.payload.defenderId??me.payload.playerId}))}),Pe=He.onPhaseChanged(me=>{if(me.type!=="PHASE_CHANGED")return;const ot=typeof me.payload.phase=="string"?me.payload.phase:c;nt(ge("phase_change",me,` ${ot} .`,!0))}),un=He.onRoundEnded(me=>{me.type==="ROUND_ENDED"&&nt(ge("system",me," .",!0))}),nn=He.onRoomDeleted(me=>{me.type!=="ROOM_DELETED"||Me.current||(Me.current=!0,Fe.warning(" .",{description:" ."}),mt.getState().resetGame(),o?.({skipServer:!0}))});return()=>{X(),je(),qe(),Pe(),un(),nn()}},[nt,i,c,o]);const ht=x.useMemo(()=>{const ge=j.targetPlayerId??(j.results?.actualLiar?j.results.actualLiar.toString():void 0)??Y;return ge?b.find(X=>X.id===ge||X.userId!=null&&X.userId.toString()===ge||X.nickname===ge)??null:null},[b,j.targetPlayerId,j.results,Y]),Vt=x.useCallback(async ge=>{if(!(!i||!N)){K(N.id,N.nickname,ge);try{await k(ge)}catch(X){console.error("Failed to send hint action:",X)}}},[K,N,i,k]),wt=x.useCallback(async ge=>{if(!i||!N)return;const X=b.find(Pe=>Pe.id===ge||Pe.userId!=null&&String(Pe.userId)===ge||Pe.nickname===ge),je=X?.id??ge,qe=X?.userId??Number.parseInt(ge,10);if(!Number.isFinite(qe)){console.warn("Unable to resolve target user id for vote",{playerId:ge});return}se(N.id,je),M(je);try{await C(qe)}catch(Pe){console.error("Failed to send vote action:",Pe)}},[se,N,i,b,M,C]),Xe=x.useCallback(async ge=>{if(!(!i||!N)){oe(N.id,N.nickname,ge);try{await P(ge)}catch(X){console.error("Failed to send defense action:",X)}}},[oe,N,i,P]),Pn=x.useCallback(async ge=>{if(!(!i||!N))try{await ne(ge)}catch(X){console.error("Failed to send guess action:",X)}},[N,i,ne]),At=x.useCallback(async ge=>{if(!(!i||!N))try{await W(ge)}catch(X){console.error("Failed to send final vote action:",X)}},[W,N,i]),tn=x.useCallback(async(ge,X="DISCUSSION")=>{await H(ge,X)},[H]),vn=x.useCallback(async()=>{try{await ee()}catch(ge){console.error("Failed to reload chat history:",ge),Fe.error("   .")}},[ee]),at=x.useCallback(ge=>{Fe.info(" .",{description:`${ge.playerNickname??"  "}: ${ge.content}`})},[]),Bt=x.useCallback(async()=>{if(!pe||!N)return;Ce(!0);const ge=!(N.isReady??!1);try{await pe(),Fe.success(ge?" .":"  .")}catch(X){console.error("Failed to toggle ready state:",X),Fe.error("   .  .")}finally{Ce(!1)}},[pe,N]),Vn=x.useCallback(async()=>{if(!(!ue||!N?.isHost)){xe(!0);try{await ue(),Fe.success(" !")}catch(ge){console.error("Failed to start game:",ge),Fe.error("  .    .")}finally{xe(!1)}}},[ue,N?.isHost]),Bn=c==="WAITING_FOR_PLAYERS",Ot=S.totalPlayers>=3&&S.readyPlayers===S.totalPlayers,pt=Bn?l.jsx(IC,{players:b,currentPlayer:N,readyPlayers:S.readyPlayers,totalPlayers:S.totalPlayers,minimumPlayers:3,onToggleReady:Bt,onStartGame:Vn,isTogglePending:Ne,isStartPending:ce,canStartGame:Ot}):null;return l.jsx(DC,{gameNumber:i,currentRound:d,totalRounds:m,currentTopic:h,currentWord:p,isLiar:g,currentPhase:c,timer:y,players:b,currentPlayer:N,currentTurnPlayerId:E,voting:j,suspectedPlayer:ht,activities:de,summary:S,isLoading:_,error:L,actionSlot:pt,roundStage:z,roundStageEnteredAt:I,roundHasStarted:G,roundSummaries:Q,currentRoundSummary:ae,scoreboardEntries:le,chatMessages:R,chatLoading:T,chatError:A,typingPlayers:D,onSendChatMessage:tn,onReportChatMessage:at,onReloadChat:vn,onReturnToLobby:o,onNextRound:a,onSubmitHint:Vt,onVotePlayer:wt,onSubmitDefense:Xe,onGuessWord:Pn,onCastFinalVote:At})}function KC(){const{gameId:o}=Ay(),a=Ir(),s=Ls(_=>({gameNumber:_.gameNumber,setGameNumber:_.setGameNumber,resetGame:_.resetGame,updateFromGameState:_.updateFromGameState,leaveGame:_.leaveGame})),{gameNumber:i,setGameNumber:c,resetGame:d,updateFromGameState:m,leaveGame:h}=mt(s),{hydrateFromSnapshot:p}=Jx(_=>_.actions),{toast:g}=Wa(),[y,b]=ie.useState(!0),[N,E]=ie.useState(null);ie.useEffect(()=>{(async()=>{if(!o){E(" ID "),b(!1);return}const L=parseInt(o);if(isNaN(L)){E("  ID"),b(!1);return}try{if(b(!0),E(null),!i||i!==L){const R=await Zt.getGameState(L);c(L),m(R),p(R),console.log("Game state restored:",R)}b(!1)}catch(R){console.error("Failed to initialize game:",R),E(R instanceof Error?R.message:"   "),b(!1),g({title:"   ",description:"   ",variant:"destructive"})}})()},[o,i,c,m,p,g]);const j=_=>{const L=_?.skipServer??!1,T=mt.getState().gameNumber??i;!L&&T&&h().catch(A=>{console.error("Failed to leave game in background:",A);const D=A instanceof Error?A.message:"   ";g({title:"  ",description:D,variant:"destructive"})}),d(),a("/lobby",{replace:!0})},S=()=>{console.log("Next round requested")};return y?l.jsx("div",{className:"container mx-auto p-4 max-w-2xl",children:l.jsx(Ae,{children:l.jsx(De,{className:"pt-6",children:l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("div",{className:"text-lg font-medium",children:"  ..."})]})})})}):N||!i?l.jsx("div",{className:"container mx-auto p-4 max-w-2xl",children:l.jsx(Ae,{children:l.jsx(De,{className:"pt-6",children:l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-lg font-medium mb-4",children:N||"   "}),l.jsxs(ve,{onClick:()=>j(),children:[l.jsx(tm,{className:"mr-2 h-4 w-4"})," "]})]})})})}):l.jsx(QC,{onReturnToLobby:j,onNextRound:S})}function WC(){const{gameId:o}=Ay(),a=Ir(),{toast:s}=Wa(),i=Ls(_=>({gameNumber:_.gameNumber,leaveGame:_.leaveGame,resetGame:_.resetGame})),{gameNumber:c,leaveGame:d,resetGame:m}=mt(i),[h,p]=x.useState(null),[g,y]=x.useState(!0);x.useEffect(()=>{(async()=>{if(!o){s({title:"Invalid game ID",description:"Game ID is required to view results",variant:"destructive"}),a("/lobby");return}try{y(!0);const L=await fetch(`/api/game/${o}/results`);if(!L.ok)throw new Error("Failed to fetch game results");const R=await L.json();p(R)}catch(L){console.error("Failed to fetch game results:",L),s({title:"Failed to load results",description:"Could not load game results. Please try again.",variant:"destructive"}),a("/lobby")}finally{y(!1)}})()},[o,a,s]);const b=()=>{a(`/game/${o}`),s({title:"  ",description:"    "})},N=()=>{(async()=>{try{c?await d():m(),a("/lobby"),s({title:" ",description:"      "})}catch(_){const L=_ instanceof Error?_.message:"   ";s({title:"  ",description:L,variant:"destructive"})}})()},E=()=>{if(!h){s({title:"  ",description:"   .",variant:"destructive"});return}const _=`  !
 : ${h.winner}
  ${h.totalRounds}`;navigator.share?navigator.share({title:"  ",text:_}).catch(()=>{navigator.clipboard.writeText(_),s({title:" ",description:"   "})}):(navigator.clipboard.writeText(_),s({title:" ",description:"   "}))},j=_=>{switch(_){case 1:return l.jsx(Os,{className:"h-5 w-5 text-yellow-500"});case 2:return l.jsx(Ew,{className:"h-5 w-5 text-gray-400"});case 3:return l.jsx(Nw,{className:"h-5 w-5 text-amber-600"});default:return l.jsx(Bi,{className:"h-5 w-5 text-muted-foreground"})}},S=_=>{switch(_){case 1:return l.jsx(We,{className:"bg-yellow-500 hover:bg-yellow-600",children:"1"});case 2:return l.jsx(We,{className:"bg-gray-400 hover:bg-gray-500",children:"2"});case 3:return l.jsx(We,{className:"bg-amber-600 hover:bg-amber-700",children:"3"});default:return l.jsxs(We,{variant:"outline",children:[_,""]})}};return g?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading game results..."})]})}):h?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-100 dark:from-gray-900 dark:to-gray-800",children:l.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[l.jsxs(_t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[l.jsx(em,{className:"h-8 w-8 text-yellow-500"}),l.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:" "})]}),l.jsxs("p",{className:"text-muted-foreground text-lg",children:[h.totalRounds,"  !"]})]}),l.jsx(_t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:l.jsx(Ae,{className:"border-yellow-200 bg-gradient-to-r from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20",children:l.jsx(ct,{className:"text-center",children:l.jsxs(ut,{className:"text-2xl flex items-center justify-center gap-2",children:[l.jsx(Os,{className:"h-6 w-6 text-yellow-500"})," : ",h.winner," "]})})})}),l.jsxs(_t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"space-y-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-center",children:" "}),l.jsx("div",{className:"space-y-3",children:h.players.map((_,L)=>l.jsx(_t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.5+L*.1},children:l.jsx(Ae,{className:`${_.isCurrentUser?"ring-2 ring-blue-500 bg-blue-50 dark:bg-blue-900/20":""}`,children:l.jsx(De,{className:"py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[j(_.rank),l.jsxs("div",{children:[l.jsxs("h3",{className:"font-semibold text-lg",children:[_.nickname,_.isCurrentUser&&l.jsx(We,{variant:"outline",className:"ml-2",children:""})]}),l.jsxs("p",{className:"text-muted-foreground",children:[" : ",_.totalScore,""]})]})]}),l.jsxs("div",{className:"text-right",children:[S(_.rank),l.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:[": ",_.roundsWon,""]})]})]})})})},_.id))})]}),l.jsxs(_t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"grid gap-4 md:grid-cols-3",children:[l.jsxs(Ae,{children:[l.jsx(ct,{className:"text-center",children:l.jsx(ut,{className:"text-sm font-medium",children:" "})}),l.jsx(De,{className:"text-center",children:l.jsx("div",{className:"text-3xl font-bold",children:h.totalRounds})})]}),l.jsxs(Ae,{children:[l.jsx(ct,{className:"text-center",children:l.jsx(ut,{className:"text-sm font-medium",children:" "})}),l.jsx(De,{className:"text-center",children:l.jsx("div",{className:"text-3xl font-bold",children:h.players.length})})]}),l.jsxs(Ae,{children:[l.jsx(ct,{className:"text-center",children:l.jsx(ut,{className:"text-sm font-medium",children:" "})}),l.jsx(De,{className:"text-center",children:l.jsx("div",{className:"text-3xl font-bold",children:Math.max(...h.players.map(_=>_.totalScore))})})]})]}),l.jsxs(_t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:1},className:"flex flex-col sm:flex-row gap-4 justify-center items-center pt-6",children:[l.jsxs(ve,{size:"lg",onClick:b,className:"w-full sm:w-auto",children:[l.jsx(Vy,{className:"mr-2 h-5 w-5"})," "]}),l.jsxs(ve,{variant:"outline",size:"lg",onClick:N,className:"w-full sm:w-auto",children:[l.jsx(Pi,{className:"mr-2 h-5 w-5"})," "]}),l.jsxs(ve,{variant:"secondary",size:"lg",onClick:E,className:"w-full sm:w-auto",children:[l.jsx(Sw,{className:"mr-2 h-5 w-5"})," "]})]})]})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("p",{className:"text-muted-foreground",children:"Failed to load game results"}),l.jsxs(ve,{onClick:N,children:[l.jsx(Pi,{className:"mr-2 h-4 w-4"}),"Return to Lobby"]})]})})}function iy(){const o=BE(),a=()=>{window.location.reload()},s=()=>{window.location.href="/main"};return console.error("Route Error:",o),l.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:l.jsxs(Ae,{className:"max-w-md w-full",children:[l.jsxs(ct,{className:"text-center",children:[l.jsx("div",{className:"mx-auto mb-4 h-12 w-12 rounded-full bg-destructive/10 flex items-center justify-center",children:l.jsx(Hy,{className:"h-6 w-6 text-destructive"})}),l.jsx(ut,{children:"Something went wrong"}),l.jsx(Ms,{children:o?.statusText||o?.message||"An unexpected error occurred"})]}),l.jsxs(De,{className:"space-y-3",children:[l.jsxs(ve,{variant:"default",className:"w-full",onClick:a,children:[l.jsx(Vy,{className:"mr-2 h-4 w-4"}),"Reload Page"]}),l.jsxs(ve,{variant:"outline",className:"w-full",onClick:s,children:[l.jsx(Pi,{className:"mr-2 h-4 w-4"}),"Go Home"]}),!1]})]})})}function ZC(){return l.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:l.jsxs(Ae,{className:"max-w-md w-full",children:[l.jsxs(ct,{className:"text-center",children:[l.jsx("div",{className:"mx-auto mb-4 text-6xl font-bold text-muted-foreground",children:"404"}),l.jsx(ut,{children:"Page Not Found"}),l.jsx(Ms,{children:"The page you're looking for doesn't exist or has been moved."})]}),l.jsxs(De,{className:"space-y-3",children:[l.jsx(ve,{asChild:!0,className:"w-full",children:l.jsxs(Ml,{to:"/main",children:[l.jsx(Pi,{className:"mr-2 h-4 w-4"}),"Go Home"]})}),l.jsx(ve,{asChild:!0,variant:"outline",className:"w-full",children:l.jsxs(Ml,{to:-1,children:[l.jsx(tm,{className:"mr-2 h-4 w-4"}),"Go Back"]})})]})]})})}const JC="/liargame/",e_=qE([{path:"/",element:l.jsx(gj,{}),errorElement:l.jsx(iy,{}),children:[{index:!0,element:l.jsx(Gb,{})},{path:"login",element:l.jsx(Gb,{})}]},{path:"/",element:l.jsx(pj,{}),errorElement:l.jsx(iy,{}),children:[{path:"lobby",element:l.jsx(Tf,{children:l.jsx(JR,{})})},{path:"game/:gameId",element:l.jsx(Tf,{children:l.jsx(KC,{})})},{path:"results/:gameId",element:l.jsx(Tf,{children:l.jsx(WC,{})})},{path:"*",element:l.jsx(ZC,{})}]}],{basename:JC}),t_=900*1e3,oy=["mousedown","mousemove","keypress","scroll","touchstart"];function n_(){const{isAuthenticated:o,checkAuth:a,logout:s}=zn(),{isAnyModalOpen:i,activeModals:c}=ym(),d=x.useRef(null),m=x.useRef(Date.now()),h=()=>{m.current=Date.now()},p=x.useCallback(async()=>{if(o){if(i){console.log("[SessionManager] Deferring session refresh - modal open:",Array.from(c));return}try{await a(),console.log("Session refreshed successfully")}catch(g){if(console.error("Session refresh failed:",g),i){console.warn("[SessionManager] Deferring logout - modal open, will retry after modal closes");return}await s()}}},[c,a,i,o,s]);return x.useEffect(()=>{if(!o){d.current&&(clearInterval(d.current),d.current=null);return}const g=()=>h();return oy.forEach(y=>{document.addEventListener(y,g,!0)}),d.current=setInterval(()=>{Date.now()-m.current<1800*1e3&&p()},t_),()=>{oy.forEach(y=>{document.removeEventListener(y,g,!0)}),d.current&&(clearInterval(d.current),d.current=null)}},[c,a,o,i,s,p]),{refreshSession:p,updateActivity:h}}function a_(){const[o,a]=x.useState(!0),s=zn(d=>d.checkAuth),i=zn(d=>d.isAuthenticated);n_();const{connect:c}=lS();return x.useEffect(()=>{(async()=>{try{await s()}catch(m){console.error("     :",m)}finally{a(!1)}})()},[s]),x.useEffect(()=>{if(o)return;const d=window.location.pathname;i&&!(d==="/"||d==="/login")&&c().catch(h=>{console.warn("WebSocket   :",h)})},[c,i,o]),o?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("div",{className:"text-gray-600",children:"  ..."})]})}):l.jsxs(l.Fragment,{children:[l.jsx(YE,{router:e_}),l.jsx(t1,{position:"top-right",richColors:!0,closeButton:!0})]})}Cw.createRoot(document.getElementById("root")).render(l.jsx(x.StrictMode,{children:l.jsx(_R,{children:l.jsx(a_,{})})}));
//# sourceMappingURL=index-CYvVpBeH.js.map
